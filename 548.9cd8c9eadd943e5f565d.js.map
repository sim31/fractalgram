{"version":3,"file":"548.9cd8c9eadd943e5f565d.js","mappings":"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","sources":["webpack://telegram-t/./src/components/common/Avatar.tsx","webpack://telegram-t/./src/components/ui/ConfirmDialog.tsx","webpack://telegram-t/./src/components/ui/InfiniteScroll.tsx","webpack://telegram-t/./src/components/ui/Modal.tsx","webpack://telegram-t/./src/util/trapFocus.ts","webpack://telegram-t/./src/components/ui/Portal.ts","webpack://telegram-t/./src/hooks/useCurrentOrPrev.ts","webpack://telegram-t/./src/hooks/useInfiniteScroll.ts","webpack://telegram-t/./src/hooks/useMedia.ts","webpack://telegram-t/./src/util/forceReflow.ts","webpack://telegram-t/./src/util/resetScroll.ts","webpack://telegram-t/./src/util/safePlay.ts"],"sourcesContent":["import { MouseEvent as ReactMouseEvent } from 'react';\nimport React, { FC, memo, useCallback } from '../../lib/teact/teact';\n\nimport {\n  ApiChat, ApiMediaFormat, ApiPhoto, ApiUser, ApiUserStatus,\n} from '../../api/types';\n\nimport { IS_TEST } from '../../config';\nimport {\n  getChatAvatarHash,\n  getChatTitle,\n  getUserColorKey,\n  getUserFullName,\n  isUserId,\n  isChatWithRepliesBot,\n  isDeletedUser,\n  isUserOnline,\n} from '../../global/helpers';\nimport { getFirstLetters } from '../../util/textFormat';\nimport buildClassName, { createClassNameBuilder } from '../../util/buildClassName';\nimport renderText from './helpers/renderText';\nimport useMedia from '../../hooks/useMedia';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useLang from '../../hooks/useLang';\n\nimport './Avatar.scss';\n\nconst cn = createClassNameBuilder('Avatar');\ncn.img = cn('img');\ncn.icon = cn('icon');\n\ntype OwnProps = {\n  className?: string;\n  size?: 'micro' | 'tiny' | 'small' | 'medium' | 'large' | 'jumbo';\n  chat?: ApiChat;\n  user?: ApiUser;\n  photo?: ApiPhoto;\n  userStatus?: ApiUserStatus;\n  text?: string;\n  isSavedMessages?: boolean;\n  lastSyncTime?: number;\n  onClick?: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>, hasPhoto: boolean) => void;\n};\n\nconst Avatar: FC<OwnProps> = ({\n  className,\n  size = 'large',\n  chat,\n  user,\n  photo,\n  userStatus,\n  text,\n  isSavedMessages,\n  lastSyncTime,\n  onClick,\n}) => {\n  const isDeleted = user && isDeletedUser(user);\n  const isReplies = user && isChatWithRepliesBot(user.id);\n  let imageHash: string | undefined;\n\n  if (!isSavedMessages && !isDeleted) {\n    if (user) {\n      imageHash = getChatAvatarHash(user);\n    } else if (chat) {\n      imageHash = getChatAvatarHash(chat);\n    } else if (photo) {\n      imageHash = `photo${photo.id}?size=m`;\n    }\n  }\n\n  const blobUrl = useMedia(imageHash, false, ApiMediaFormat.BlobUrl, lastSyncTime);\n  const hasBlobUrl = Boolean(blobUrl);\n  const { transitionClassNames } = useShowTransition(hasBlobUrl, undefined, hasBlobUrl, 'slow');\n\n  const lang = useLang();\n\n  let content: string | undefined = '';\n\n  if (isSavedMessages) {\n    content = <i className={buildClassName(cn.icon, 'icon-avatar-saved-messages')} />;\n  } else if (isDeleted) {\n    content = <i className={buildClassName(cn.icon, 'icon-avatar-deleted-account')} />;\n  } else if (isReplies) {\n    content = <i className={buildClassName(cn.icon, 'icon-reply-filled')} />;\n  } else if (blobUrl) {\n    content = (\n      <img\n        src={blobUrl}\n        className={buildClassName(cn.img, 'avatar-media', transitionClassNames)}\n        alt=\"\"\n        decoding=\"async\"\n      />\n    );\n  } else if (user) {\n    const userFullName = getUserFullName(user);\n    content = userFullName ? getFirstLetters(userFullName, 2) : undefined;\n  } else if (chat) {\n    const title = getChatTitle(lang, chat);\n    content = title && getFirstLetters(title, isUserId(chat.id) ? 2 : 1);\n  } else if (text) {\n    content = getFirstLetters(text, 2);\n  }\n\n  const isOnline = !isSavedMessages && user && userStatus && isUserOnline(user, userStatus);\n  const fullClassName = buildClassName(\n    `Avatar size-${size}`,\n    className,\n    `color-bg-${getUserColorKey(user || chat)}`,\n    isSavedMessages && 'saved-messages',\n    isDeleted && 'deleted-account',\n    isReplies && 'replies-bot-account',\n    isOnline && 'online',\n    onClick && 'interactive',\n    (!isSavedMessages && !blobUrl) && 'no-photo',\n  );\n\n  const hasImage = Boolean(isSavedMessages || blobUrl);\n  const handleClick = useCallback((e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (onClick) {\n      onClick(e, hasImage);\n    }\n  }, [onClick, hasImage]);\n\n  const senderId = (user || chat) && (user || chat)!.id;\n\n  return (\n    <div className={fullClassName} onClick={handleClick} data-test-sender-id={IS_TEST ? senderId : undefined}>\n      {typeof content === 'string' ? renderText(content, [size === 'jumbo' ? 'hq_emoji' : 'emoji']) : content}\n    </div>\n  );\n};\n\nexport default memo(Avatar);\n","import React, {\n  FC, memo, useCallback, useRef,\n} from '../../lib/teact/teact';\n\nimport useLang from '../../hooks/useLang';\nimport { TextPart } from '../common/helpers/renderMessageText';\nimport useKeyboardListNavigation from '../../hooks/useKeyboardListNavigation';\n\nimport Modal from './Modal';\nimport Button from './Button';\n\ntype OwnProps = {\n  isOpen: boolean;\n  onClose: () => void;\n  onCloseAnimationEnd?: () => void;\n  title?: string;\n  header?: FC;\n  textParts?: TextPart[];\n  text?: string;\n  confirmLabel?: string;\n  confirmHandler: () => void;\n  confirmIsDestructive?: boolean;\n  isButtonsInOneRow?: boolean;\n  children?: React.ReactNode;\n};\n\nconst ConfirmDialog: FC<OwnProps> = ({\n  isOpen,\n  onClose,\n  onCloseAnimationEnd,\n  title,\n  header,\n  text,\n  textParts,\n  confirmLabel = 'Confirm',\n  confirmHandler,\n  confirmIsDestructive,\n  isButtonsInOneRow,\n  children,\n}) => {\n  const lang = useLang();\n\n  // eslint-disable-next-line no-null/no-null\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const handleSelectWithEnter = useCallback((index: number) => {\n    if (index === -1) confirmHandler();\n  }, [confirmHandler]);\n\n  const handleKeyDown = useKeyboardListNavigation(containerRef, isOpen, handleSelectWithEnter, '.Button');\n\n  return (\n    <Modal\n      className=\"confirm\"\n      title={title}\n      header={header}\n      isOpen={isOpen}\n      onClose={onClose}\n      onCloseAnimationEnd={onCloseAnimationEnd}\n    >\n      {text && text.split('\\\\n').map((textPart) => (\n        <p>{textPart}</p>\n      ))}\n      {textParts || children}\n      <div className={isButtonsInOneRow ? 'dialog-buttons mt-2' : ''} ref={containerRef} onKeyDown={handleKeyDown}>\n        <Button\n          className=\"confirm-dialog-button\"\n          isText\n          onClick={confirmHandler}\n          color={confirmIsDestructive ? 'danger' : 'primary'}\n        >\n          {confirmLabel}\n        </Button>\n        <Button className=\"confirm-dialog-button\" isText onClick={onClose}>{lang('Cancel')}</Button>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(ConfirmDialog);\n","import { RefObject, UIEvent } from 'react';\nimport { LoadMoreDirection } from '../../types';\n\nimport React, {\n  FC, useCallback, useEffect, useLayoutEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\n\nimport { debounce } from '../../util/schedulers';\nimport resetScroll from '../../util/resetScroll';\nimport { IS_ANDROID } from '../../util/environment';\n\ntype OwnProps = {\n  ref?: RefObject<HTMLDivElement>;\n  className?: string;\n  onLoadMore?: ({ direction }: { direction: LoadMoreDirection; noScroll?: boolean }) => void;\n  onScroll?: (e: UIEvent<HTMLDivElement>) => void;\n  onKeyDown?: (e: React.KeyboardEvent<any>) => void;\n  items?: any[];\n  itemSelector?: string;\n  preloadBackwards?: number;\n  sensitiveArea?: number;\n  withAbsolutePositioning?: boolean;\n  maxHeight?: number;\n  noScrollRestore?: boolean;\n  noScrollRestoreOnTop?: boolean;\n  noFastList?: boolean;\n  cacheBuster?: any;\n  children: React.ReactNode;\n};\n\nconst DEFAULT_LIST_SELECTOR = '.ListItem';\nconst DEFAULT_PRELOAD_BACKWARDS = 20;\nconst DEFAULT_SENSITIVE_AREA = 800;\n\nconst InfiniteScroll: FC<OwnProps> = ({\n  ref,\n  className,\n  onLoadMore,\n  onScroll,\n  onKeyDown,\n  items,\n  itemSelector = DEFAULT_LIST_SELECTOR,\n  preloadBackwards = DEFAULT_PRELOAD_BACKWARDS,\n  sensitiveArea = DEFAULT_SENSITIVE_AREA,\n  withAbsolutePositioning,\n  maxHeight,\n  // Used to turn off restoring scroll position (e.g. for frequently re-ordered chat or user lists)\n  noScrollRestore = false,\n  noScrollRestoreOnTop = false,\n  noFastList,\n  // Used to re-query `listItemElements` if rendering is delayed by transition\n  cacheBuster,\n  children,\n}: OwnProps) => {\n  // eslint-disable-next-line no-null/no-null\n  let containerRef = useRef<HTMLDivElement>(null);\n  if (ref) {\n    containerRef = ref;\n  }\n\n  const stateRef = useRef<{\n    listItemElements?: NodeListOf<HTMLDivElement>;\n    isScrollTopJustUpdated?: boolean;\n    currentAnchor?: HTMLDivElement | undefined;\n    currentAnchorTop?: number;\n  }>({});\n\n  const [loadMoreBackwards, loadMoreForwards] = useMemo(() => {\n    if (!onLoadMore) {\n      return [];\n    }\n\n    return [\n      debounce((noScroll = false) => {\n        onLoadMore({ direction: LoadMoreDirection.Backwards, noScroll });\n      }, 1000, true, false),\n      debounce(() => {\n        onLoadMore({ direction: LoadMoreDirection.Forwards });\n      }, 1000, true, false),\n    ];\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [onLoadMore, items]);\n\n  // Initial preload\n  useEffect(() => {\n    if (!loadMoreBackwards) {\n      return;\n    }\n\n    if (preloadBackwards > 0 && (!items || items.length < preloadBackwards)) {\n      loadMoreBackwards(true);\n      return;\n    }\n\n    const { scrollHeight, clientHeight } = containerRef.current!;\n    if (clientHeight && scrollHeight <= clientHeight) {\n      loadMoreBackwards();\n    }\n  }, [items, loadMoreBackwards, preloadBackwards]);\n\n  // Restore `scrollTop` after adding items\n  useLayoutEffect(() => {\n    const container = containerRef.current!;\n    const state = stateRef.current;\n\n    state.listItemElements = container.querySelectorAll<HTMLDivElement>(itemSelector);\n\n    let newScrollTop;\n\n    if (state.currentAnchor && Array.from(state.listItemElements).includes(state.currentAnchor)) {\n      const { scrollTop } = container;\n      const newAnchorTop = state.currentAnchor.getBoundingClientRect().top;\n      newScrollTop = scrollTop + (newAnchorTop - state.currentAnchorTop!);\n    } else {\n      const nextAnchor = state.listItemElements[0];\n      if (nextAnchor) {\n        state.currentAnchor = nextAnchor;\n        state.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n      }\n    }\n\n    if (withAbsolutePositioning || noScrollRestore) {\n      return;\n    }\n\n    if (noScrollRestoreOnTop && container.scrollTop === 0) {\n      return;\n    }\n\n    resetScroll(container, newScrollTop);\n\n    state.isScrollTopJustUpdated = true;\n  }, [items, itemSelector, noScrollRestore, noScrollRestoreOnTop, cacheBuster, withAbsolutePositioning]);\n\n  const handleScroll = useCallback((e: UIEvent<HTMLDivElement>) => {\n    if (loadMoreForwards && loadMoreBackwards) {\n      const {\n        isScrollTopJustUpdated, currentAnchor, currentAnchorTop,\n      } = stateRef.current;\n      const listItemElements = stateRef.current.listItemElements!;\n\n      if (isScrollTopJustUpdated) {\n        stateRef.current.isScrollTopJustUpdated = false;\n        return;\n      }\n\n      const listLength = listItemElements.length;\n      const container = containerRef.current!;\n      const { scrollTop, scrollHeight, offsetHeight } = container;\n      const top = listLength ? listItemElements[0].offsetTop : 0;\n      const isNearTop = scrollTop <= top + sensitiveArea;\n      const bottom = listLength\n        ? listItemElements[listLength - 1].offsetTop + listItemElements[listLength - 1].offsetHeight\n        : scrollHeight;\n      const isNearBottom = bottom - (scrollTop + offsetHeight) <= sensitiveArea;\n      let isUpdated = false;\n\n      if (isNearTop) {\n        const nextAnchor = listItemElements[0];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingUp = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop > currentAnchorTop\n          );\n\n          if (isMovingUp) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreForwards();\n          }\n        }\n      }\n\n      if (isNearBottom) {\n        const nextAnchor = listItemElements[listLength - 1];\n        if (nextAnchor) {\n          const nextAnchorTop = nextAnchor.getBoundingClientRect().top;\n          const newAnchorTop = currentAnchor?.offsetParent && currentAnchor !== nextAnchor\n            ? currentAnchor.getBoundingClientRect().top\n            : nextAnchorTop;\n          const isMovingDown = (\n            currentAnchor && currentAnchorTop !== undefined && newAnchorTop < currentAnchorTop\n          );\n\n          if (isMovingDown) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchorTop;\n            isUpdated = true;\n            loadMoreBackwards();\n          }\n        }\n      }\n\n      if (!isUpdated) {\n        if (currentAnchor?.offsetParent) {\n          stateRef.current.currentAnchorTop = currentAnchor.getBoundingClientRect().top;\n        } else {\n          const nextAnchor = listItemElements[0];\n\n          if (nextAnchor) {\n            stateRef.current.currentAnchor = nextAnchor;\n            stateRef.current.currentAnchorTop = nextAnchor.getBoundingClientRect().top;\n          }\n        }\n      }\n    }\n\n    if (onScroll) {\n      onScroll(e);\n    }\n  }, [loadMoreBackwards, loadMoreForwards, onScroll, sensitiveArea]);\n\n  return (\n    <div\n      ref={containerRef}\n      className={className}\n      onScroll={handleScroll}\n      teactFastList={!noFastList && !withAbsolutePositioning}\n      onKeyDown={onKeyDown}\n    >\n      {withAbsolutePositioning && items?.length ? (\n        <div\n          teactFastList={!noFastList}\n          style={`position: relative;${IS_ANDROID ? ` height: ${maxHeight}px;` : undefined}`}\n        >\n          {children}\n        </div>\n      ) : children}\n    </div>\n  );\n};\n\nexport default InfiniteScroll;\n","import { RefObject } from 'react';\nimport React, {\n  FC, useEffect, useRef,\n} from '../../lib/teact/teact';\n\nimport { TextPart } from '../common/helpers/renderMessageText';\n\nimport captureKeyboardListeners from '../../util/captureKeyboardListeners';\nimport trapFocus from '../../util/trapFocus';\nimport buildClassName from '../../util/buildClassName';\nimport { dispatchHeavyAnimationEvent } from '../../hooks/useHeavyAnimationCheck';\nimport useShowTransition from '../../hooks/useShowTransition';\nimport useEffectWithPrevDeps from '../../hooks/useEffectWithPrevDeps';\nimport useLang from '../../hooks/useLang';\nimport useHistoryBack from '../../hooks/useHistoryBack';\n\nimport Button from './Button';\nimport Portal from './Portal';\n\nimport './Modal.scss';\n\nconst ANIMATION_DURATION = 200;\n\ntype OwnProps = {\n  title?: string | TextPart[];\n  className?: string;\n  isOpen?: boolean;\n  header?: any;\n  hasCloseButton?: boolean;\n  noBackdrop?: boolean;\n  children: React.ReactNode;\n  onClose: () => void;\n  onCloseAnimationEnd?: () => void;\n  onEnter?: () => void;\n  dialogRef?: RefObject<HTMLDivElement>;\n};\n\ntype StateProps = {\n  shouldSkipHistoryAnimations?: boolean;\n};\n\nconst Modal: FC<OwnProps & StateProps> = ({\n  dialogRef,\n  title,\n  className,\n  isOpen,\n  header,\n  hasCloseButton,\n  noBackdrop,\n  children,\n  onClose,\n  onCloseAnimationEnd,\n  onEnter,\n  shouldSkipHistoryAnimations,\n}) => {\n  const {\n    shouldRender,\n    transitionClassNames,\n  } = useShowTransition(\n    isOpen, onCloseAnimationEnd, shouldSkipHistoryAnimations, undefined, shouldSkipHistoryAnimations,\n  );\n  // eslint-disable-next-line no-null/no-null\n  const modalRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => (isOpen\n    ? captureKeyboardListeners({ onEsc: onClose, onEnter })\n    : undefined), [isOpen, onClose, onEnter]);\n  useEffect(() => (isOpen && modalRef.current ? trapFocus(modalRef.current) : undefined), [isOpen]);\n\n  const { forceClose } = useHistoryBack(isOpen, onClose);\n\n  // For modals that are closed by unmounting without changing `isOpen` to `false`\n  useEffect(() => {\n    return () => {\n      if (isOpen) {\n        forceClose();\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffectWithPrevDeps(([prevIsOpen]) => {\n    document.body.classList.toggle('has-open-dialog', isOpen);\n    if (isOpen || (!isOpen && prevIsOpen !== undefined)) {\n      dispatchHeavyAnimationEvent(ANIMATION_DURATION);\n    }\n\n    return () => {\n      document.body.classList.remove('has-open-dialog');\n    };\n  }, [isOpen]);\n\n  const lang = useLang();\n\n  if (!shouldRender) {\n    return undefined;\n  }\n\n  function renderHeader() {\n    if (header) {\n      return header;\n    }\n\n    if (!title) {\n      return undefined;\n    }\n\n    return (\n      <div className=\"modal-header\">\n        {hasCloseButton && (\n          <Button\n            round\n            color=\"translucent\"\n            size=\"smaller\"\n            ariaLabel={lang('Close')}\n            onClick={onClose}\n          >\n            <i className=\"icon-close\" />\n          </Button>\n        )}\n        <div className=\"modal-title\">{title}</div>\n      </div>\n    );\n  }\n\n  const fullClassName = buildClassName(\n    'Modal',\n    className,\n    transitionClassNames,\n    noBackdrop && 'transparent-backdrop',\n  );\n\n  return (\n    <Portal>\n      <div\n        ref={modalRef}\n        className={fullClassName}\n        tabIndex={-1}\n        role=\"dialog\"\n      >\n        <div className=\"modal-container\">\n          <div className=\"modal-backdrop\" onClick={onClose} />\n          <div className=\"modal-dialog\" ref={dialogRef}>\n            {renderHeader()}\n            <div className=\"modal-content custom-scroll\">\n              {children}\n            </div>\n          </div>\n        </div>\n      </div>\n    </Portal>\n  );\n};\n\nexport default Modal;\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    ) as HTMLElement[];\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n","import {\n  FC, useRef, useLayoutEffect, VirtualElement,\n} from '../../lib/teact/teact';\nimport TeactDOM from '../../lib/teact/teact-dom';\n\ntype OwnProps = {\n  containerId?: string;\n  className?: string;\n  children: React.ReactNode;\n};\n\nconst Portal: FC<OwnProps> = ({ containerId, className, children }) => {\n  const elementRef = useRef<HTMLDivElement>();\n  if (!elementRef.current) {\n    elementRef.current = document.createElement('div');\n  }\n\n  useLayoutEffect(() => {\n    const container = document.querySelector<HTMLDivElement>(containerId || '#portals');\n    if (!container) {\n      return undefined;\n    }\n\n    const element = elementRef.current!;\n    if (className) {\n      element.classList.add(className);\n    }\n\n    container.appendChild(element);\n\n    return () => {\n      TeactDOM.render(undefined, element);\n      container.removeChild(element);\n    };\n  }, [className, containerId]);\n\n  return TeactDOM.render(children as VirtualElement, elementRef.current);\n};\n\nexport default Portal;\n","import usePrevious from './usePrevious';\n\nexport default function useCurrentOrPrev<T extends any>(\n  current: T, shouldSkipUndefined = false, shouldForceCurrent = false,\n): T | undefined {\n  const prev = usePrevious(current, shouldSkipUndefined);\n\n  // eslint-disable-next-line no-null/no-null\n  return shouldForceCurrent || (current !== null && current !== undefined) ? current : prev;\n}\n","import { useCallback, useRef } from '../lib/teact/teact';\nimport { LoadMoreDirection } from '../types';\n\nimport { areSortedArraysEqual } from '../util/iteratees';\nimport useForceUpdate from './useForceUpdate';\nimport usePrevious from './usePrevious';\n\ntype GetMore = (args: { direction: LoadMoreDirection }) => void;\ntype LoadMoreBackwards = (args: { offsetId?: string | number }) => void;\n\nconst DEFAULT_LIST_SLICE = 30;\n\nconst useInfiniteScroll = <ListId extends string | number>(\n  loadMoreBackwards?: LoadMoreBackwards,\n  listIds?: ListId[],\n  isDisabled = false,\n  listSlice = DEFAULT_LIST_SLICE,\n): [ListId[]?, GetMore?] => {\n  const lastParamsRef = useRef<{\n    direction?: LoadMoreDirection;\n    offsetId?: ListId;\n  }>();\n\n  const viewportIdsRef = useRef<ListId[] | undefined>((() => {\n    // Only run once to initialize\n    if (!listIds || lastParamsRef.current) {\n      return undefined;\n    }\n\n    const { newViewportIds } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n    return newViewportIds;\n  })());\n\n  const forceUpdate = useForceUpdate();\n\n  if (isDisabled) {\n    lastParamsRef.current = {};\n  }\n\n  const prevListIds = usePrevious(listIds);\n  const prevIsDisabled = usePrevious(isDisabled);\n  if (listIds && !isDisabled && (listIds !== prevListIds || isDisabled !== prevIsDisabled)) {\n    const { offsetId = listIds[0], direction = LoadMoreDirection.Forwards } = lastParamsRef.current || {};\n    const { newViewportIds } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (!viewportIdsRef.current || !areSortedArraysEqual(viewportIdsRef.current, newViewportIds)) {\n      viewportIdsRef.current = newViewportIds;\n    }\n  }\n\n  const getMore: GetMore = useCallback(({\n    direction,\n    noScroll,\n  }: { direction: LoadMoreDirection; noScroll?: boolean }) => {\n    const viewportIds = viewportIdsRef.current;\n\n    const offsetId = viewportIds\n      ? direction === LoadMoreDirection.Backwards ? viewportIds[viewportIds.length - 1] : viewportIds[0]\n      : undefined;\n\n    if (!listIds) {\n      if (loadMoreBackwards) {\n        loadMoreBackwards({ offsetId });\n      }\n\n      return;\n    }\n\n    if (!noScroll) {\n      lastParamsRef.current = { ...lastParamsRef.current, direction, offsetId };\n    }\n\n    const {\n      newViewportIds, areSomeLocal, areAllLocal,\n    } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (areSomeLocal && !(viewportIds && areSortedArraysEqual(viewportIds, newViewportIds))) {\n      viewportIdsRef.current = newViewportIds;\n      forceUpdate();\n    }\n\n    if (!areAllLocal && loadMoreBackwards) {\n      loadMoreBackwards({ offsetId });\n    }\n  }, [listIds, listSlice, loadMoreBackwards, forceUpdate]);\n\n  return isDisabled ? [listIds] : [viewportIdsRef.current, getMore];\n};\n\nfunction getViewportSlice<ListId extends string | number>(\n  sourceIds: ListId[],\n  direction: LoadMoreDirection,\n  listSlice: number,\n  offsetId?: ListId,\n) {\n  const { length } = sourceIds;\n  const index = offsetId ? sourceIds.indexOf(offsetId) : 0;\n  const isForwards = direction === LoadMoreDirection.Forwards;\n  const indexForDirection = isForwards ? index : (index + 1) || length;\n  const from = Math.max(0, indexForDirection - listSlice);\n  const to = indexForDirection + listSlice - 1;\n  const newViewportIds = sourceIds.slice(Math.max(0, from), to + 1);\n\n  let areSomeLocal;\n  let areAllLocal;\n  switch (direction) {\n    case LoadMoreDirection.Forwards:\n      areSomeLocal = indexForDirection > 0;\n      areAllLocal = from >= 0;\n      break;\n    case LoadMoreDirection.Backwards:\n      areSomeLocal = indexForDirection < length;\n      areAllLocal = to <= length - 1;\n      break;\n  }\n\n  return { newViewportIds, areSomeLocal, areAllLocal };\n}\n\nexport default useInfiniteScroll;\n","import { useEffect } from '../lib/teact/teact';\n\nimport { ApiMediaFormat } from '../api/types';\n\nimport * as mediaLoader from '../util/mediaLoader';\nimport useForceUpdate from './useForceUpdate';\n\nconst useMedia = (\n  mediaHash: string | false | undefined,\n  noLoad = false,\n  mediaFormat = ApiMediaFormat.BlobUrl,\n  cacheBuster?: number,\n  delay?: number | false,\n) => {\n  const mediaData = mediaHash ? mediaLoader.getFromMemory(mediaHash) : undefined;\n  const forceUpdate = useForceUpdate();\n\n  useEffect(() => {\n    if (!noLoad && mediaHash && !mediaData) {\n      const startedAt = Date.now();\n\n      mediaLoader.fetch(mediaHash, mediaFormat).then(() => {\n        const spentTime = Date.now() - startedAt;\n        if (!delay || spentTime >= delay) {\n          forceUpdate();\n        } else {\n          setTimeout(forceUpdate, delay - spentTime);\n        }\n      });\n    }\n  }, [noLoad, mediaHash, mediaData, mediaFormat, cacheBuster, forceUpdate, delay]);\n\n  return mediaData;\n};\n\nexport default useMedia;\n","// Used before applying CSS transition\nexport default function forceReflow(element: HTMLElement) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  element.offsetWidth;\n}\n","import { IS_IOS } from './environment';\nimport forceReflow from './forceReflow';\n\nconst resetScroll = (container: HTMLDivElement, scrollTop?: number) => {\n  if (IS_IOS) {\n    container.style.overflow = 'hidden';\n  }\n\n  if (scrollTop !== undefined) {\n    container.scrollTop = scrollTop;\n  }\n\n  if (IS_IOS) {\n    container.style.overflow = '';\n  }\n};\n\n// Workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=1264266\nexport function patchChromiumScroll(element: HTMLElement) {\n  element.style.display = 'none';\n  forceReflow(element);\n  element.style.display = '';\n}\n\nexport default resetScroll;\n","import { DEBUG } from '../config';\n\nconst safePlay = (mediaEl: HTMLMediaElement) => {\n  mediaEl.play().catch((err) => {\n    if (DEBUG) {\n      // eslint-disable-next-line no-console\n      console.warn(err, mediaEl);\n    }\n  });\n};\n\nexport default safePlay;\n"],"names":["cn","createClassNameBuilder","img","icon","memo","className","size","chat","user","photo","userStatus","text","isSavedMessages","lastSyncTime","onClick","isDeleted","isDeletedUser","isReplies","isChatWithRepliesBot","id","imageHash","getChatAvatarHash","blobUrl","useMedia","ApiMediaFormat","hasBlobUrl","Boolean","transitionClassNames","useShowTransition","undefined","lang","useLang","content","buildClassName","src","alt","decoding","userFullName","getUserFullName","getFirstLetters","title","getChatTitle","isUserId","isOnline","isUserOnline","fullClassName","getUserColorKey","hasImage","handleClick","useCallback","e","senderId","IS_TEST","renderText","isOpen","onClose","onCloseAnimationEnd","header","textParts","confirmLabel","confirmHandler","confirmIsDestructive","isButtonsInOneRow","children","containerRef","useRef","handleSelectWithEnter","index","handleKeyDown","useKeyboardListNavigation","split","map","textPart","ref","onKeyDown","isText","color","DEFAULT_LIST_SELECTOR","DEFAULT_PRELOAD_BACKWARDS","DEFAULT_SENSITIVE_AREA","onLoadMore","onScroll","items","itemSelector","preloadBackwards","sensitiveArea","withAbsolutePositioning","maxHeight","noScrollRestore","noScrollRestoreOnTop","noFastList","cacheBuster","stateRef","loadMoreBackwards","loadMoreForwards","useMemo","debounce","noScroll","direction","LoadMoreDirection","useEffect","length","scrollHeight","clientHeight","current","useLayoutEffect","container","state","newScrollTop","listItemElements","querySelectorAll","currentAnchor","Array","from","includes","scrollTop","getBoundingClientRect","top","currentAnchorTop","nextAnchor","resetScroll","isScrollTopJustUpdated","handleScroll","listLength","offsetHeight","isNearTop","offsetTop","isNearBottom","isUpdated","nextAnchorTop","newAnchorTop","offsetParent","teactFastList","style","IS_ANDROID","dialogRef","hasCloseButton","noBackdrop","onEnter","shouldSkipHistoryAnimations","shouldRender","modalRef","captureKeyboardListeners","onEsc","element","key","preventDefault","stopPropagation","focusableElements","currentFocusedIndex","findIndex","em","isSameNode","document","activeElement","newFocusedIndex","shiftKey","focus","addEventListener","removeEventListener","trapFocus","forceClose","useHistoryBack","useEffectWithPrevDeps","prevIsOpen","body","classList","toggle","dispatchHeavyAnimationEvent","remove","Portal","tabIndex","role","Button","round","ariaLabel","containerId","elementRef","createElement","querySelector","add","appendChild","TeactDOM","removeChild","useCurrentOrPrev","shouldSkipUndefined","shouldForceCurrent","prev","usePrevious","getViewportSlice","sourceIds","listSlice","offsetId","indexOf","indexForDirection","Math","max","to","newViewportIds","slice","areSomeLocal","areAllLocal","listIds","isDisabled","lastParamsRef","viewportIdsRef","forceUpdate","useForceUpdate","prevListIds","prevIsDisabled","areSortedArraysEqual","getMore","viewportIds","mediaHash","noLoad","mediaFormat","delay","mediaData","mediaLoader","startedAt","Date","now","then","spentTime","setTimeout","forceReflow","offsetWidth","patchChromiumScroll","display","IS_IOS","overflow","mediaEl","play","catch","err","DEBUG","console","warn"],"sourceRoot":""}