(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{105:function(e,t,a){"use strict";a.r(t),a.d(t,"Main",(function(){return An}));var s=a(2),n=a(1),c=a(0),r=(a(85),a(37)),o=a(6),i=a(39);Object(s.b)("openChat",(e,t,a)=>{const{id:n,threadId:c=-1,type:l="thread",noPushState:d}=a,b=Object(o.y)(e);return b&&b.chatId===n&&b.threadId===c&&b.type===l||(e=Object(r.n)(e),e={...e,messages:{...e.messages,contentToBeScheduled:void 0},...n!==e.forwardMessages.toChatId&&{forwardMessages:{}}},Object(s.g)(e),d||(void 0!==n?i.a.pushState({type:"chat",chatId:n,threadId:c,messageListType:l}):i.a.back())),Object(r.N)(e,n,c,l)}),Object(s.b)("openChatWithInfo",(e,t,a)=>{Object(s.g)({...e,isChatInfoShown:!0}),i.a.pushState({type:"right",contentKey:Object(o.nb)(e)}),t.openChat(a)}),Object(s.b)("resetChatCreation",e=>({...e,chatCreation:void 0}));var l=a(5),d=a(20),b=a(3);let u;Object(s.b)("setScrollOffset",(e,t,a)=>{const{chatId:s,threadId:n,scrollOffset:c}=a;return Object(r.x)(e,s,n,"scrollOffset",c)}),Object(s.b)("setReplyingToId",(e,t,a)=>{const{messageId:s}=a,n=Object(o.y)(e);if(!n)return;const{chatId:c,threadId:i}=n;return Object(r.x)(e,c,i,"replyingToId",s)}),Object(s.b)("setEditingId",(e,t,a)=>{const{messageId:s}=a,n=Object(o.y)(e);if(!n)return;const{chatId:c,threadId:i,type:l}=n,d="scheduled"===l?"editingScheduledId":"editingId";return Object(r.x)(e,c,i,d,s)}),Object(s.b)("editLastMessage",e=>{const{chatId:t,threadId:a}=Object(o.y)(e)||{};if(!t||!a)return;const s=Object(o.m)(e,t),n=Object(o.Hb)(e,t,a);if(!s||!n)return;const c=Object(b.g)(n,t=>Boolean(s[t]&&Object(o.b)(e,s[t],a).canEdit));return c?Object(r.x)(e,t,a,"editingId",c):void 0}),Object(s.b)("replyToNextMessage",(e,t,a)=>{const{targetIndexDelta:s}=a,{chatId:n,threadId:c}=Object(o.y)(e)||{};if(!n||!c)return;const r=Object(o.m)(e,n),i=Object(o.Hb)(e,n,c);if(!r||!i)return;const d=Object(o.mb)(e,n,c);let b;if(Object(o.X)(e,n,c)&&d){const e=Object.keys(r),t=e.indexOf(d.toString())+s;b=t<=e.length+1&&t>=0?Number(e[t]):void 0}else if(c===l.MAIN_THREAD_ID){const t=Object(o.f)(e,n);b=t&&t.lastMessage?t.lastMessage.id:void 0}else{const t=Object(o.Cb)(e,n,c);b=t?t.lastMessageId:void 0}t.setReplyingToId({messageId:b}),t.focusMessage({chatId:n,threadId:c,messageId:b})}),Object(s.b)("openMediaViewer",(e,t,a)=>{const{chatId:s,threadId:n,messageId:c,avatarOwnerId:r,profilePhotoIndex:o,origin:i}=a;return{...e,mediaViewer:{chatId:s,threadId:n,messageId:c,avatarOwnerId:r,profilePhotoIndex:o,origin:i},forwardMessages:{}}}),Object(s.b)("closeMediaViewer",e=>({...e,mediaViewer:{}})),Object(s.b)("openAudioPlayer",(e,t,a)=>{const{chatId:s,threadId:n,messageId:c}=a;return{...e,audioPlayer:{chatId:s,threadId:n,messageId:c}}}),Object(s.b)("closeAudioPlayer",e=>({...e,audioPlayer:{}})),Object(s.b)("openPollResults",(e,t,a)=>{const{chatId:n,messageId:c,noPushState:r}=a,l=Object(o.W)(e);r||i.a.pushState({type:"right",contentKey:d.l.PollResults}),l?window.setTimeout(()=>{const e=Object(s.e)();Object(s.g)({...e,pollResults:{chatId:n,messageId:c,voters:{}}})},450):n===e.pollResults.chatId&&c===e.pollResults.messageId||Object(s.g)({...e,pollResults:{chatId:n,messageId:c,voters:{}}})}),Object(s.b)("closePollResults",(e,t,a)=>{const{noPushState:n}=a;n||i.a.back(),Object(s.g)({...e,pollResults:{}})}),Object(s.b)("focusLastMessage",(e,t)=>{const a=Object(o.y)(e);if(!a)return;const{chatId:s,threadId:n}=a;let c;if(n===l.MAIN_THREAD_ID){const t=Object(o.f)(e,s);c=t&&t.lastMessage?t.lastMessage.id:void 0}else{const t=Object(o.Cb)(e,s,n);c=t?t.lastMessageId:void 0}c&&t.focusMessage({chatId:s,threadId:n,messageId:c,noHighlight:!0})}),Object(s.b)("focusMessage",(e,t,a)=>{const{chatId:n,threadId:c=l.MAIN_THREAD_ID,messageListType:i="thread",noHighlight:b,groupedId:m,groupedChatId:h}=a;let{messageId:O}=a;if(void 0!==m){const t=Object(o.J)(e,h,m);t&&t.length&&([O]=t)}const j=Object(o.y)(e),g=!j||n!==j.chatId||c!==j.threadId||i!==j.type;u&&(clearTimeout(u),u=void 0),u=window.setTimeout(()=>{let e=Object(s.e)();e=Object(r.P)(e),e=Object(r.O)(e),Object(s.g)(e)},2e3),e=Object(r.P)(e,n,O,b),e=Object(r.O)(e,void 0),g&&(e=Object(r.O)(e,d.b.Static));const p=Object(o.Hb)(e,n,c);if(p&&p.includes(O))return Object(s.g)(e),void t.openChat({id:n,threadId:c});if(g&&(e=Object(r.x)(e,n,c,"viewportIds",void 0)),e=Object(r.x)(e,n,c,"outlyingIds",void 0),p&&!g){const t=O>p[0]?d.b.Down:d.b.Up;e=Object(r.O)(e,t)}Object(s.g)(e),t.openChat({id:n,threadId:c}),t.loadViewportMessages()}),Object(s.b)("openForwardMenu",(e,t,a)=>{const{fromChatId:s,messageIds:n,groupedId:c}=a;let r;return c&&(r=Object(o.ab)(e,s,c)),{...e,forwardMessages:{fromChatId:s,messageIds:r||n,isModalShown:!0}}}),Object(s.b)("exitForwardMode",e=>{Object(s.g)({...e,forwardMessages:{}})}),Object(s.b)("setForwardChatId",(e,t,a)=>{const{id:n}=a;Object(s.g)({...e,forwardMessages:{...e.forwardMessages,toChatId:n,isModalShown:!1}}),t.openChat({id:n}),t.closeMediaViewer(),t.exitMessageSelectMode()}),Object(s.b)("openForwardMenuForSelectedMessages",(e,t)=>{if(!e.selectedMessages)return;const{chatId:a,messageIds:s}=e.selectedMessages;t.openForwardMenu({fromChatId:a,messageIds:s})}),Object(s.b)("enterMessageSelectMode",(e,t,a)=>{const{messageId:s}=a||{},n=Object(o.r)(e);return n?Object(r.m)(e,n.id,s):e}),Object(s.b)("toggleMessageSelection",(e,t,a)=>{const{messageId:s,groupedId:n,childMessageIds:c,withShift:i}=a,l=Object(o.y)(e);if(!l)return;const{chatId:d,threadId:b,type:u}=l;return Object(r.G)(e,d,b,u,s,n,c,i)}),Object(s.b)("exitMessageSelectMode",r.n),Object(s.b)("openPollModal",e=>({...e,isPollModalOpen:!0})),Object(s.b)("closePollModal",e=>({...e,isPollModalOpen:!1}));Object(s.b)("setGlobalSearchQuery",(e,t,a)=>{const{query:s}=a,{chatId:n}=e.globalSearch;return Object(r.R)(e,{globalResults:{},localResults:{},resultsByType:void 0,...s?{fetchingStatus:{chats:!n,messages:!0}}:{fetchingStatus:void 0},query:s})}),Object(s.b)("addRecentlyFoundChatId",(e,t,a)=>{const{id:s}=a,{recentlyFoundChatIds:n}=e.globalSearch;if(!n)return Object(r.R)(e,{recentlyFoundChatIds:[s]});const c=n.filter(e=>e!==s);return c.unshift(s),c.length>10&&c.pop(),Object(r.R)(e,{recentlyFoundChatIds:c})}),Object(s.b)("clearRecentlyFoundChats",e=>Object(r.R)(e,{recentlyFoundChatIds:void 0})),Object(s.b)("setGlobalSearchContent",(e,t,a)=>{const{content:s}=a;return Object(r.S)(e,s)}),Object(s.b)("setGlobalSearchChatId",(e,t,a)=>{const{id:s}=a;return Object(r.R)(e,{chatId:s,query:void 0,resultsByType:void 0})});var m=a(52),h=a(4);Object(s.b)("openLocalTextSearch",e=>{const{chatId:t,threadId:a}=Object(o.y)(e)||{};if(t&&a)return i.a.pushState({type:"right",contentKey:d.l.Search}),Object(r.Y)(e,t,a,!0)}),Object(s.b)("closeLocalTextSearch",(e,t,a)=>{const{noPushState:s}=a,{chatId:n,threadId:c}=Object(o.y)(e)||{};if(n&&c)return s||i.a.back(),e=Object(r.Y)(e,n,c,!1),e=Object(r.t)(e,n,c,void 0)}),Object(s.b)("setLocalTextSearchQuery",(e,t,a)=>{const{chatId:s,threadId:n}=Object(o.y)(e)||{};if(!s||!n)return;const{query:c}=a,i=Object(h.a)(s,n),{query:l}=e.localTextSearch.byChatThreadKey[i]||{};return c!==l&&(e=Object(r.t)(e,s,n,m.a)),e=Object(r.Y)(e,s,n,!0,c)}),Object(s.b)("setLocalMediaSearchType",(e,t,a)=>{const{chatId:s}=Object(o.y)(e)||{};if(!s)return;const{mediaType:n}=a;return Object(r.X)(e,s,n)}),Object(s.b)("setStickerSearchQuery",(e,t,a)=>{const{query:s,noPushState:n}=a,c=e.stickers.search.query;return n||c===s||(void 0!==s&&void 0===c?i.a.pushState({type:"right",contentKey:d.l.StickerSearch}):i.a.back()),{...e,stickers:{...e.stickers,search:{query:s,resultIds:void 0}}}}),Object(s.b)("setGifSearchQuery",(e,t,a)=>{const{query:s,noPushState:n}=a,c=e.gifs.search.query;return n||c===s||(void 0!==s?i.a.pushState({type:"right",contentKey:d.l.GifSearch}):i.a.back()),{...e,gifs:{...e.gifs,search:{query:s,offsetId:void 0,results:void 0}}}}),Object(s.b)("openUserInfo",(e,t,a)=>{const{id:s}=a;t.openChat({id:s})});Object(s.b)("openChat",e=>Object(r.fb)(e,void 0)),Object(s.b)("setSettingOption",(e,t,a)=>Object(r.v)(e,a)),Object(s.b)("setThemeSettings",(e,t,a)=>{const{theme:s,...n}=a;return Object(r.w)(e,s,n)});var O=a(7),j=a(171);Object(s.b)("toggleChatInfo",(e,t,a)=>{const{noPushState:s}=a;return s||(e.isChatInfoShown?i.a.back():i.a.pushState({type:"right",contentKey:Object(o.nb)(e)})),{...e,isChatInfoShown:!e.isChatInfoShown}}),Object(s.b)("toggleManagement",(e,t,a)=>{const{chatId:s}=Object(o.y)(e)||{},{noPushState:n}=a;if(!s)return;const{isActive:c}=e.management.byChatId[s]||{};return n||(c?i.a.back():i.a.pushState({type:"right",contentKey:Object(o.nb)(e)})),{...e,management:{byChatId:{...e.management.byChatId,[s]:{...e.management.byChatId[s],isActive:!c}}}}}),Object(s.b)("closeManagement",e=>{const{chatId:t}=Object(o.y)(e)||{};if(t)return{...e,management:{byChatId:{...e.management.byChatId,[t]:{...e.management.byChatId[t],isActive:!1}}}}}),Object(s.b)("openChat",(e,t,a)=>{if(!O.g)return;const{id:s}=a;return{...e,isLeftColumnShown:void 0===s}}),Object(s.b)("toggleLeftColumn",e=>({...e,isLeftColumnShown:!e.isLeftColumnShown})),Object(s.b)("addRecentEmoji",(e,t,a)=>{const{emoji:s}=a,{recentEmojis:n}=e;if(!n)return{...e,recentEmojis:[s]};const c=n.filter(e=>e!==s);return c.unshift(s),c.length>18&&c.pop(),{...e,recentEmojis:c}}),Object(s.b)("addRecentSticker",(e,t,a)=>{const{sticker:s}=a,{recent:n}=e.stickers;if(!n)return{...e,stickers:{...e.stickers,recent:{hash:0,stickers:[s]}}};const c=n.stickers.filter(e=>e.id!==s.id);return c.unshift(s),{...e,stickers:{...e.stickers,recent:{...n,stickers:c}}}}),Object(s.b)("showNotification",(e,t,a)=>{const s=a,n=[...e.notifications],c=n.findIndex(e=>e.message===s.message);return-1!==c&&n.splice(c,1),n.push(s),{...e,notifications:n}}),Object(s.b)("dismissNotification",e=>{const t=[...e.notifications];return t.pop(),{...e,notifications:t}}),Object(s.b)("showError",(e,t,a)=>{const{error:s}=a;if(!Object(j.a)(s))return e;const n=[...e.errors],c=n.findIndex(e=>e.message===s.message);return-1!==c&&n.splice(c,1),n.push(s),{...e,errors:n}}),Object(s.b)("dismissError",e=>{const t=[...e.errors];return t.pop(),{...e,errors:t}}),Object(s.b)("toggleSafeLinkModal",(e,t,a)=>{const{url:s}=a;return{...e,safeLinkModalUrl:s}}),Object(s.b)("openPaymentModal",(e,t,a)=>{const{messageId:s}=a;return{...e,payment:{...e.payment,messageId:s,isPaymentModalOpen:!0}}}),Object(s.b)("closePaymentModal",e=>{const t=Object(r.h)(e);return Object(r.i)(t)});a(86);var g=a(10),p=a(9);const f=Object(p.g)(e=>e(),1e3,!0),I=Object(p.g)(e=>e(),3e3,!0),v=Object(p.a)(e=>e(),500,!1,!0);async function y(e,t,a){const c=await Object(g.a)("fetchChats",{limit:n.j,offsetDate:a,archived:"archived"===e,withPinned:void 0===Object(s.e)().chats.orderedPinnedIds[e]});if(!c)return;const{chatIds:o}=c;o.length>0&&o[0]===t&&o.shift();let i=Object(s.e)();i=Object(r.f)(i,Object(b.c)(c.users,"id")),i=Object(r.M)(i,Object(b.c)(c.chats,"id")),i=Object(r.I)(i,e,o),i=Object(r.J)(i,e,c),Object.keys(c.draftsById).map(Number).forEach(e=>{i=Object(r.x)(i,e,l.MAIN_THREAD_ID,"draft",c.draftsById[e])}),Object.keys(c.replyingToById).map(Number).forEach(e=>{i=Object(r.x)(i,e,l.MAIN_THREAD_ID,"replyingToId",c.replyingToById[e])}),0!==o.length||i.chats.isFullyLoaded[e]||(i={...i,chats:{...i.chats,isFullyLoaded:{...i.chats.isFullyLoaded,[e]:!0}}}),Object(s.g)(i)}async function C(e){const t=await Object(g.a)("fetchFullChat",e);if(!t)return;const{users:a,fullInfo:n}=t;let c=Object(s.e)();a&&(c=Object(r.f)(c,Object(b.c)(a,"id"))),c=Object(r.H)(c,e.id,{fullInfo:n}),Object(s.g)(c)}async function E(e,t,a){const n=Object(s.e)(),c=Object(o.h)(n,t);if(c&&!c.isMin)return void(a?e.focusMessage({chatId:c.id,messageId:a}):e.openChat({id:c.id}));const i=Object(o.r)(n);e.openChat({id:-1});const l=await Object(g.a)("getChatByUsername",t);if(!l)return i&&e.openChat({id:i.id}),void e.showNotification({message:"User does not exist"});Object(s.g)(Object(r.H)(Object(s.e)(),l.id,l)),a?e.focusMessage({chatId:l.id,messageId:a}):e.openChat({id:l.id})}Object(s.b)("preloadTopChatMessages",(e,t)=>{(async()=>{const a=[];for(let c=0;c<n.Db;c++){await Object(p.e)(100);const{byId:n,listIds:{active:c},orderedPinnedIds:{active:r}}=Object(s.e)().chats;if(!c)return;const{chatId:i}=Object(o.y)(e)||{},{pinnedChats:d,otherChats:b}=Object(h.Ab)(n,c,r),u=[...d,...b].find(({id:e})=>e!==i&&!a.includes(e));if(!u)return;a.push(u.id),t.loadViewportMessages({chatId:u.id,threadId:l.MAIN_THREAD_ID})}})()}),Object(s.b)("openChat",(e,t,a)=>{const{id:s,threadId:n}=a,{currentUserId:c}=e,r=Object(o.f)(e,s);if(r&&r.hasUnreadMark&&t.toggleChatUnread({id:s}),r)Object(h.mb)(r)&&!r.isMin&&t.requestChatUpdate({chatId:s});else if(s===c)Object(g.a)("fetchChat",{type:"self"});else{const t=Object(o.Gb)(e,s);t&&Object(g.a)("fetchChat",{type:"user",user:t})}if(n!==l.MAIN_THREAD_ID){Object(o.Eb)(e,s,n)||t.requestThreadInfoUpdate({chatId:s,threadId:n})}}),Object(s.b)("openSupportChat",(e,t)=>{const a=Object(o.Ab)(e);t.openChat({id:a?a.id:-1}),a||(async()=>{const e=await Object(g.a)("fetchChat",{type:"support"});e&&t.openChat({id:e.chatId})})()}),Object(s.b)("openTipsChat",(e,t)=>{t.openChatByUsername({username:n.Cb})}),Object(s.b)("loadMoreChats",(e,t,a)=>{const{listType:s="active"}=a,n=e.chats.listIds[s];if(e.chats.isFullyLoaded[s])return;const c=n?n.map(t=>e.chats.byId[t]).filter(t=>Boolean(t&&t.lastMessage)&&!Object(o.N)(e,t.id)).sort((e,t)=>e.lastMessage.date-t.lastMessage.date)[0]:void 0;f(c?()=>y(s,c.id,c.lastMessage.date):()=>y(s))}),Object(s.b)("loadFullChat",(e,t,a)=>{const{chatId:s,force:n}=a,c=Object(o.f)(e,s);c&&(n?C(c):v(()=>C(c)))}),Object(s.b)("loadTopChats",()=>{I(()=>y("active"))}),Object(s.b)("requestChatUpdate",(e,t,a)=>{const{chatId:s}=a,n=Object(o.f)(e,s);n&&Object(g.a)("requestChatUpdate",n)}),Object(s.b)("updateChatMutedState",(e,t,a)=>{const{chatId:s,isMuted:n}=a,c=Object(o.f)(e,s);c&&Object(g.a)("updateChatMutedState",{chat:c,isMuted:n})}),Object(s.b)("createChannel",(e,t,a)=>{const{title:n,about:c,photo:i,memberIds:l}=a;!async function(e,t,a,n){Object(s.g)({...Object(s.e)(),chatCreation:{progress:d.a.InProgress}});const c=await Object(g.a)("createChannel",{title:e,about:a,users:t});if(!c)return;const{id:o,accessHash:i}=c;let l=Object(s.e)();l=Object(r.H)(l,o,c),l={...l,chatCreation:{...l.chatCreation,progress:c?d.a.Complete:d.a.Error}},Object(s.g)(l),Object(s.d)().openChat({id:o}),o&&i&&n&&await Object(g.a)("editChatPhoto",{chatId:o,accessHash:i,photo:n})}(n,l.map(t=>Object(o.Gb)(e,t)).filter(Boolean),c,i)}),Object(s.b)("joinChannel",(e,t,a)=>{const{chatId:s}=a,n=Object(o.f)(e,s);if(!n)return;const{id:c,accessHash:r}=n;c&&r&&Object(g.a)("joinChannel",{channelId:c,accessHash:r})}),Object(s.b)("leaveChannel",(e,t,a)=>{(async()=>{const{chatId:s}=a,n=Object(o.f)(e,s);if(!n)return;const{id:c,accessHash:r}=n;c&&r&&await Object(g.a)("leaveChannel",{channelId:c,accessHash:r}),t.openChat({id:void 0})})()}),Object(s.b)("deleteChannel",(e,t,a)=>{(async()=>{const{chatId:s}=a,n=Object(o.f)(e,s);if(!n)return;const{id:c,accessHash:r}=n;c&&r&&await Object(g.a)("deleteChannel",{channelId:c,accessHash:r}),t.openChat({id:void 0})})()}),Object(s.b)("createGroupChat",(e,t,a)=>{const{title:n,memberIds:c,photo:i}=a;!async function(e,t,a){Object(s.g)({...Object(s.e)(),chatCreation:{progress:d.a.InProgress}});const n=await Object(g.a)("createGroupChat",{title:e,users:t});if(!n)return;const{id:c}=n;let o=Object(s.e)();o=Object(r.H)(o,c,n),o={...o,chatCreation:{...o.chatCreation,progress:n?d.a.Complete:d.a.Error}},Object(s.g)(o),Object(s.d)().openChat({id:c}),c&&a&&await Object(g.a)("editChatPhoto",{chatId:c,photo:a})}(n,c.map(t=>Object(o.Gb)(e,t)).filter(Boolean),i)}),Object(s.b)("toggleChatPinned",(e,t,a)=>{const{id:s,folderId:c}=a,r=Object(o.f)(e,s);if(r)if(c){const t=Object(o.i)(e,c);if(t){const a=!Object(o.N)(e,s,c),{pinnedChatIds:n,includedChatIds:r}=t,i=a?[s,...n||[]]:(n||[]).filter(e=>e!==s),l=[s,...r];Object(g.a)("editChatFolder",{id:c,folderUpdate:{...t,pinnedChatIds:i,includedChatIds:l}})}}else{const t=Object(o.j)(e,s),a=Object(o.N)(e,s,"archived"===t?n.h:void 0);Object(g.a)("toggleChatPinned",{chat:r,shouldBePinned:!a})}}),Object(s.b)("toggleChatArchived",(e,t,a)=>{const{id:s}=a,c=Object(o.f)(e,s);c&&Object(g.a)("toggleChatArchived",{chat:c,folderId:Object(h.hb)(c)?0:n.h})}),Object(s.b)("loadChatFolders",()=>{!async function(){const e=await Object(g.a)("fetchChatFolders");if(e){const t=Object(s.e)();Object(s.g)({...t,chatFolders:{...t.chatFolders,...e}})}}()}),Object(s.b)("loadRecommendedChatFolders",()=>{!async function(){const e=await Object(g.a)("fetchRecommendedChatFolders");if(e){const t=Object(s.e)();Object(s.g)({...t,chatFolders:{...t.chatFolders,recommended:e}})}}()}),Object(s.b)("editChatFolder",(e,t,a)=>{const{id:s,folderUpdate:n}=a,c=Object(o.i)(e,s);c&&Object(g.a)("editChatFolder",{id:s,folderUpdate:{id:s,emoticon:c.emoticon,pinnedChatIds:c.pinnedChatIds,...n}})}),Object(s.b)("addChatFolder",(e,t,a)=>{const{folder:c}=a,{orderedIds:r}=e.chatFolders;!async function(e,t){const{id:a,description:n,...c}=e;if(await Object(g.a)("editChatFolder",{id:t+1,folderUpdate:{id:t+1,...c}}),!n)return;const r=Object(s.e)(),{recommended:o}=r.chatFolders;o&&Object(s.g)({...r,chatFolders:{...r.chatFolders,recommended:o.filter(({id:e})=>e!==a)}})}(c,r&&r.length?Math.max.apply(Math.max,r):n.h)}),Object(s.b)("deleteChatFolder",(e,t,a)=>{const{id:s}=a;Object(o.i)(e,s)&&async function(e){await Object(g.a)("deleteChatFolder",e)}(s)}),Object(s.b)("toggleChatUnread",(e,t,a)=>{const{id:s}=a,n=Object(o.f)(e,s);n&&(n.unreadCount?Object(g.a)("markMessageListRead",{chat:n,threadId:l.MAIN_THREAD_ID}):Object(g.a)("toggleDialogUnread",{chat:n,hasUnreadMark:!n.hasUnreadMark}))}),Object(s.b)("openTelegramLink",(e,t,a)=>{const{url:s}=a;let c=n.hb.exec(s);if(c){const e=c[1];(async()=>{const a=await Object(g.a)("openChatByInvite",e);a&&t.openChat({id:a.id})})()}else{c=n.ib.exec(s);const e=c[1],a=c[2]?Number(c[2]):void 0;E(t,e,a)}}),Object(s.b)("openChatByUsername",(e,t,a)=>{const{username:s}=a;E(t,s)}),Object(s.b)("togglePreHistoryHidden",(e,t,a)=>{const{chatId:s,isEnabled:n}=a;let c=Object(o.f)(e,s);c&&(async()=>{if(Object(h.ib)(c)){if(c=await Object(g.a)("migrateChat",c),!c)return;t.openChat({id:c.id})}Object(g.a)("togglePreHistoryHidden",{chat:c,isEnabled:n})})()}),Object(s.b)("updateChatDefaultBannedRights",(e,t,a)=>{const{chatId:s,bannedRights:n}=a,c=Object(o.f)(e,s);c&&Object(g.a)("updateChatDefaultBannedRights",{chat:c,bannedRights:n})}),Object(s.b)("updateChatMemberBannedRights",(e,t,a)=>{const{chatId:n,userId:c,bannedRights:i}=a;let l=Object(o.f)(e,n);const d=Object(o.Gb)(e,c);l&&d&&(async()=>{if(Object(h.ib)(l)){if(l=await Object(g.a)("migrateChat",l),!l)return;t.openChat({id:l.id})}await Object(g.a)("updateChatMemberBannedRights",{chat:l,user:d,bannedRights:i});const e=Object(s.e)(),a=Object(o.f)(e,n);if(!a||!a.fullInfo)return;const{members:b,kickedMembers:u}=a.fullInfo,m=!!i.viewMessages,O=!Object.keys(i).length;Object(s.g)(Object(r.H)(e,n,{fullInfo:{...a.fullInfo,...b&&m&&{members:b.filter(e=>e.userId!==c)},...b&&!m&&{members:b.map(e=>e.userId===c?{...e,bannedRights:i}:e)},...O&&u&&{kickedMembers:u.filter(e=>e.userId!==c)}}}))})()}),Object(s.b)("updateChatAdmin",(e,t,a)=>{const{chatId:n,userId:c,adminRights:i,customTitle:l}=a;let d=Object(o.f)(e,n);const b=Object(o.Gb)(e,c);d&&b&&(async()=>{if(Object(h.ib)(d)){if(d=await Object(g.a)("migrateChat",d),!d)return;t.openChat({id:d.id})}await Object(g.a)("updateChatAdmin",{chat:d,user:b,adminRights:i,customTitle:l});const e=Object(s.e)(),a=Object(o.f)(e,n);if(!a||!a.fullInfo)return;const{adminMembers:u}=a.fullInfo,m=!Object.keys(i).length;Object(s.g)(Object(r.H)(e,n,{fullInfo:{...a.fullInfo,...u&&m&&{adminMembers:u.filter(e=>e.userId!==c)},...u&&!m&&{adminMembers:u.map(e=>e.userId===c?{...e,adminRights:i,customTitle:l}:e)}}}))})()}),Object(s.b)("updateChat",(e,t,a)=>{const{chatId:n,title:c,about:i,photo:l}=a,b=Object(o.f)(e,n);b&&(async()=>{Object(s.g)(Object(r.bb)(Object(s.e)(),d.f.InProgress)),await Promise.all([b.title!==c?Object(g.a)("updateChatTitle",b,c):void 0,b.fullInfo&&b.fullInfo.about!==i?Object(g.a)("updateChatAbout",b,i):void 0,l?Object(g.a)("editChatPhoto",{chatId:n,accessHash:b.accessHash,photo:l}):void 0]),Object(s.g)(Object(r.bb)(Object(s.e)(),d.f.Complete))})()}),Object(s.b)("toggleSignatures",(e,t,a)=>{const{chatId:s,isEnabled:n}=a,c=Object(o.f)(e,s);c&&Object(g.a)("toggleSignatures",{chat:c,isEnabled:n})}),Object(s.b)("loadGroupsForDiscussion",()=>{(async()=>{const e=await Object(g.a)("fetchGroupsForDiscussion");if(!e)return;const t=e.reduce((e,t)=>(t&&(e[t.id]=t),e),{}),a=Object(r.c)(Object(s.e)(),t);Object(s.g)({...a,chats:{...a.chats,forDiscussionIds:Object.keys(t).map(Number)}})})()}),Object(s.b)("linkDiscussionGroup",(e,t,a)=>{const{channelId:s,chatId:n}=a,c=Object(o.f)(e,s);let r=Object(o.f)(e,n);c&&r&&(async()=>{if(Object(h.ib)(r)){if(r=await Object(g.a)("migrateChat",r),!r)return;t.openChat({id:r.id})}let{fullInfo:e}=r;if(!e){const t=await Object(g.a)("fetchFullChat",r);if(!t)return;e=t.fullInfo}e.isPreHistoryHidden&&await Object(g.a)("togglePreHistoryHidden",{chat:r,isEnabled:!1}),Object(g.a)("setDiscussionGroup",{channel:c,chat:r})})()}),Object(s.b)("unlinkDiscussionGroup",(e,t,a)=>{const{channelId:s}=a,n=Object(o.f)(e,s);if(!n)return;let c;n.fullInfo&&n.fullInfo.linkedChatId&&(c=Object(o.f)(e,n.fullInfo.linkedChatId)),(async()=>{await Object(g.a)("setDiscussionGroup",{channel:n}),c&&C(c)})()}),Object(s.b)("setActiveChatFolder",(e,t,a)=>({...e,chatFolders:{...e.chatFolders,activeChatFolder:a}})),Object(s.b)("loadMoreMembers",e=>{(async()=>{const{chatId:t}=Object(o.y)(e)||{},a=t?Object(o.f)(e,t):void 0;if(!a||Object(h.ib)(a))return;const n=a.fullInfo&&a.fullInfo.members&&a.fullInfo.members.length||void 0,c=await Object(g.a)("fetchMembers",a.id,a.accessHash,"recent",n);if(!c)return;const{members:i,users:l}=c;i&&i.length&&(e=Object(s.e)(),e=Object(r.f)(e,Object(b.c)(l,"id")),e=Object(r.H)(e,a.id,{fullInfo:{...a.fullInfo,members:[...(a.fullInfo||{}).members||[],...i||[]]}}),Object(s.g)(e))})()});var w=a(155);const S=new Map,M=Object(p.g)(e=>e(),1e3,!0);async function k(e,t,a,c,i=!1,l=!1){const u=e.id;let m;switch(c){case d.e.Backwards:m=void 0;break;case d.e.Around:m=-(Math.round(n.V/2)+1);break;case d.e.Forwards:m=-(n.V+1)}const h=await Object(g.a)("fetchMessages",{chat:Object(o.Db)(Object(s.e)(),u,t),offsetId:a,addOffset:m,limit:n.V,threadId:t});if(!h)return;const{messages:O,users:j,chats:p,threadInfos:f}=h,I=Object(b.c)(O,"id"),v=Object.keys(I).map(Number);let y=Object(s.e)();y=Object(r.b)(y,u,I),y=i?Object(r.db)(y,u,t,v):Object(r.V)(y,u,t,v),y=Object(r.f)(y,Object(b.c)(j,"id")),y=Object(r.c)(y,Object(b.c)(p,"id")),y=Object(r.lb)(y,u,f);let C=Object(o.Y)(y,u,t);const E=Object(o.gb)(y,u,t);if(i&&C&&E&&Object(b.b)(C,E)&&(y=Object(r.V)(y,u,t,E),C=Object(o.Y)(y,u,t),y=Object(r.x)(y,u,t,"outlyingIds",void 0),i=!1),!l){const e=i?E:C,{newViewportIds:s}=N(e,a,c);y=Object(r.z)(y,u,t,s)}Object(s.g)(y)}function N(e,t,a){const{length:s}=e,c=t?function(e,t){return t<e[0]?0:t>e[e.length-1]?e.length-1:e.findIndex((a,s)=>a===t||a<t&&e[s+1]>t)}(e,t):-1,r=a===d.e.Backwards?c:c+1||s,o=r-n.V,i=r+n.V-1,l=e.slice(Math.max(0,o),i+1);let b,u;switch(a){case d.e.Backwards:b=r>0,u=o>=0;break;case d.e.Forwards:b=r<s,u=i<=s-1;break;case d.e.Around:default:b=l.length>0,u=l.length===n.V}return{newViewportIds:l,areSomeLocal:b,areAllLocal:u}}async function P(e){let t;const a=e.attachment?(e,n)=>{S.has(n)||(t=n,S.set(n,a));const c=Object(s.e)();Object(s.g)({...c,fileUploads:{byMessageLocalId:{...c.fileUploads.byMessageLocalId,[n]:{progress:e}}}})}:void 0;e.replyingTo&&await Object(p.f)();const n=Object(s.e)(),c=Object(o.y)(n);if(!c)return;const{threadId:r}=c;e.replyingTo||r===l.MAIN_THREAD_ID||(e.replyingTo=Object(o.Eb)(n,e.chat.id,r)),await Object(g.a)("sendMessage",e,a),a&&t&&S.delete(t)}Object(s.b)("loadViewportMessages",(e,t,a)=>{const{direction:s=d.e.Around,isBudgetPreload:c=!1}=a||{};let{chatId:i,threadId:l}=a||{};if(!i){const t=Object(o.y)(e);if(!t)return;i=t.chatId,l=t.threadId}const b=Object(o.f)(e,i);if(!b||b.isRestricted)return;const u=Object(o.Hb)(e,i,l),m=Object(o.Y)(e,i,l),h=Object(o.gb)(e,i,l);if(u&&u.length&&s!==d.e.Around){const a=s===d.e.Backwards?u[0]:u[u.length-1],n=Boolean(h),o=n?h:m,{newViewportIds:O,areSomeLocal:j,areAllLocal:g}=N(o,a,s);if(j&&(e=Object(r.z)(e,i,l,O)),async function(e,t,a,s,n,c,r,o){t||await k(n,c,o,r,a,s);s||(await Promise.resolve(),e.loadViewportMessages({chatId:n.id,threadId:c,direction:r,isBudgetPreload:!0}))}(t,g,n,c,b,l,s,a),c)return}else{const t=Object(o.I)(e,i)||Object(o.lb)(e,i,l),a=Boolean(t&&m&&!m.includes(t)),s=(a?h:m)||[],{newViewportIds:u,areSomeLocal:O,areAllLocal:j}=N(s,t,d.e.Around);O&&u.length>=n.V&&(e=Object(r.z)(e,i,l,u)),j||k(b,l,t,d.e.Around,a,c)}return e}),Object(s.b)("loadMessage",(e,t,a)=>{const{chatId:n,messageId:c,replyOriginForId:i}=a,d=Object(o.f)(e,n);d&&async function(e,t,a){const n=await Object(g.a)("fetchMessage",{chat:e,messageId:t});if(!n)return;if(n===l.MESSAGE_DELETED){if(a){let t=Object(s.e)();const n=Object(o.k)(t,e.id,a);t=Object(r.L)(t,e.id,a,{...n,replyToMessageId:void 0}),Object(s.g)(t)}return}let c=Object(s.e)();c=Object(r.L)(c,e.id,t,n.message),c=Object(r.f)(c,Object(b.c)(n.users,"id")),Object(s.g)(c)}(d,c,i)}),Object(s.b)("sendMessage",(e,t,a)=>{const s=Object(o.y)(e);if(!s)return;const{chatId:c,threadId:r,type:i}=s;if("scheduled"===i&&!a.scheduledAt)return{...e,messages:{...e.messages,contentToBeScheduled:a}};const l=Object(o.f)(e,c);t.setReplyingToId({messageId:void 0}),t.clearWebPagePreview({chatId:c,threadId:r,value:!1});const d={...a,chat:l,replyingTo:Object(o.mb)(e,c,r),noWebPage:Object(o.cb)(e,c,r)},u=!a.attachments||a.attachments.length<=1,m=!u&&a.attachments&&a.attachments.length>1;if(u){const{attachments:e,...t}=d;P({...t,attachment:e?e[0]:void 0})}else if(m){const{text:e,entities:t,attachments:a,...s}=d,c=Object(b.n)(a,n.L);for(let a=0;a<c.length;a++){const[n,...r]=c[a],o=`${Date.now()}${a}`;P({...s,text:0===a?e:void 0,entities:0===a?t:void 0,attachment:n,groupedId:r.length>0?o:void 0}),r.forEach(e=>{P({...s,attachment:e,groupedId:o})})}}else{const{text:e,entities:t,attachments:a,replyingTo:s,...n}=d;e&&P({...n,text:e,entities:t,replyingTo:s}),a.forEach(e=>{P({...n,attachment:e})})}}),Object(s.b)("editMessage",(e,t,a)=>{const{text:s,entities:n}=a,c=Object(o.y)(e);if(!c)return;const{chatId:r,threadId:i,type:l}=c,d=Object(o.f)(e,r),b=Object(o.D)(e,r,i,l);d&&b&&(Object(g.a)("editMessage",{chat:d,message:b,text:s,entities:n,noWebPage:Object(o.cb)(e,r,i)}),t.setEditingId({messageId:void 0}))}),Object(s.b)("cancelSendingMessage",(e,t,a)=>{const{chatId:s,messageId:n}=a,c=Object(o.k)(e,s,n),r=c&&S.get(c.previousLocalId||c.id);r&&Object(g.b)(r),t.apiUpdate({"@type":"deleteMessages",ids:[n],chatId:s})}),Object(s.b)("saveDraft",(e,t,a)=>{const{chatId:s,threadId:n,draft:c}=a;if(!c)return;const{text:i,entities:d}=c,b=Object(o.f)(e,s);return n===l.MAIN_THREAD_ID&&Object(g.a)("saveDraft",{chat:b,text:i,entities:d,replyToMsgId:Object(o.mb)(e,s,n)}),Object(r.x)(e,s,n,"draft",c)}),Object(s.b)("clearDraft",(e,t,a)=>{const{chatId:s,threadId:n,localOnly:c}=a;if(!Object(o.B)(e,s,n))return;const i=Object(o.f)(e,s);return c||n!==l.MAIN_THREAD_ID||Object(g.a)("clearDraft",i),Object(r.x)(e,s,n,"draft",void 0)}),Object(s.b)("toggleMessageWebPage",(e,t,a)=>{const{chatId:s,threadId:n,noWebPage:c}=a;return Object(r.x)(e,s,n,"noWebPage",c)}),Object(s.b)("pinMessage",(e,t,a)=>{const s=Object(o.r)(e);if(!s)return;const{messageId:n,isUnpin:c,isOneSide:r,isSilent:i}=a;Object(g.a)("pinMessage",{chat:s,messageId:n,isUnpin:c,isOneSide:r,isSilent:i})}),Object(s.b)("unpinAllMessages",(e,t,a)=>{const n=Object(o.f)(e,a.chatId);n&&async function(e){await Object(g.a)("unpinAllMessages",{chat:e});let t=Object(s.e)();t=Object(r.x)(t,e.id,l.MAIN_THREAD_ID,"pinnedIds",[]),Object(s.g)(t)}(n)}),Object(s.b)("deleteMessages",(e,t,a)=>{const{messageIds:s,shouldDeleteForAll:n}=a,c=Object(o.y)(e);if(!c)return;const{chatId:r,threadId:i}=c,l=Object(o.f)(e,r);Object(g.a)("deleteMessages",{chat:l,messageIds:s,shouldDeleteForAll:n});const d=Object(o.C)(e,r,i);s.includes(d)&&t.setEditingId({messageId:void 0})}),Object(s.b)("deleteScheduledMessages",(e,t,a)=>{const{messageIds:s}=a,n=Object(o.y)(e);if(!n)return;const{chatId:c}=n,r=Object(o.f)(e,c);Object(g.a)("deleteScheduledMessages",{chat:r,messageIds:s});const i=Object(o.E)(e,c);s.includes(i)&&t.setEditingId({messageId:void 0})}),Object(s.b)("deleteHistory",(e,t,a)=>{(async()=>{const{chatId:s,shouldDeleteForAll:n}=a,c=Object(o.f)(e,s);if(!c)return;const r=c.lastMessage&&c.lastMessage.id;await Object(g.a)("deleteHistory",{chat:c,shouldDeleteForAll:n,maxId:r}),t.openChat({id:void 0})})()}),Object(s.b)("markMessageListRead",(e,t,a)=>{const s=Object(o.y)(e);if(!s)return;const{chatId:n,threadId:c}=s,r=Object(o.Db)(e,n,c);if(!r)return;const{maxId:i}=a;M(()=>{Object(g.a)("markMessageListRead",{chat:r,threadId:c,maxId:i})})}),Object(s.b)("markMessagesRead",(e,t,a)=>{const s=Object(o.r)(e);if(!s)return;const{messageIds:n}=a;Object(g.a)("markMessagesRead",{chat:s,messageIds:n})}),Object(s.b)("loadWebPagePreview",(e,t,a)=>{const{text:n}=a;!async function(e){const t=await Object(g.a)("fetchWebPagePreview",{message:e});Object(s.g)({...Object(s.e)(),webPagePreview:t})}(n)}),Object(s.b)("clearWebPagePreview",e=>{if(e.webPagePreview)return{...e,webPagePreview:void 0}}),Object(s.b)("sendPollVote",(e,t,a)=>{const{chatId:s,messageId:n,options:c}=a,r=Object(o.f)(e,s);r&&Object(g.a)("sendPollVote",{chat:r,messageId:n,options:c})}),Object(s.b)("loadPollOptionResults",(e,t,a)=>{const{chat:n,messageId:c,option:o,offset:i,limit:l,shouldResetVoters:d}=a;!async function(e,t,a,n,c,o){const i=await Object(g.a)("loadPollOptionResults",{chat:e,messageId:t,option:a,offset:n,limit:c});if(!i)return;let l=Object(s.e)();l=Object(r.f)(l,Object(b.c)(i.users,"id"));const{voters:d}=l.pollResults;Object(s.g)({...l,pollResults:{...l.pollResults,voters:{...d,[a]:[...!o&&d&&d[a]?d[a]:[],...i&&i.users.map(e=>e.id)].filter((e,t,a)=>a.indexOf(e)===t)},offsets:{...l.pollResults.offsets?l.pollResults.offsets:{},[a]:i.nextOffset||""}}})}(n,c,o,i,l,d)}),Object(s.b)("forwardMessages",e=>{const{fromChatId:t,messageIds:a,toChatId:n}=e.forwardMessages,c=t?Object(o.f)(e,t):void 0,r=n?Object(o.f)(e,n):void 0,i=t&&a?a.sort((e,t)=>e-t).map(a=>Object(o.k)(e,t,a)).filter(Boolean):void 0;c&&r&&i&&i.length&&function(e,t,a){Object(g.a)("forwardMessages",{fromChat:e,toChat:t,messages:a}),Object(s.g)({...Object(s.e)(),forwardMessages:{}})}(c,r,i)}),Object(s.b)("loadScheduledHistory",e=>{const t=Object(o.r)(e);if(!t)return;const{hash:a}=e.scheduledMessages.byChatId[t.id]||{};!async function(e,t){const a=await Object(g.a)("fetchScheduledHistory",{chat:e,hash:t});if(!a)return;const{hash:n,messages:c}=a,o=Object(b.c)(c,"id"),i=Object.keys(o).map(Number).sort((e,t)=>t-e);let d=Object(s.e)();d=Object(r.u)(d,e.id,o,n),d=Object(r.x)(d,e.id,l.MAIN_THREAD_ID,"scheduledIds",i),Object(s.g)(d)}(t,a)}),Object(s.b)("sendScheduledMessages",(e,t,a)=>{const{chatId:s,id:n}=a,c=Object(o.f)(e,s);c&&Object(g.a)("sendScheduledMessages",{chat:c,ids:[n]})}),Object(s.b)("rescheduleMessage",(e,t,a)=>{const{chatId:s,messageId:n,scheduledAt:c}=a,r=Object(o.f)(e,s),i=r&&Object(o.pb)(e,r.id,n);r&&i&&Object(g.a)("rescheduleMessage",{chat:r,message:i,scheduledAt:c})}),Object(s.b)("requestThreadInfoUpdate",(e,t,a)=>{const{chatId:s,threadId:n}=a,c=Object(o.Db)(e,s,n);c&&Object(g.a)("requestThreadInfoUpdate",{chat:c,threadId:n})}),Object(s.b)("loadPinnedMessages",(e,t,a)=>{const{chatId:n}=a,c=Object(o.f)(e,n);c&&async function(e){const t=await Object(g.a)("fetchPinnedMessages",{chat:e});if(!t)return;const{messages:a,chats:n,users:c}=t,o=Object(b.c)(a,"id"),i=Object.keys(o).map(Number).sort((e,t)=>t-e);let d=Object(s.e)();d=Object(r.b)(d,e.id,o),d=Object(r.x)(d,e.id,l.MAIN_THREAD_ID,"pinnedIds",i),d=Object(r.f)(d,Object(b.c)(c,"id")),d=Object(r.c)(d,Object(b.c)(n,"id")),Object(s.g)(d)}(c)}),Object(s.b)("loadMessageLink",(e,t,a)=>{const{messageId:s,chatId:n}=a,c=Object(o.f)(e,n),r=Object(o.k)(e,n,s);c&&r&&(async()=>{const e=await Object(g.a)("fetchMessageLink",{chat:c,message:r});e&&Object(w.c)(e.link)})()});var T=a(53);const A=Object(p.g)(e=>e(),500,!1);async function x(e,t){const a=await Object(g.a)("searchGifs",{query:e,offset:t});a&&Object(s.g)(Object(r.Q)(Object(s.e)(),!t,a.gifs,a.nextOffset))}Object(s.b)("loadStickerSets",e=>{const{hash:t}=e.stickers.added||{};!async function(e=0){const t=await Object(g.a)("fetchStickerSets",{hash:e});if(!t)return;Object(s.g)(Object(r.ib)(Object(s.e)(),"added",t.hash,t.sets))}(t)}),Object(s.b)("loadAddedStickers",(e,t)=>{const{setIds:a}=e.stickers.added;a&&a.length&&(async()=>{for(let e=0;e<a.length;e++)t.loadStickers({stickerSetId:a[e]}),e%50==0&&e>0&&await Object(p.e)(500)})()}),Object(s.b)("loadRecentStickers",e=>{const{hash:t}=e.stickers.recent||{};!async function(e=0){const t=await Object(g.a)("fetchRecentStickers",{hash:e});if(!t)return;const a=Object(s.e)();Object(s.g)({...a,stickers:{...a.stickers,recent:t}})}(t)}),Object(s.b)("loadFavoriteStickers",e=>{const{hash:t}=e.stickers.favorite||{};!async function(e=0){const t=await Object(g.a)("fetchFavoriteStickers",{hash:e});if(!t)return;const a=Object(s.e)();Object(s.g)({...a,stickers:{...a.stickers,favorite:t}})}(t)}),Object(s.b)("loadFeaturedStickers",e=>{const{hash:t}=e.stickers.featured||{};!async function(e=0){const t=await Object(g.a)("fetchFeaturedStickers",{hash:e});if(!t)return;Object(s.g)(Object(r.ib)(Object(s.e)(),"featured",t.hash,t.sets))}(t)}),Object(s.b)("loadStickers",(e,t,a)=>{const{stickerSetId:n}=a;let{stickerSetAccessHash:c}=a;if(!c){const t=Object(o.xb)(e,n);if(!t)return;c=t.accessHash}!async function(e,t){const a=await Object(g.a)("fetchStickers",{stickerSetId:e,accessHash:t});if(!a)return;const{set:n,stickers:c,packs:o}=a;let i=Object(s.e)();i=Object(r.hb)(i,n.id,{...n,stickers:c,packs:o});const l=i.stickers.forEmoji.emoji;l&&o[l]&&(i=Object(r.o)(i));Object(s.g)(i)}(n,c)}),Object(s.b)("loadAnimatedEmojis",()=>{!async function(){const e=await Object(g.a)("fetchAnimatedEmojis");if(!e)return;const{set:t,stickers:a}=e;Object(s.g)(Object(r.q)(Object(s.e)(),{...t,stickers:a}))}()}),Object(s.b)("loadSavedGifs",e=>{const{hash:t}=e.gifs.saved;!async function(e=0){const t=await Object(g.a)("fetchSavedGifs",{hash:e});if(!t)return;const a=Object(s.e)();Object(s.g)({...a,gifs:{...a.gifs,saved:t}})}(t)}),Object(s.b)("faveSticker",(e,t,a)=>{const{sticker:s}=a;s&&Object(g.a)("faveSticker",{sticker:s})}),Object(s.b)("unfaveSticker",(e,t,a)=>{const{sticker:n}=a;n&&function(e){const t=Object(s.e)();Object(s.g)({...t,stickers:{...t.stickers,favorite:{...t.stickers.favorite,stickers:t.stickers.favorite.stickers.filter(({id:t})=>t!==e.id)}}}),Object(g.a)("faveSticker",{sticker:e,unfave:!0})}(n)}),Object(s.b)("toggleStickerSet",(e,t,a)=>{const{stickerSetId:s}=a,n=Object(o.xb)(e,s);if(!n)return;const{accessHash:c,installedDate:r}=n;Object(g.a)(r?"uninstallStickerSet":"installStickerSet",{stickerSetId:s,accessHash:c})}),Object(s.b)("loadEmojiKeywords",(e,t,a)=>{const{language:n}=a;let c=Object(o.F)(e,n);c&&c.isLoading||(Object(s.g)({...e,emojiKeywords:{...e.emojiKeywords,[n]:{...c,isLoading:!0}}}),(async()=>{const t=await Object(g.a)("fetchEmojiKeywords",{language:n,fromVersion:c?c.version:0});e=Object(s.e)(),c=Object(o.F)(e,n),t?Object(s.g)({...e,emojiKeywords:{...e.emojiKeywords,[n]:{isLoading:!1,version:t.version,keywords:{...c&&c.keywords,...t.keywords}}}}):Object(s.g)({...e,emojiKeywords:{...e.emojiKeywords,[n]:{...c,isLoading:!1}}})})())}),Object(s.b)("setStickerSearchQuery",(e,t,a)=>{const{query:n}=a;n&&A(()=>{!async function(e,t=0){const a=await Object(g.a)("searchStickers",{query:e,hash:t});if(!a)return;const n=Object(s.e)(),{setsById:c,added:o}=n.stickers,i=a.sets.map(({id:e})=>e);o.setIds&&o.setIds.forEach(t=>{if(!i.includes(t)){const{title:a}=c[t]||{};a&&Object(T.a)(a,e)&&i.unshift(t)}});Object(s.g)(Object(r.ib)(n,"search",a.hash,a.sets,i))}(n)})}),Object(s.b)("setGifSearchQuery",(e,t,a)=>{const{query:s}=a;"string"==typeof s&&A(()=>{x(s)})}),Object(s.b)("searchMoreGifs",e=>{const{query:t,offset:a}=e.gifs.search;"string"==typeof t&&A(()=>{x(t,a)})}),Object(s.b)("loadStickersForEmoji",(e,t,a)=>{const{emoji:n}=a,{hash:c}=e.stickers.forEmoji;A(()=>{!async function(e,t=0){let a=Object(s.e)();Object(s.g)({...a,stickers:{...a.stickers,forEmoji:{...a.stickers.forEmoji,emoji:e}}});const n=await Object(g.a)("fetchStickersForEmoji",{emoji:e,hash:t});if(a=Object(s.e)(),!n||a.stickers.forEmoji.emoji!==e)return;a=Object(r.jb)(a,e,n.stickers,n.hash),Object(s.g)(a)}(n,c)})}),Object(s.b)("clearStickersForEmoji",e=>({...e,stickers:{...e.stickers,forEmoji:{}}}));var R=a(36);const L=Object(p.g)(e=>e(),500,!1);async function F(e="",t,a,c,i,l){let d;if(c){const s=await Object(g.a)("searchMessagesLocal",{chatOrUser:c,query:e,type:t,limit:n.y,offsetId:a,minDate:l,maxDate:i});if(s){const{messages:e,users:t,totalCount:a,nextOffsetId:n}=s;d={messages:e,users:t,chats:[],totalCount:a,nextRate:n}}}else d=await Object(g.a)("searchMessagesGlobal",{query:e,offsetRate:a,limit:n.y,type:t,maxDate:i,minDate:l});let u=Object(s.e)();const m=Object(o.t)(u);if(!d||""!==e&&e!==m)return void Object(s.g)(Object(r.T)(u,{messages:!1}));const{messages:h,users:O,chats:j,totalCount:p,nextRate:f}=d;j.length&&(u=Object(r.c)(u,Object(b.c)(j,"id"))),O.length&&(u=Object(r.f)(u,Object(b.c)(O,"id"))),h.length&&(u=Object(r.d)(u,h)),u=Object(r.U)(u,h,p,t,f),Object(s.g)(u)}async function D(){const e=await Object(g.a)("fetchChats",{limit:n.j,archived:!0,withPinned:!0});if(!e)return;let t=Object(s.e)();t=Object(r.ob)(t,Object(b.c)(e.users,"id")),t=Object(r.M)(t,Object(b.c)(e.chats,"id")),t=Object(r.r)(t,"archived",e.chatIds),t=Object(r.J)(t,"archived",e),Object(s.g)(t)}async function B(){let e=Object(s.e)();const{recentlyFoundChatIds:t}=e.globalSearch,{userIds:a}=e.contactList||{};if(!(a&&a.length||t&&t.length))return;const n=[...t||[],...a||[]].map(t=>Object(o.Gb)(e,t)).filter(Boolean),c=await Object(g.a)("fetchUsers",{users:n});c&&(e=Object(s.e)(),e=Object(r.ob)(e,Object(b.c)(c,"id")),Object(s.g)(e))}Object(s.b)("setGlobalSearchQuery",(e,t,a)=>{const{chatId:n}=e.globalSearch,{query:c}=a;c&&!n&&L(()=>{!async function(e){const t=await Object(g.a)("searchChats",{query:e});let a=Object(s.e)();const n=Object(o.t)(a);if(!t||!n||e!==n)return void Object(s.g)(Object(r.T)(a,{chats:!1}));const{localChats:c,localUsers:i,globalChats:l,globalUsers:d}=t;(c.length||l.length)&&(a=Object(r.c)(a,Object(b.c)([...c,...l],"id")));(i.length||d.length)&&(a=Object(r.f)(a,Object(b.c)([...i,...d],"id")));a=Object(r.T)(a,{chats:!1}),a=Object(r.R)(a,{localResults:{chatIds:c.map(({id:e})=>e),userIds:i.map(({id:e})=>e)},globalResults:{...a.globalSearch.globalResults,chatIds:d.map(({id:e})=>e),userIds:l.map(({id:e})=>e)}}),Object(s.g)(a)}(c)})}),Object(s.b)("setGlobalSearchDate",(e,t,a)=>{const{date:n}=a,c=n?Object(R.m)(n):n,i=Object(r.R)(e,{date:n,query:"",resultsByType:{...e.globalSearch.resultsByType,text:{totalCount:void 0,foundIds:[],nextOffsetId:0}}});Object(s.g)(i);const{chatId:l}=e.globalSearch;F("","text",void 0,l?Object(o.f)(e,l):void 0,c,n)}),Object(s.b)("searchMessagesGlobal",(e,t,a)=>{const{query:s,resultsByType:n,chatId:c,date:r}=e.globalSearch,i=r?Object(R.m)(r):r,{type:l}=a,{nextOffsetId:d}=n&&n[l]||{};F(s,l,d,c?Object(o.f)(e,c):void 0,i,r)}),Object(s.b)("searchTextMessagesLocal",e=>{const{chatId:t,threadId:a}=Object(o.y)(e)||{},c=t?Object(o.f)(e,t):void 0,i=Object(o.A)(e);if(!c||!i||!a)return;const{query:d,results:u}=i,m=u?u.nextOffsetId:void 0;let h;if(a!==l.MAIN_THREAD_ID){const s=Object(o.Cb)(e,t,a);h=s?s.topMessageId:void 0}!async function(e,t,a,c,i){const l=await Object(g.a)("searchMessagesLocal",{chatOrUser:e,type:"text",query:c,topMessageId:a,limit:n.X,offsetId:i});if(!l)return;const{messages:d,users:u,totalCount:m,nextOffsetId:h}=l,O=Object(b.c)(d,"id"),j=Object.keys(O).map(Number);let p=Object(s.e)();const f=Object(o.A)(p);if(!f||c&&c!==f.query)return;p=Object(r.b)(p,e.id,O),p=Object(r.f)(p,Object(b.c)(u,"id")),p=Object(r.Z)(p,e.id,t,j,m,h),Object(s.g)(p)}(c,a,h,d,m)}),Object(s.b)("searchMediaMessagesLocal",e=>{const t=Object(o.w)(e),a=t?e.users.byId[t]||e.chats.byId[t]:void 0,c=Object(o.v)(e);if(!a||!c)return;const{currentType:i,resultsByType:l}=c,d=i&&l&&l[i],u=d?d.nextOffsetId:void 0;i&&async function(e,t,a){const c=await Object(g.a)("searchMessagesLocal",{chatOrUser:e,type:t,limit:n.ob,offsetId:a});if(!c)return;const{messages:i,users:l,totalCount:d,nextOffsetId:u}=c,m=Object(b.c)(i,"id"),h=Object.keys(m).map(Number);let O=Object(s.e)();if(!Object(o.v)(O))return;O=Object(r.b)(O,e.id,m),O=Object(r.f)(O,Object(b.c)(l,"id")),O=Object(r.W)(O,e.id,t,h,d,u),Object(s.g)(O)}(a,i,u)}),Object(s.b)("searchMessagesByDate",(e,t,a)=>{const{timestamp:n}=a,{chatId:c}=Object(o.y)(e)||{};if(!c)return;const r=Object(o.f)(e,c);r&&async function(e,t){const a=await Object(g.a)("findFirstMessageIdAfterDate",{chat:e,timestamp:t});if(!a)return;Object(s.d)().focusMessage({chatId:e.id,messageId:a})}(r,n)}),Object(s.b)("checkPublicLink",(e,t,a)=>{const{chatId:n}=Object(o.y)(e)||{};if(!n)return;if(e.management.progress===d.f.InProgress)return;const{username:c}=a;(async()=>{e=Object(r.bb)(e,d.f.InProgress),e=Object(r.ab)(e,n,{isUsernameAvailable:void 0}),Object(s.g)(e);const t=await Object(g.a)("checkChatUsername",{username:c});e=Object(s.e)(),e=Object(r.bb)(e,t?d.f.Complete:d.f.Error),e=Object(r.ab)(e,n,{isUsernameAvailable:t}),Object(s.g)(e)})()}),Object(s.b)("updatePublicLink",(e,t,a)=>{const{chatId:n}=Object(o.y)(e)||{};let c=n&&Object(o.f)(e,n);if(!n||!c)return;const{username:i}=a;(async()=>{if(e=Object(r.bb)(e,d.f.InProgress),Object(s.g)(e),Object(h.ib)(c)){if(c=await Object(g.a)("migrateChat",c),!c)return;t.openChat({id:c.id})}const a=await Object(g.a)("setChatUsername",{chat:c,username:i});e=Object(s.e)(),e=Object(r.bb)(e,a?d.f.Complete:d.f.Error),e=Object(r.ab)(e,n,{isUsernameAvailable:void 0}),Object(s.g)(e)})()}),Object(s.b)("updatePrivateLink",e=>{const{chatId:t}=Object(o.y)(e)||{},a=t&&Object(o.f)(e,t);t&&a&&Object(g.a)("updatePrivateLink",{chat:a})}),Object(s.b)("sync",(e,t)=>{!async function(e){n.p&&console.log(">>> START SYNC");await Object(g.a)("fetchCurrentUser");const t=await async function(){const e=await Object(g.a)("fetchChats",{limit:n.j,withPinned:!0});if(!e)return;let t=Object(s.e)();const{recentlyFoundChatIds:a}=t.globalSearch,{userIds:c}=t.contactList||{},{currentUserId:i}=t,d=[...a||[],...c||[],...i?[i]:[]],u=d.map(e=>Object(o.Gb)(t,e)).filter(Boolean),m=d.map(e=>Object(o.f)(t,e)).filter(Boolean),{chatId:O}=Object(o.y)(t)||{};if(O){const e=Object(o.f)(t,O);if(e&&!d.includes(O)&&m.push(e),Object(h.lb)(O)){const e=Object(o.Gb)(t,O);e&&!d.includes(O)&&u.push(e)}}u.push(...e.users),m.push(...e.chats),t=Object(r.s)(t,Object(b.c)(m,"id")),t=Object(r.r)(t,"active",e.chatIds),t={...t,chats:{...t.chats}},t=Object(r.J)(t,"active",e),Object.keys(e.draftsById).map(Number).forEach(a=>{t=Object(r.x)(t,a,l.MAIN_THREAD_ID,"draft",e.draftsById[a])}),Object.keys(e.replyingToById).map(Number).forEach(a=>{t=Object(r.x)(t,a,l.MAIN_THREAD_ID,"replyingToId",e.replyingToById[a])}),Object(s.g)(t),O&&!t.chats.byId[O]&&Object(s.d)().openChat({id:void 0});return u}();await async function(e){let t=!1,a=e||[],c=Object(s.e)();const{chatId:i}=Object(o.y)(c)||{},d=Object.keys(c.messages.byChatId).map(Number).reduce((e,t)=>{const a=Object(o.B)(c,t,l.MAIN_THREAD_ID);return a?{...e,[t]:a}:e},{});if(i){const e=await(u=c.chats.byId[i],Object(g.a)("fetchMessages",{chat:u,threadId:l.MAIN_THREAD_ID,offsetId:u.lastReadInboxMessageId,addOffset:-(Math.round(n.V/2)+1),limit:n.V}));c=Object(s.e)();const{chatId:d}=Object(o.y)(c)||{};if(e&&d===i){const s=c.messages.byChatId[i],n=Object(b.c)(e.messages,"id"),o=Object.keys(n).map(Number);c={...c,messages:{...c.messages,byChatId:{[i]:{byId:n,threadsById:{[l.MAIN_THREAD_ID]:{...s&&s.threadsById[l.MAIN_THREAD_ID],listedIds:o,viewportIds:o,outlyingIds:void 0}}}}}},c=Object(r.M)(c,Object(b.c)(e.chats,"id")),c=Object(r.lb)(c,i,e.threadInfos),t=!0,a=Array.prototype.concat(a,e.users)}}var u;t||(c={...c,messages:{...c.messages,byChatId:{}}});Object.keys(d).map(Number).forEach(e=>{c=Object(r.x)(c,e,l.MAIN_THREAD_ID,"draft",d[e])}),e?c=Object(r.y)(c,Object(b.c)(a,"id")):a&&(c=Object(r.ob)(c,Object(b.c)(a,"id")));Object(s.g)(c);const{chatId:m,messageId:h}=c.audioPlayer;m&&h&&!Object(o.k)(c,m,h)&&Object(s.d)().closeAudioPlayer()}(t),Object(s.g)({...Object(s.e)(),lastSyncTime:Date.now()}),n.p&&console.log(">>> FINISH SYNC");e()}(t.afterSync)}),Object(s.b)("afterSync",(e,t)=>{!async function(e){n.p&&console.log(">>> START AFTER-SYNC");e.loadFavoriteStickers(),await Promise.all([B(),D()]),await Object(g.a)("fetchCurrentUser"),n.p&&console.log(">>> FINISH AFTER-SYNC")}(t)});const U=Object(p.a)(e=>e(),500,!1,!0);function H(e,{visibility:t,allowedIds:a,deniedIds:s}){const{users:{byId:n},chats:{byId:c}}=e,r={visibility:t};let o,i;const l=e=>{if(!Object(h.lb)(e))return;const{id:t,accessHash:a}=n[e]||{};return t?{id:t,accessHash:a}:void 0},d=e=>{if(Object(h.lb)(e))return;const t=c[e];return t?{id:t.id}:void 0};return"contacts"!==t&&"nobody"!==t||(o=a.map(l).filter(Boolean),i=a.map(d).filter(Boolean),o.length>0&&(r.allowedUsers=o),i.length>0&&(r.allowedChats=i)),"everybody"!==t&&"contacts"!==t||(o=s.map(l).filter(Boolean),i=s.map(d).filter(Boolean),o.length>0&&(r.blockedUsers=o),i.length>0&&(r.blockedChats=i)),r}Object(s.b)("loadFullUser",(e,t,a)=>{const{userId:s}=a,n=Object(o.Gb)(e,s);if(!n)return;const{id:c,accessHash:r}=n;U(()=>Object(g.a)("fetchFullUser",{id:c,accessHash:r}))}),Object(s.b)("loadUser",(e,t,a)=>{const{userId:n}=a,c=Object(o.Gb)(e,n);c&&(async()=>{const t=await Object(g.a)("fetchUsers",{users:[c]});t&&(e=Object(s.e)(),e=Object(r.ob)(e,Object(b.c)(t,"id")),Object(s.g)(e))})()}),Object(s.b)("loadTopUsers",e=>{const{hash:t,lastRequestedAt:a}=e.topPeers;(!a||Date.now()-a>6e4)&&async function(e){const t=await Object(g.a)("fetchTopUsers",{hash:e});if(!t)return;const{hash:a,ids:n,users:c}=t;let o=Object(s.e)();o=Object(r.f)(o,Object(b.c)(c,"id")),o={...o,topPeers:{...o.topPeers,hash:a,userIds:n,lastRequestedAt:Date.now()}},Object(s.g)(o)}(t)}),Object(s.b)("loadContactList",e=>{const{hash:t}=e.contactList||{};!async function(e){const t=await Object(g.a)("fetchContactList",{hash:e});if(!t)return;let a=Object(r.f)(Object(s.e)(),Object(b.c)(t.users,"id"));a=Object(r.c)(a,Object(b.c)(t.chats,"id"));const n=e=>e.lastName||e.firstName||"",c=new Intl.Collator("en-US"),o=t.users.sort((e,t)=>c.compare(n(e),n(t))).filter(e=>!e.isSelf);Object(s.g)({...a,contactList:{hash:t.hash,userIds:o.map(e=>e.id)}})}(t)}),Object(s.b)("loadCurrentUser",()=>{Object(g.a)("fetchCurrentUser")}),Object(s.b)("updateContact",(e,t,a)=>{const{userId:n,isMuted:c,firstName:i,lastName:l}=a;!async function(e,t,a,n){const c=Object(s.e)(),i=Object(o.Gb)(c,e);if(!i)return;Object(s.d)().updateChatMutedState({chatId:e,isMuted:t}),Object(s.g)(Object(r.bb)(Object(s.e)(),d.f.InProgress));await Object(g.a)("updateContact",{phone:i.phoneNumber,firstName:a,lastName:n})&&Object(s.g)(Object(r.nb)(Object(s.e)(),i.id,{firstName:a,lastName:n}));Object(s.g)(Object(r.bb)(Object(s.e)(),d.f.Complete))}(n,c,i,l)}),Object(s.b)("deleteUser",(e,t,a)=>{const{userId:n}=a;!async function(e){const t=Object(s.e)(),a=Object(o.Gb)(t,e);if(!a)return;const{id:n,accessHash:c}=a;await Object(g.a)("deleteUser",{id:n,accessHash:c})}(n)}),Object(s.b)("loadProfilePhotos",(e,t,a)=>{const{profileId:n}=a,c=Object(h.lb)(n),i=c?Object(o.Gb)(e,n):void 0,l=c?void 0:Object(o.f)(e,n);(async()=>{const e=await Object(g.a)("fetchProfilePhotos",i,l);if(!e||!e.photos)return;let t=Object(s.e)();c?t=Object(r.nb)(t,n,{photos:e.photos}):(t=Object(r.f)(t,Object(b.c)(e.users,"id")),t=Object(r.H)(t,n,{photos:e.photos})),Object(s.g)(t)})()}),Object(s.b)("clickInlineButton",(e,t,a)=>{const{button:c}=a;switch(c.type){case"command":t.sendBotCommand({command:c.value});break;case"url":c.value.match(n.hb)||c.value.match(n.ib)?t.openTelegramLink({url:c.value}):t.toggleSafeLinkModal({url:c.value});break;case"callback":{const t=Object(o.r)(e);if(!t)return;!async function(e,t,a){const n=await Object(g.a)("answerCallbackButton",{chatId:e.id,accessHash:e.accessHash,messageId:t,data:a});if(!n||!n.message)return;const{message:c,alert:r}=n;r?Object(s.d)().showError({error:{message:c}}):Object(s.d)().showNotification({message:c})}(t,c.messageId,c.value);break}case"requestPoll":t.openPollModal();break;case"buy":{const a=Object(o.r)(e),{messageId:s,value:n}=c;if(!a)return;n?t.getReceipt({receiptMessageId:n,chatId:a.id,messageId:s}):(t.getPaymentForm({messageId:s}),t.setInvoiceMessageInfo(Object(o.k)(e,a.id,s)),t.openPaymentModal({messageId:s}));break}}}),Object(s.b)("sendBotCommand",(e,t,a)=>{const{command:s}=a,{currentUserId:n}=e,c=Object(o.r)(e);n&&c&&async function(e,t,a){await Object(g.a)("sendMessage",{chat:e,text:a})}(c,0,s)}),Object(s.b)("updateProfile",(e,t,a)=>{const{photo:n,firstName:c,lastName:i,bio:l,username:b}=a;(async()=>{const{currentUserId:t}=e;if(t){if(Object(s.g)({...Object(s.e)(),profileEdit:{progress:d.j.InProgress}}),n&&await Object(g.a)("updateProfilePhoto",n),c||i||l){if(await Object(g.a)("updateProfile",{firstName:c,lastName:i,about:l})){e=Object(s.e)();const a=t&&Object(o.Gb)(e,t);a&&Object(s.g)(Object(r.nb)(e,a.id,{firstName:c,lastName:i,fullInfo:{...a.fullInfo,bio:l}}))}}if(b){await Object(g.a)("updateUsername",b)&&t&&Object(s.g)(Object(r.nb)(Object(s.e)(),t,{username:b}))}Object(s.g)({...Object(s.e)(),profileEdit:{progress:d.j.Complete}})}})()}),Object(s.b)("checkUsername",(e,t,a)=>{const{username:n}=a;(async()=>{if(e.profileEdit&&e.profileEdit.progress===d.j.InProgress)return;Object(s.g)({...e,profileEdit:{progress:e.profileEdit?e.profileEdit.progress:d.j.Idle,isUsernameAvailable:void 0}});const t=await Object(g.a)("checkUsername",n);e=Object(s.e)(),Object(s.g)({...e,profileEdit:{...e.profileEdit,isUsernameAvailable:t}})})()}),Object(s.b)("loadWallpapers",()=>{(async()=>{const e=await Object(g.a)("fetchWallpapers",0);if(!e)return;const t=Object(s.e)();Object(s.g)({...t,settings:{...t.settings,loadedWallpapers:e.wallpapers}})})()}),Object(s.b)("uploadWallpaper",(e,t,a)=>{const n=a,c=URL.createObjectURL(n);Object(s.g)({...e,settings:{...e.settings,loadedWallpapers:[{slug:d.n,document:{fileName:"",size:n.size,mimeType:n.type,previewBlobUrl:c}},...e.settings.loadedWallpapers||[]]}}),(async()=>{const t=await Object(g.a)("uploadWallpaper",n);if(!t)return;const{wallpaper:a}=t;if(!(e=Object(s.e)()).settings.loadedWallpapers)return;const r=e.settings.loadedWallpapers[0];if(!r||r.slug!==d.n)return;const o={...a,document:{...a.document,previewBlobUrl:c}};Object(s.g)({...e,settings:{...e.settings,loadedWallpapers:[o,...e.settings.loadedWallpapers.slice(1)]}})})()}),Object(s.b)("loadBlockedContacts",()=>{(async()=>{const e=await Object(g.a)("fetchBlockedContacts");if(!e)return;let t=Object(s.e)();e.users&&e.users.length&&(t=Object(r.f)(t,Object(b.c)(e.users,"id"))),e.chats&&e.chats.length&&(t=Object(r.M)(t,Object(b.c)(e.chats,"id"))),t={...t,blocked:{...t.blocked,ids:[...t.blocked.ids||[],...e.blockedIds],totalCount:e.totalCount}},Object(s.g)(t)})()}),Object(s.b)("blockContact",(e,t,a)=>{const{contactId:n}=a;(async()=>{if(!await Object(g.a)("blockContact",n))return;const e=Object(s.e)();Object(s.g)(Object(r.a)(e,n))})()}),Object(s.b)("unblockContact",(e,t,a)=>{const{contactId:n}=a;let c;if(Object(h.lb)(n)){const t=Object(o.Gb)(e,n);if(!t)return;c=t.accessHash}(async()=>{if(!await Object(g.a)("unblockContact",n,c))return;const e=Object(s.e)();Object(s.g)(Object(r.p)(e,n))})()}),Object(s.b)("loadAuthorizations",()=>{(async()=>{const e=await Object(g.a)("fetchAuthorizations");e&&Object(s.g)({...Object(s.e)(),activeSessions:e})})()}),Object(s.b)("terminateAuthorization",(e,t,a)=>{const{hash:n}=a;(async()=>{if(!await Object(g.a)("terminateAuthorization",n))return;const e=Object(s.e)();Object(s.g)({...e,activeSessions:e.activeSessions.filter(e=>e.hash!==n)})})()}),Object(s.b)("terminateAllAuthorizations",()=>{(async()=>{if(!await Object(g.a)("terminateAllAuthorizations"))return;const e=Object(s.e)();Object(s.g)({...e,activeSessions:e.activeSessions.filter(e=>e.isCurrent)})})()}),Object(s.b)("loadNotificationExceptions",()=>{Object(g.a)("fetchNotificationExceptions")}),Object(s.b)("loadNotificationSettings",()=>{(async()=>{const e=await Object(g.a)("fetchNotificationSettings");e&&Object(s.g)(Object(r.v)(Object(s.e)(),e))})()}),Object(s.b)("updateNotificationSettings",(e,t,a)=>{const{peerType:n,isSilent:c,shouldShowPreviews:o}=a;(async()=>{await Object(g.a)("updateNotificationSettings",n,{isSilent:c,shouldShowPreviews:o})&&Object(s.g)(Object(r.cb)(Object(s.e)(),n,c,o))})()}),Object(s.b)("updateContactSignUpNotification",(e,t,a)=>{const{isSilent:n}=a;(async()=>{await Object(g.a)("updateContactSignUpNotification",n)&&Object(s.g)(Object(r.v)(Object(s.e)(),{hasContactJoinedNotifications:!n}))})()}),Object(s.b)("loadLanguages",()=>{(async()=>{const e=await Object(g.a)("fetchLanguages");e&&Object(s.g)(Object(r.v)(Object(s.e)(),{languages:e}))})()}),Object(s.b)("loadPrivacySettings",()=>{(async()=>{const[e,t,a,n,c]=await Promise.all([Object(g.a)("fetchPrivacySettings","phoneNumber"),Object(g.a)("fetchPrivacySettings","lastSeen"),Object(g.a)("fetchPrivacySettings","profilePhoto"),Object(g.a)("fetchPrivacySettings","forwards"),Object(g.a)("fetchPrivacySettings","chatInvite")]);if(!(e&&t&&a&&n&&c))return;const r=Object(s.e)();r.settings.privacy.phoneNumber=e,r.settings.privacy.lastSeen=t,r.settings.privacy.profilePhoto=a,r.settings.privacy.forwards=n,r.settings.privacy.chatInvite=c,Object(s.g)(r)})()}),Object(s.b)("setPrivacyVisibility",(e,t,a)=>{const{privacyKey:n,visibility:c}=a,{privacy:{[n]:r}}=e.settings;if(!r)return;const o=H(e,{visibility:c,allowedIds:[...r.allowUserIds,...r.allowChatIds],deniedIds:[...r.blockUserIds,...r.blockChatIds]});(async()=>{const e=await Object(g.a)("setPrivacySettings",n,o);if(e){const t=Object(s.e)();t.settings.privacy[n]=e,Object(s.g)(t)}})()}),Object(s.b)("setPrivacySettings",(e,t,a)=>{const{privacyKey:n,isAllowList:c,contactsIds:r}=a,{privacy:{[n]:o}}=e.settings;if(!o)return;const i=H(e,{visibility:o.visibility,allowedIds:c?r:[...o.allowUserIds,...o.allowChatIds],deniedIds:c?[...o.blockUserIds,...o.blockChatIds]:r});(async()=>{const e=await Object(g.a)("setPrivacySettings",n,i);if(e){const t=Object(s.e)();t.settings.privacy[n]=e,Object(s.g)(t)}})()}),Object(s.b)("loadPasswordInfo",()=>{(async()=>{const e=await Object(g.a)("getPasswordInfo");if(!e)return;let t=Object(s.e)();t=Object(r.v)(t,{hasPassword:e.hasPassword}),t=Object(r.mb)(t,{hint:e.hint}),Object(s.g)(t)})()}),Object(s.b)("checkPassword",(e,t,a)=>{const{currentPassword:n,onSuccess:c}=a;Object(s.g)(Object(r.mb)(e,{isLoading:!0,error:void 0})),(async()=>{const e=await Object(g.a)("checkPassword",n);Object(s.g)(Object(r.mb)(Object(s.e)(),{isLoading:!1})),e&&c()})()}),Object(s.b)("clearPassword",(e,t,a)=>{const{currentPassword:n,onSuccess:c}=a;Object(s.g)(Object(r.mb)(e,{isLoading:!0,error:void 0})),(async()=>{const e=await Object(g.a)("clearPassword",n);Object(s.g)(Object(r.mb)(Object(s.e)(),{isLoading:!1})),e&&c()})()}),Object(s.b)("updatePassword",(e,t,a)=>{const{currentPassword:n,password:c,hint:o,email:i,onSuccess:l}=a;Object(s.g)(Object(r.mb)(e,{isLoading:!0,error:void 0})),(async()=>{const e=await Object(g.a)("updatePassword",n,c,o,i);Object(s.g)(Object(r.mb)(Object(s.e)(),{isLoading:!1})),e&&l()})()}),Object(s.b)("updateRecoveryEmail",(e,t,a)=>{const{currentPassword:n,email:c,onSuccess:o}=a;Object(s.g)(Object(r.mb)(e,{isLoading:!0,error:void 0})),(async()=>{const e=await Object(g.a)("updateRecoveryEmail",n,c);Object(s.g)(Object(r.mb)(Object(s.e)(),{isLoading:!1,waitingEmailCodeLength:void 0})),e&&o()})()}),Object(s.b)("provideTwoFaEmailCode",(e,t,a)=>{const{code:s}=a;Object(g.a)("provideRecoveryEmailCode",s)}),Object(s.b)("clearTwoFaError",e=>Object(r.mb)(e,{error:void 0}));var G=a(61);Object(s.b)("validateRequestedInfo",(e,t,a)=>{const{requestInfo:n,saveInfo:c}=a,i=Object(o.hb)(e);i&&async function(e,t,a){const n=await Object(g.a)("validateRequestedInfo",{messageId:e,requestInfo:t,shouldSave:a});if(!n)return;const{id:c,shippingOptions:o}=n;if(!c)return;let i=Object(r.E)(Object(s.e)(),c);o?(i=Object(r.gb)(i,o),i=Object(r.C)(i,d.i.Shipping)):i=Object(r.C)(i,d.i.PaymentInfo);Object(s.g)(i)}(i,n,c)}),Object(s.b)("getPaymentForm",(e,t,a)=>{const{messageId:n}=a;n&&async function(e){const t=await Object(g.a)("getPaymentForm",{messageId:e});if(!t)return;let a=Object(r.B)(Object(s.e)(),t),n=d.i.PaymentInfo;a.payment.invoice&&(a.payment.invoice.shippingAddressRequested||a.payment.invoice.nameRequested||a.payment.invoice.phoneRequested||a.payment.invoice.emailRequested)&&(n=d.i.ShippingInfo);a=Object(r.C)(a,n),Object(s.g)(a)}(n)}),Object(s.b)("getReceipt",(e,t,a)=>{const{receiptMessageId:n,chatId:c,messageId:i}=a;i&&n&&c&&async function(e,t,a){const n=await Object(g.a)("getReceipt",t);if(!n)return;let c=Object(s.e)();const i=Object(o.k)(c,a,e);c=Object(r.D)(c,n,i),Object(s.g)(c)}(i,n,c)}),Object(s.b)("clearPaymentError",e=>{Object(s.g)({...e,payment:{...e.payment,error:void 0}})}),Object(s.b)("clearReceipt",e=>{Object(s.g)({...e,payment:{...e.payment,receipt:void 0}})}),Object(s.b)("sendCredentialsInfo",(e,t,a)=>{const n=Object(o.kb)(e);if(!n)return;const{credentials:c}=a,{data:i}=c;!async function(e,t){const a=function(e){const t=Object.keys(e).map(t=>`${t}=${e[t]}`).join("&");return t.length>0?"?"+t:""}({"card[number]":e.cardNumber,"card[exp_month]":e.expiryMonth,"card[exp_year]":e.expiryYear,"card[cvc]":e.cvv,"card[address_zip]":e.zip,"card[address_country]":e.country}),n=await fetch("https://api.stripe.com/v1/tokens"+a,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+t}}),c=await n.json();if(c.error){const e=Object(G.b)(c.error),t=Object(s.e)();return void Object(s.g)({...t,payment:{...t.payment,error:{...e}}})}let o=Object(r.F)(Object(s.e)(),{type:c.type,id:c.id});o=Object(r.C)(o,d.i.Checkout),Object(s.g)(o)}(i,n)}),Object(s.b)("sendPaymentForm",(e,t,a)=>{const{shippingOptionId:n,saveCredentials:c}=a,i=Object(o.hb)(e),l=Object(o.ib)(e),d=Object(o.kb)(e),b=Object(o.zb)(e);i&&d&&async function(e,t,a,n){if(await Object(g.a)("sendPaymentForm",{messageId:e,credentials:t,requestedInfoId:a,shippingOptionId:n})){const e=Object(r.h)(Object(s.e)());Object(s.g)(Object(r.i)(e))}}(i,{save:c,data:b},l,n)}),Object(s.b)("setPaymentStep",(e,t,a={})=>Object(r.C)(e,a.step||d.i.ShippingInfo)),Object(s.b)("setInvoiceMessageInfo",(e,t,a)=>Object(r.A)(e,a));a(88);var q=a(29),_=a(79);const V=Object(p.g)(e=>e(),1e3,!0);Object(s.b)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"updateChat":{a.noTopChatsRequest||Object(o.M)(e,a.id)||t.loadTopChats();const n=Object(r.H)(e,a.id,a.chat,a.newProfilePhoto);Object(s.g)(n);const c=Object(o.q)(n);V(()=>Object(_.a)(c));break}case"updateChatJoin":{const n=Object(o.j)(e,a.id);if(!n)break;e=Object(r.I)(e,n,[a.id]),e=Object(r.H)(e,a.id,{isNotJoined:!1}),Object(s.g)(e);const c=Object(o.f)(e,a.id);c&&t.requestChatUpdate({chatId:c.id});break}case"updateChatLeave":{const t=Object(o.j)(e,a.id);if(!t)break;const{[t]:n}=e.chats.listIds;n&&(e=Object(r.r)(e,t,n.filter(e=>e!==a.id))),e=Object(r.H)(e,a.id,{isNotJoined:!0}),Object(s.g)(e);break}case"updateChatInbox":Object(s.g)(Object(r.H)(e,a.id,a.chat));break;case"updateChatTypingStatus":{const{id:t,typingStatus:n}=a;Object(s.g)(Object(r.H)(e,t,{typingStatus:n})),setTimeout(()=>{const e=Object(s.e)(),a=Object(o.f)(e,t);a&&n&&a.typingStatus&&a.typingStatus.timestamp===n.timestamp&&Object(s.g)(Object(r.H)(e,t,{typingStatus:void 0}))},6e3);break}case"newMessage":{const{message:n}=a,{chatId:c,threadId:i,type:d}=Object(o.y)(e)||{};if(n.senderId===e.currentUserId&&!n.isFromScheduled)return;const b=Object(o.f)(e,a.chatId);if(!b)return;const u="thread"===d&&i===l.MAIN_THREAD_ID&&a.chatId===c;u?setTimeout(()=>{t.requestChatUpdate({chatId:a.chatId})},1e3):Object(s.g)(Object(r.H)(e,a.chatId,{unreadCount:b.unreadCount?b.unreadCount+1:1,...a.message.hasUnreadMention&&{unreadMentionsCount:b.unreadMentionsCount?b.unreadMentionsCount+1:1}}));const m=Object(o.q)(Object(s.e)());Object(_.a)(m),Object(q.b)({chat:b,message:n,isActiveChat:u});break}case"updateCommonBoxMessages":case"updateChannelMessages":{const{ids:t,messageUpdate:n}=a;if(!1!==n.hasUnreadMention)return;t.forEach(t=>{const s="channelId"in a?a.channelId:Object(o.p)(e,t),n=Object(o.f)(e,s);n&&n.unreadMentionsCount&&(e=Object(r.H)(e,s,{unreadMentionsCount:n.unreadMentionsCount-1}))}),Object(s.g)(e);break}case"updateChatFullInfo":{const{fullInfo:t}=a,n=e.chats.byId[a.id];if(!n)return;Object(s.g)(Object(r.H)(e,a.id,{fullInfo:{...n.fullInfo,...t}}));break}case"updatePinnedChatIds":{const{ids:t,folderId:c}=a,r=c===n.h?"archived":"active";e={...e,chats:{...e.chats,orderedPinnedIds:{...e.chats.orderedPinnedIds,[r]:t.length?t:void 0}}},Object(s.g)(e);break}case"updateChatPinned":{const{id:t,isPinned:c}=a,r=Object(o.j)(e,t);if(r){const{[r]:a}=e.chats.orderedPinnedIds;let s=a||[];if(c){if(!s.includes(t)){if("active"===r&&s.length>=n.K){const t=e.chats.listIds.active;s=s.filter(e=>t&&t.includes(e))}s=[t,...s]}}else s=s.filter(e=>e!==t);e={...e,chats:{...e.chats,orderedPinnedIds:{...e.chats.orderedPinnedIds,[r]:s.length?s:void 0}}}}Object(s.g)(e);break}case"updateChatListType":{const{id:t,folderId:n}=a;Object(s.g)(Object(r.K)(e,t,n));break}case"updateChatFolder":{const{id:t,folder:n}=a,{byId:c,orderedIds:r}=e.chatFolders,o=n?{...c,[t]:n}:Object(b.l)(c,Object.keys(c).map(Number).filter(e=>e!==t)),i=n?r&&r.includes(t)?r:[...r||[],t]:r?r.filter(e=>e!==t):void 0;Object(s.g)({...e,chatFolders:{...e.chatFolders,byId:o,orderedIds:i}});break}case"updateChatFoldersOrder":{const{orderedIds:t}=a;Object(s.g)({...e,chatFolders:{...e.chatFolders,orderedIds:t}});break}case"updateRecommendedChatFolders":{const{folders:t}=a;Object(s.g)({...e,chatFolders:{...e.chatFolders,recommended:t}});break}case"updateChatMembers":{const t=e.chats.byId[a.id],{replacedMembers:n,addedMember:c,deletedMemberId:o}=a;if(!t)return;let i=!1,l=t.fullInfo&&t.fullInfo.members?[...t.fullInfo.members]:[];if(n)l=n,i=!0;else if(c)l.length&&l.some(e=>e.userId===c.userId)||(l.push(c),i=!0);else if(l.length&&o){const e=l.findIndex(e=>e.userId===o);e>-1&&(l.slice(e,1),i=!0)}if(i){const n=l.filter(({isOwner:e,isAdmin:t})=>e||t);Object(s.g)(Object(r.H)(e,a.id,{membersCount:l.length,fullInfo:{...t.fullInfo,members:l,adminMembers:n}}))}break}case"deleteProfilePhotos":{const{chatId:t,ids:n}=a,c=e.chats.byId[t];c&&c.photos&&Object(s.g)(Object(r.H)(e,t,{photos:c.photos.filter(e=>!n.includes(e.id))}));break}}});function $(e,t,a,s,n=!1){const c=n?Object(o.pb)(e,t,a):Object(o.k)(e,t,a);if(c&&s.content){const{photo:e,video:t,sticker:a,document:n}=Object(h.v)(c);e&&s.content.photo?(s.content.photo.blobUrl=e.blobUrl,s.content.photo.thumbnail=e.thumbnail):t&&s.content.video?s.content.video.blobUrl=t.blobUrl:a&&s.content.sticker?s.content.sticker.isPreloadedGlobally=a.isPreloadedGlobally:n&&s.content.document&&(s.content.document.previewBlobUrl=n.previewBlobUrl)}return n?Object(r.eb)(e,t,a,s):Object(r.L)(e,t,a,s)}function z(e,t){const{id:a,chatId:s}=t;if(e=Object(r.V)(e,s,l.MAIN_THREAD_ID,[a]),Object(o.X)(e,s,l.MAIN_THREAD_ID)){const t=Object(o.H)(e,s,l.MAIN_THREAD_ID),n=Object(r.g)(e,s,l.MAIN_THREAD_ID,a),c=Object(o.Hb)(n,s,l.MAIN_THREAD_ID);t&&!c.includes(t)||(e=n)}const{threadInfo:n,firstMessageId:c}=Object(o.Bb)(e,s,t)||{};return!c&&Object(h.sb)(t)||n&&(e=Object(r.V)(e,s,n.threadId,[a]),Object(o.X)(e,s,n.threadId)&&(e=Object(r.g)(e,s,n.threadId,a),c||(e=Object(r.x)(e,s,n.threadId,"firstMessageId",t.id)),n.lastMessageId||(e=Object(r.x)(e,s,n.threadId,"threadInfo",{...n,lastMessageId:t.id})))),e}function W(e,t,a,s=!1){const{chats:n}=e,c=n.byId[t]&&n.byId[t].lastMessage;if(c&&!s){if(!(c.id===a.id||c.id===a.previousLocalId||a.id>c.id))return e}return Object(r.H)(e,t,{lastMessage:a})}function K(e,t){const a=Object(o.m)(e,t),s=Object(o.Y)(e,t,l.MAIN_THREAD_ID);if(!a||!s)return;let n=s.length;for(;n--;){const e=a[s[n]];if(!e.isDeleting)return e}}function Q(e,t,a,n){if(e){t.forEach(t=>{const a=K(n=Object(r.L)(n,e,t,{isDeleting:!0}),e);a&&(n=W(n,e,a,!0))}),Object(s.g)(n),a.requestChatUpdate({chatId:e});const c=[];return t.forEach(t=>{const a=Object(o.k)(n,e,t);if(!a)return;const{threadInfo:s}=Object(o.Bb)(n,e,a)||{};s&&c.push(s.threadId)}),Object(b.o)(c).forEach(t=>{a.requestThreadInfoUpdate({chatId:e,threadId:t})}),void setTimeout(()=>{Object(s.g)(Object(r.j)(Object(s.e)(),e,t))},350)}const c=[];t.forEach(e=>{const t=Object(o.p)(n,e);if(t){c.push(t);const a=K(n=Object(r.L)(n,t,e,{isDeleting:!0}),t);a&&(n=W(n,t,a,!0)),setTimeout(()=>{Object(s.g)(Object(r.j)(Object(s.e)(),t,[e]))},350)}}),Object(s.g)(n),Object(b.o)(c).forEach(e=>{a.requestChatUpdate({chatId:e})})}Object(s.b)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"newMessage":{const{chatId:n,id:c,message:i}=a;e=z(e=$(e,n,c,i),i),i.threadInfo&&(e=Object(r.kb)(e,i.threadInfo.chatId,i.threadInfo.threadId,i.threadInfo)),Object(s.g)(e);const l=Object(o.k)(e,n,c);if(Object(o.a)(e,n,i)){if(i.isOutgoing&&(!i.content||!i.content.action)){const a=Object(o.y)(e);a&&t.focusMessage({chatId:n,threadId:a.threadId,messageId:i.id,noHighlight:!0})}const{threadInfo:a}=Object(o.Bb)(e,n,i)||{};a&&t.requestThreadInfoUpdate({chatId:n,threadId:a.threadId}),i.isOutgoing||setTimeout(()=>{Object(s.g)(W(Object(s.e)(),n,l))},350)}else Object(s.g)(W(Object(s.e)(),n,l));Object(o.M)(e,n)||t.loadTopChats();break}case"newScheduledMessage":{const{chatId:t,id:n,message:c}=a;e=$(e,t,n,c,!0);const i=Object(o.ob)(e,t)||[];e=Object(r.x)(e,t,l.MAIN_THREAD_ID,"scheduledIds",Object(b.o)([...i,n])),Object(s.g)(e);break}case"updateMessage":{const{chatId:t,id:n,message:c}=a;if(!Object(o.k)(e,t,n))return;e=$(e,t,n,c);const i=Object(o.k)(e,t,n);c.threadInfo&&(e=Object(r.kb)(e,c.threadInfo.chatId,c.threadInfo.threadId,c.threadInfo)),e=W(e,t,i),Object(s.g)(e);break}case"updateScheduledMessage":{const{chatId:t,id:n,message:c}=a;if(!Object(o.pb)(e,t,n))return;e=$(e,t,n,c,!0);const i=Object.keys(Object(o.qb)(e,t)||{}).map(Number).sort((e,t)=>t-e);e=Object(r.x)(e,t,l.MAIN_THREAD_ID,"scheduledIds",i),Object(s.g)(e);break}case"updateMessageSendSucceeded":{const{chatId:t,localId:n,message:c}=a;e=z(e,c);const i=Object(o.k)(e,t,n);e=Object(r.j)(e,t,[n]),c.isScheduled&&(e=Object(r.k)(e,t,[n])),e=Object(r.L)(e,t,c.id,{...i,...c,previousLocalId:n});const l=Object(o.k)(e,t,c.id);e=W(e,t,l),Object(s.g)(e);break}case"updateScheduledMessageSendSucceeded":{const{chatId:t,localId:n,message:c}=a,i=Object(o.ob)(e,t)||[];e=Object(r.x)(e,t,l.MAIN_THREAD_ID,"scheduledIds",[...i,c.id]);const d=Object(o.pb)(e,t,n);e=Object(r.k)(e,t,[n]),e=Object(r.eb)(e,t,c.id,{...d,...c,previousLocalId:n}),Object(s.g)(e);break}case"updatePinnedIds":{const{chatId:t,isPinned:n,messageIds:c}=a,i=Object(o.jb)(e,t)||[],d=n?[...i,...c].sort((e,t)=>t-e):i.filter(e=>!c.includes(e));Object(s.g)(Object(r.x)(e,t,l.MAIN_THREAD_ID,"pinnedIds",d));break}case"updateThreadInfo":{const{chatId:t,threadId:n,threadInfo:c,firstMessageId:i}=a,l={...Object(o.Cb)(e,t,n),...c};if(!l.threadId)return;e=Object(r.kb)(e,t,n,l),i&&(e=Object(r.x)(e,t,n,"firstMessageId",i)),Object(s.g)(e);break}case"resetMessages":{const{id:n}=a,c=Object(o.m)(e,n);c&&!Object(h.lb)(n)&&(e=Object(r.j)(e,n,Object.keys(c).map(Number)),Object(s.g)(e),t.loadFullChat({chatId:n,force:!0}));break}case"deleteMessages":{const{ids:s,chatId:n}=a;Q(n,s,t,e);break}case"deleteScheduledMessages":{const{ids:t,chatId:n}=a;!function(e,t,a,n){if(!e)return;t.forEach(t=>{n=Object(r.eb)(n,e,t,{isDeleting:!0})}),Object(s.g)(n),setTimeout(()=>{n=Object(r.k)(Object(s.e)(),e,t);const a=Object(o.qb)(n,e);n=Object(r.x)(n,e,l.MAIN_THREAD_ID,"scheduledIds",Object.keys(a||{}).map(Number)),Object(s.g)(n)},350)}(n,t,0,e);break}case"deleteHistory":{const{chatId:s}=a;Q(s,Object.keys(e.messages.byChatId[s].byId).map(Number),t,e);break}case"updateCommonBoxMessages":{const{ids:t,messageUpdate:n}=a;t.forEach(t=>{const a=Object(o.p)(e,t);a&&(e=Object(r.L)(e,a,t,n))}),Object(s.g)(e);break}case"updateChannelMessages":{const{channelId:t,ids:n,messageUpdate:c}=a;n.forEach(a=>{e=Object(r.L)(e,t,a,c)}),Object(s.g)(e);break}case"updateMessagePoll":{const{pollId:t,pollUpdate:n}=a,c=Object(o.l)(e,t);if(c&&c.content.poll){const t={...c.content.poll,...n},{results:a}=t.results||{};if(a&&!a.some(e=>e.isChosen)){const{results:e}=c.content.poll.results,s=e&&e.filter(e=>e.isChosen);s&&s.forEach(e=>{const s=a.findIndex(t=>t.option===e.option);s>=0&&(t.results.results[s].isChosen=!0)})}Object(s.g)(Object(r.L)(e,c.chatId,c.id,{content:{...c.content,poll:t}}))}break}case"updateMessagePollVote":{const{pollId:t,userId:n,options:c}=a,i=Object(o.l)(e,t);if(!i||!i.content.poll||!i.content.poll.results)break;const{poll:l}=i.content,{recentVoterIds:d,totalVoters:b,results:u}=l.results,m=d?[...d]:[],h=b?b+1:1,O=u?[...u]:[];m.push(n),c.forEach(t=>{const a=O.find(e=>e.option===t),s=O.findIndex(e=>e.option===t),c=a?{...a}:{option:t,votersCount:0};c.votersCount+=1,n===e.currentUserId&&(c.isChosen=!0),s?O[s]=c:O.push(c)}),Object(s.g)(Object(r.L)(e,i.chatId,i.id,{content:{...i.content,poll:{...l,results:{...l.results,recentVoterIds:m,totalVoters:h,results:O}}}}));break}}});const Y=Object(p.g)((function(){let e=Object(s.e)();X.forEach(([t,a])=>{e=Object(r.nb)(e,t,{status:a})}),Object(s.g)(e),X=[]}),3e3,!0);let X=[];Object(s.b)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"deleteUser":return Object(r.l)(e,a.id);case"updateUser":return Object(r.nb)(e,a.id,a.user);case"updateUserStatus":return s=a.userId,n=a.status,X.push([s,n]),void Y();case"updateUserFullInfo":{const{id:t,fullInfo:s}=a,n=e.users.byId[t];if(!n)return;return Object(r.nb)(e,t,{fullInfo:{...n.fullInfo,...s}})}}var s,n}),Object(s.b)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"updateStickerSet":return Object(r.hb)(e,a.id,a.stickerSet)}}),Object(s.b)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"updatePeerBlocked":return a.isBlocked?Object(r.a)(Object(s.e)(),a.id):Object(r.p)(Object(s.e)(),a.id);case"updateResetContactList":Object(s.g)({...Object(s.e)(),contactList:{hash:0,userIds:[]}});break;case"updateFavoriteStickers":t.loadFavoriteStickers();break;case"updatePrivacy":e.settings.privacy[a.key]=a.rules}}),Object(s.b)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"updateNotifySettings":return Object(r.cb)(e,a.peerType,a.isSilent,a.shouldShowPreviews);case"updateNotifyExceptions":{const{id:t,isMuted:n,isSilent:c,shouldShowPreviews:o}=a;e.chats.byId[t]&&(e=Object(r.H)(e,t,{isMuted:n})),Object(s.g)(Object(r.e)(e,t,{isMuted:n,isSilent:c,shouldShowPreviews:o}));break}}}),Object(s.b)("apiUpdate",(e,t,a)=>{switch(a["@type"]){case"updateTwoFaStateWaitCode":return{...e,twoFaSettings:{...e.twoFaSettings,isLoading:!1,waitingEmailCodeLength:a.length}};case"updateTwoFaError":return{...e,twoFaSettings:{...e.twoFaSettings,error:a.message}}}});var J=a(50),Z=a(8),ee=a(35),te=a(133),ae=a(120),se=a(34),ne=a(49),ce=a(112),re=a(78),oe=a(25),ie=a(63),le=a(44),de=a(32),be=a(156),ue=a(143);a(199);var me=Object(c.h)(({id:e,name:t,value:a,label:s,checked:n=!1,disabled:r,inactive:o,noAnimation:i,onChange:l,onCheck:d})=>{const b=Object(c.m)(e=>{l&&l(e),d&&d(e.currentTarget.checked)},[l,d]),u=Object(Z.a)("Switcher",r&&"disabled",o&&"inactive",i&&"no-animation");return c.a.createElement("label",{className:u,title:s},c.a.createElement("input",{type:"checkbox",id:e,name:t,value:a,checked:n,disabled:r,onChange:b}),c.a.createElement("span",{className:"widget"}))});a(200);const he=[0,1,2];var Oe=Object(c.h)(Object(s.h)(e=>{const{query:t,fetchingStatus:a,chatId:s,date:n}=e.globalSearch,{currentUserId:c}=e,{byId:r}=e.chats,{theme:o,animationLevel:i}=e.settings.byKey;return{searchQuery:t,isLoading:!!a&&Boolean(a.chats||a.messages),currentUserId:c,chatsById:r,globalSearchChatId:s,searchDate:n,theme:o,animationLevel:i}},(e,t)=>Object(b.l)(t,["openChat","openTipsChat","setGlobalSearchDate","setGlobalSearchChatId","setSettingOption"]))(({content:e,contactsFilter:t,onSearchQuery:a,onSelectSettings:s,onSelectContacts:r,onSelectArchived:o,onOpenMenu:i,onCloseMenu:l,setGlobalSearchChatId:b,onReset:u,searchQuery:m,isLoading:j,shouldSkipTransition:g,currentUserId:p,globalSearchChatId:f,searchDate:I,theme:v,animationLevel:y,chatsById:C,openChat:E,openTipsChat:w,setGlobalSearchDate:S,setSettingOption:M})=>{const k=Object(oe.a)(),N=e===d.d.ChatList,P={date:void 0},T={id:void 0},A=Object(c.p)(()=>I?Object(R.a)(new Date(1e3*I)):void 0,[I]),x=Object(c.p)(()=>N&&C?Object.values(C).reduce((e,t)=>Object(h.hb)(t)&&t.unreadCount?e+1:e,0):0,[N,C]),L=Object(c.p)(()=>({onTrigger:e,isOpen:t})=>c.a.createElement(de.a,{round:!0,ripple:N&&!O.g,size:"smaller",color:"translucent",className:t?"active":"",onClick:N?e:()=>u(),ariaLabel:N?k("AccDescrOpenMenu2"):"Return to chat list"},c.a.createElement("div",{className:Object(Z.a)("animated-menu-icon",!N&&"state-back",g&&"no-animation")})),[N,k,u,g]),F=Object(c.m)(()=>{m||a("")},[m,a]),D=Object(c.m)(()=>{E({id:p})},[p,E]),B=Object(c.m)(e=>{e.stopPropagation();const t="light"===v?"dark":"light";M({theme:t}),Object(re.a)(t,y>0)},[y,M,v]),U=Object(c.m)(e=>{e.stopPropagation();const t=0===y?2:0;he.forEach((e,a)=>{document.body.classList.toggle("animation-level-"+a,t===a)}),M({animationLevel:t})},[y,M]),H=Boolean(f)||e===d.d.GlobalSearch||e===d.d.Contacts,G=e===d.d.Contacts?k("SearchFriends"):k("Search"),[q,_]=Object(c.r)(!1);return Object(ae.a)((e,t,a)=>{a&&"left"===a.type&&a.isMenuOpen&&t&&(_(!0),setTimeout(()=>_(!1),300))}),c.a.createElement("div",{className:"LeftMainHeader"},c.a.createElement("div",{id:"LeftMainHeader",className:"left-header"},c.a.createElement(ie.a,{trigger:L,footer:`${n.f} ${n.g}`,forceOpen:q,onOpen:i,onClose:l},c.a.createElement(le.a,{icon:"saved-messages",onClick:D},k("SavedMessages")),c.a.createElement(le.a,{icon:"archive",onClick:o},c.a.createElement("span",{className:"menu-item-name"},k("ArchivedChats")),x>0&&c.a.createElement("div",{className:"archived-badge"},x)),c.a.createElement(le.a,{icon:"user",onClick:r},k("Contacts")),c.a.createElement(le.a,{icon:"settings",onClick:s},k("Settings")),c.a.createElement(le.a,{icon:"darkmode",onClick:B},c.a.createElement("span",{className:"menu-item-name"},k("lng_menu_night_mode")),c.a.createElement(me,{id:"darkmode",label:k("dark"===v?"lng_settings_disable_night_theme":"lng_settings_enable_night_theme"),checked:"dark"===v,noAnimation:!0})),c.a.createElement(le.a,{icon:"animations",onClick:U},c.a.createElement("span",{className:"menu-item-name capitalize"},k("Appearance.Animations").toLowerCase()),c.a.createElement(me,{id:"animations",label:"Toggle Animations",checked:y>0})),c.a.createElement(le.a,{icon:"help",onClick:w},k("TelegramFeatures")),c.a.createElement(le.a,{icon:"bug",href:n.x},"Report Bug"),c.a.createElement(le.a,{icon:"char-K",href:"https://web.telegram.org/k/",onClick:()=>{localStorage.setItem("kz_version","K")}},"Switch to K Version"),c.a.createElement(le.a,{icon:"char-W",href:"https://web.telegram.org/?legacy=1"},"Switch to Old Version")),c.a.createElement(be.a,{inputId:"telegram-search-input",parentContainerClassName:"LeftSearch",className:f||I?"with-picker-item":"",value:t||m,focused:H,isLoading:j,placeholder:G,autoComplete:"off",canClose:Boolean(f||I),onChange:a,onReset:u,onFocus:F},A&&c.a.createElement(ue.a,{icon:"calendar",title:A,canClose:!0,isMinimized:Boolean(f),className:"search-date",onClick:S,clickArg:P}),f&&c.a.createElement(ue.a,{chatOrUserId:f,onClick:b,canClose:!0,clickArg:T}))))})),je=a(21);a(201);var ge=Object(s.h)(e=>Object(b.l)(e,["connectionState"]))(({connectionState:e})=>{const t=Object(oe.a)();return"connectionStateConnecting"===e&&c.a.createElement("div",{id:"ConnectionState",dir:t.isRtl?"rtl":void 0},c.a.createElement(je.a,{color:"black"}),c.a.createElement("div",{className:"state-text"},t("WaitingForNetwork")))}),pe=a(134),fe=a(40),Ie=a(26),ve=(e,t,a)=>{const s=Object(c.q)(),n=(e=>Object(c.p)(()=>Object(p.g)(e=>e(),e),[e]))(t),r=Object(Ie.a)();return Object(fe.a)(()=>{let t=!0;n(()=>{s.current=e(),t||r()}),t=!1},a),s.current},ye=a(170),Ce=a(191);var Ee=Object(c.h)(Object(s.h)(e=>{const{chats:{byId:t},users:{byId:a},chatFolders:{byId:s,orderedIds:n,activeChatFolder:c},currentUserId:r,lastSyncTime:i}=e;return{chatsById:t,usersById:a,chatFoldersById:s,orderedFolderIds:n,lastSyncTime:i,notifySettings:Object(o.eb)(e),notifyExceptions:Object(o.db)(e),activeChatFolder:c,currentUserId:r}},(e,t)=>Object(b.l)(t,["loadChatFolders","setActiveChatFolder","openChat"]))(({chatsById:e,usersById:t,chatFoldersById:a,notifySettings:s,notifyExceptions:n,orderedFolderIds:r,activeChatFolder:o,currentUserId:i,lastSyncTime:l,loadChatFolders:d,setActiveChatFolder:u,openChat:m})=>{const j=Object(c.q)(null),g=Object(oe.a)();Object(c.n)(()=>{l&&d()},[l,d]);const p=Object(c.p)(()=>r?r.map(e=>a[e]||{}).filter(Boolean):void 0,[a,r]),f=ve(()=>{if(!p||!p.length)return;const a=Object.keys(e).map(Number),c=p.map(c=>{const{unreadDialogsCount:r,hasActiveDialogs:o}=Object(h.p)(e,t,c,a,s,n)||{};return{id:c.id,badgeCount:r,isBadgeActive:o}});return Object(b.c)(c,"id")},3e3,[p,e,t,s,n]),I=Object(c.p)(()=>{if(p&&p.length)return[{title:g("FilterAllChats")},...p.map(e=>({title:e.title,...f&&f[e.id]}))]},[p,f,g]),v=Object(c.m)(e=>{u(e)},[u]);Object(c.n)(()=>{I&&I.length&&o>=I.length&&u(0)},[o,I,u]),Object(c.n)(()=>{if(j.current&&O.l&&I&&I.length)return Object(pe.b)(j.current,{onSwipe:(e,t)=>{t===pe.a.Left?u(Math.min(o+1,I.length-1)):t===pe.a.Right&&u(Math.max(0,o-1))}})},[o,I,u]);const y=Object(c.q)();y.current=0!==o,Object(c.n)(()=>y.current?Object(ne.a)(()=>{y.current&&u(0)}):void 0,[o,u]),Object(c.n)(()=>{const e=e=>{if(e.metaKey&&e.code.startsWith("Digit")&&I){const[,t]=e.code.match(/Digit(\d)/)||[];if(!t)return;if("0"===t)return void m({id:i});const a=Number(t)-1;if(a>I.length-1)return;u(a),e.preventDefault()}};return document.addEventListener("keydown",e,!0),()=>{document.removeEventListener("keydown",e,!0)}});const{shouldRender:C,transitionClassNames:E}=Object(ee.a)(!r,void 0,!0);function w(e){const t=Object.values(a).find(({title:e})=>e===I[o].title);return t&&0!==o?c.a.createElement(Ce.a,{folderType:"folder",folderId:t.id,noChatsText:g("FilterNoChatsToDisplay"),isActive:e}):c.a.createElement(Ce.a,{folderType:"all",isActive:e})}return c.a.createElement("div",{className:"ChatFolders"},I&&I.length?c.a.createElement(ye.a,{tabs:I,activeTab:o,onSwitchTab:v}):C?c.a.createElement("div",{className:Object(Z.a)("tabs-placeholder",E)}):void 0,c.a.createElement(ce.b,{ref:j,name:g.isRtl?"slide-reversed":"slide",activeKey:o,renderCount:I?I.length:void 0},w))})),we=a(11),Se=a(17),Me=a(16);var ke=Object(c.h)(e=>{const t=Object(Se.a)(we.a.Extra,"LeftSearch");return t?c.a.createElement(t,e):c.a.createElement(Me.a,null)});var Ne=Object(c.h)(e=>{const t=Object(Se.a)(we.a.Extra,"ContactList");return t?c.a.createElement(t,e):c.a.createElement(Me.a,null)}),Pe=a(54);a(212);let Te;var Ae=Object(c.h)(({isShown:e,onNewPrivateChat:t,onNewChannel:a,onNewGroup:s})=>{const[n,r]=Object(c.r)(!1);Object(c.n)(()=>{e||r(!1)},[e]);const o=Object(oe.a)(),i=Object(Z.a)("NewChatButton",e&&"revealed",n&&"menu-is-open"),l=Object(c.m)(()=>{Te&&(clearTimeout(Te),Te=void 0)},[]),d=Object(c.m)(()=>{Te&&(clearTimeout(Te),Te=void 0),Te=window.setTimeout(()=>{r(!1)},750)},[]);return c.a.createElement("div",{className:i,onMouseEnter:l,onMouseLeave:d},c.a.createElement(de.a,{round:!0,color:"primary",className:n?"active":"",onClick:()=>{r(!n)},ariaLabel:o(n?"Close":"NewMessageTitle"),tabIndex:-1},c.a.createElement("i",{className:"icon-new-chat-filled"}),c.a.createElement("i",{className:"icon-close"})),c.a.createElement(Pe.a,{isOpen:n,positionX:"right",positionY:"bottom",autoClose:!0,onClose:()=>{r(!1)}},c.a.createElement(le.a,{icon:"channel",onClick:a},o("NewChannel")),c.a.createElement(le.a,{icon:"group",onClick:s},o("NewGroup")),c.a.createElement(le.a,{icon:"user",onClick:t},o("NewMessageTitle"))))});a(213);const xe=Object.keys(d.d).length/2;let Re;var Le=Object(c.h)(({content:e,searchQuery:t,searchDate:a,contactsFilter:s,shouldSkipTransition:n,onSearchQuery:r,onContentChange:o,onReset:i,onOpenMenu:l,onCloseMenu:b})=>{const[u,m]=Object(c.r)(O.l),h=Object(c.q)(!1),j=Object(c.m)(()=>{o(d.d.Settings)},[o]),g=Object(c.m)(()=>{o(d.d.Contacts)},[o]),p=Object(c.m)(()=>{o(d.d.NewChannelStep1)},[o]),f=Object(c.m)(()=>{o(d.d.NewGroupStep1)},[o]),I=Object(c.m)(()=>{o(d.d.Archived)},[o]),v=Object(c.m)(()=>{e===d.d.ChatList&&(h.current=!0,m(!0))},[e]),y=Object(c.m)(()=>{h.current=!1,Re&&(clearTimeout(Re),Re=void 0),Re=window.setTimeout(()=>{h.current||m(!1)},250)},[]);return Object(c.n)(()=>{let t;return e!==d.d.ChatList?t=window.setTimeout(()=>{m(!1)},250):(h.current||O.l)&&m(!0),()=>{t&&(clearTimeout(t),t=void 0)}},[e]),c.a.createElement("div",{id:"LeftColumn-main",onMouseEnter:O.l?void 0:v,onMouseLeave:O.l?void 0:y},c.a.createElement(Oe,{content:e,contactsFilter:s,onSearchQuery:r,onSelectSettings:j,onSelectContacts:g,onSelectArchived:I,onOpenMenu:l,onCloseMenu:b,onReset:i,shouldSkipTransition:n}),c.a.createElement(ge,null),c.a.createElement(ce.b,{name:n?"none":"zoom-fade",renderCount:xe,activeKey:e},n=>{switch(e){case d.d.ChatList:return c.a.createElement(Ee,null);case d.d.GlobalSearch:return c.a.createElement(ke,{searchQuery:t,searchDate:a,isActive:n,onReset:i});case d.d.Contacts:return c.a.createElement(Ne,{filter:s});default:return}}),c.a.createElement(Ae,{isShown:u,onNewPrivateChat:g,onNewChannel:p,onNewGroup:f}))});var Fe=Object(c.h)(e=>{const t=Object(Se.a)(we.a.Extra,"Settings");return t?c.a.createElement(t,e):c.a.createElement(Me.a,null)});var De=Object(c.h)(e=>{const t=Object(Se.a)(we.a.Extra,"NewChat");return t?c.a.createElement(t,e):c.a.createElement(Me.a,null)});var Be,Ue=Object(c.h)(e=>{const t=Object(Se.a)(we.a.Extra,"ArchivedChats");return t?c.a.createElement(t,e):c.a.createElement(Me.a,null)});a(214);!function(e){e[e.Main=0]="Main",e[e.Settings=1]="Settings",e[e.Archived=2]="Archived",e[e.NewGroup=3]="NewGroup",e[e.NewChannel=4]="NewChannel"}(Be||(Be={}));const He=Object.keys(Be).length/2;var Ge=Object(c.h)(Object(s.h)(e=>{const{globalSearch:{query:t,date:a},chatFolders:{activeChatFolder:s}}=e;return{searchQuery:t,searchDate:a,activeChatFolder:s}},(e,t)=>Object(b.l)(t,["setGlobalSearchQuery","setGlobalSearchChatId","resetChatCreation","setGlobalSearchDate","loadPasswordInfo","clearTwoFaError"]))(({searchQuery:e,searchDate:t,activeChatFolder:a,setGlobalSearchQuery:s,setGlobalSearchChatId:n,resetChatCreation:r,setGlobalSearchDate:o,loadPasswordInfo:l,clearTwoFaError:b})=>{const[u,m]=Object(c.r)(d.d.ChatList),[h,j]=Object(c.r)(d.m.Main),[g,p]=Object(c.r)(""),[f,I,v]=Object(se.a)(),y=Object(c.m)(e=>{e!==d.d.ChatList&&e!==d.d.NewChannelStep2&&e!==d.d.NewGroupStep2&&i.a.pushState({type:"left",contentKey:e,isMenuOpen:f}),m(e)},[f]),C=Object(c.m)((e,t=!1)=>{j(e),t||i.a.pushState({type:"left",contentKey:d.d.Settings,screen:e,isMenuOpen:f})},[f]),[E,w]=Object(c.r)(0);let S=Be.Main;switch(u){case d.d.Archived:S=Be.Archived;break;case d.d.Settings:S=Be.Settings;break;case d.d.NewChannelStep1:case d.d.NewChannelStep2:S=Be.NewChannel;break;case d.d.NewGroupStep1:case d.d.NewGroupStep2:S=Be.NewGroup}const M=Object(c.m)((e,t=!1)=>{if(u===d.d.NewGroupStep2&&!e)return t||i.a.back(),void y(d.d.NewGroupStep1);if(u===d.d.NewGroupStep1){const e=document.getElementById("new-group-picker-search");e&&e.blur()}if(u===d.d.Settings)switch(t||i.a.back(),h){case d.m.EditProfile:case d.m.Folders:case d.m.General:case d.m.Notifications:case d.m.Privacy:case d.m.Language:return void C(d.m.Main,t);case d.m.GeneralChatBackground:return void C(d.m.General,t);case d.m.GeneralChatBackgroundColor:return void C(d.m.GeneralChatBackground,t);case d.m.PrivacyPhoneNumber:case d.m.PrivacyLastSeen:case d.m.PrivacyProfilePhoto:case d.m.PrivacyForwarding:case d.m.PrivacyGroupChats:case d.m.PrivacyActiveSessions:case d.m.PrivacyBlockedUsers:case d.m.TwoFaDisabled:case d.m.TwoFaEnabled:case d.m.TwoFaCongratulations:return void C(d.m.Privacy,t);case d.m.PrivacyPhoneNumberAllowedContacts:case d.m.PrivacyPhoneNumberDeniedContacts:return void C(d.m.PrivacyPhoneNumber,t);case d.m.PrivacyLastSeenAllowedContacts:case d.m.PrivacyLastSeenDeniedContacts:return void C(d.m.PrivacyLastSeen,t);case d.m.PrivacyProfilePhotoAllowedContacts:case d.m.PrivacyProfilePhotoDeniedContacts:return void C(d.m.PrivacyProfilePhoto,t);case d.m.PrivacyForwardingAllowedContacts:case d.m.PrivacyForwardingDeniedContacts:return void C(d.m.PrivacyForwarding,t);case d.m.PrivacyGroupChatsAllowedContacts:case d.m.PrivacyGroupChatsDeniedContacts:return void C(d.m.PrivacyGroupChats,t);case d.m.TwoFaNewPassword:return void C(d.m.TwoFaDisabled,t);case d.m.TwoFaNewPasswordConfirm:return void C(d.m.TwoFaNewPassword,t);case d.m.TwoFaNewPasswordHint:return void C(d.m.TwoFaNewPasswordConfirm,t);case d.m.TwoFaNewPasswordEmail:return void C(d.m.TwoFaNewPasswordHint,t);case d.m.TwoFaNewPasswordEmailCode:return void C(d.m.TwoFaNewPasswordEmail,t);case d.m.TwoFaChangePasswordCurrent:case d.m.TwoFaTurnOff:case d.m.TwoFaRecoveryEmailCurrentPassword:return void C(d.m.TwoFaEnabled,t);case d.m.TwoFaChangePasswordNew:return void C(d.m.TwoFaChangePasswordCurrent,t);case d.m.TwoFaChangePasswordConfirm:return void C(d.m.TwoFaChangePasswordNew,t);case d.m.TwoFaChangePasswordHint:return void C(d.m.TwoFaChangePasswordConfirm,t);case d.m.TwoFaRecoveryEmail:return void C(d.m.TwoFaRecoveryEmailCurrentPassword,t);case d.m.TwoFaRecoveryEmailCode:return void C(d.m.TwoFaRecoveryEmail,t);case d.m.FoldersCreateFolder:case d.m.FoldersEditFolder:return void C(d.m.Folders,t)}t||i.a.back(),u!==d.d.ChatList||0!==a?(y(d.d.ChatList),p(""),s({query:""}),o({date:void 0}),n({id:void 0}),r(),setTimeout(()=>{w(Date.now())},250)):y(d.d.GlobalSearch)},[u,a,y,h,C,s,o,n,r]),[k,N]=Object(c.r)(!1);Object(ae.a)((e,t,a)=>{a&&"left"===a.type&&(t&&(N(!0),setTimeout(()=>{N(!1)},ce.a[O.g?"slide-layers":"push-slide"])),M(!1,!0))});const P=Object(c.m)(t=>{u!==d.d.Contacts?(y(d.d.GlobalSearch),t!==e&&s({query:t})):p(t)},[u,y,e,s]);return Object(c.n)(()=>u!==d.d.ChatList||0===a?Object(ne.a)(()=>M()):void 0,[a,u,M]),Object(c.n)(()=>{b(),h===d.m.Privacy&&l()},[b,l,h]),c.a.createElement(ce.b,{id:"LeftColumn",name:k?"none":O.g?"slide-layers":"push-slide",renderCount:He,activeKey:S},a=>{switch(S){case Be.Archived:return c.a.createElement(Ue,{isActive:a,onReset:M});case Be.Settings:return c.a.createElement(Fe,{currentScreen:h,onScreenSelect:C,onReset:M,shouldSkipTransition:k});case Be.NewChannel:return c.a.createElement(De,{key:E,isChannel:!0,content:u,onContentChange:y,onReset:M});case Be.NewGroup:return c.a.createElement(De,{key:E,content:u,onContentChange:y,onReset:M});default:return c.a.createElement(Le,{content:u,searchQuery:e,searchDate:t,contactsFilter:g,onContentChange:y,onSearchQuery:P,onReset:M,shouldSkipTransition:k,onOpenMenu:I,onCloseMenu:v})}})})),qe=a(141),_e=a(12),Ve=a(13),$e=a(57);var ze=()=>{const[e,t]=Object(c.r)($e.a.get());return Object(c.n)(()=>{const e=Object(p.g)(()=>{t($e.a.get())},250,!1);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e},We=a(177);function Ke(e,t){const a=e<=n.db?16:32,s=function(e){if(e>n.ab){const t=Math.min(Math.max(.25*e,288),424),a=Math.min(.25*e,424);return Math.min(e-t-a,728)}if(e>n.Z){const t=Math.min(Math.max(.4*e,288),424);return Math.min(e-t,728)}if(e>728)return 728;return e}(e),c=e<=n.db?54:64,r=t?s-a-c:s-a,o=e>n.db?Math.min(s-a,512):s-a,i=o/r,l=r/o;return{composerHiddenScale:i,toolbarHiddenScale:l,composerTranslateX:t?c/2*l:0,toolbarTranslateX:t?c/2*-1*i:0,unpinHiddenScale:o/258,toolbarForUnpinHiddenScale:258/o}}var Qe=a(136),Ye=a(146),Xe=a(137),Je=a(51),Ze=a(110),et=a(125);var tt=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"HeaderMenuContainer",!t);return a?c.a.createElement(a,e):void 0});var at=Object(c.h)(Object(s.h)((e,{chatId:t,threadId:a,messageListType:s})=>{const n=Object(o.f)(e,t),c=Boolean(n&&Object(h.jb)(n));if(n&&n.isRestricted)return{noMenu:!0};const r=Object(o.P)(e,t),i="thread"===s&&a===l.MAIN_THREAD_ID,d="thread"===s&&a!==l.MAIN_THREAD_ID,b=Object(o.W)(e),u=Boolean(Object(o.L)(e,t)),m=Boolean(i&&n&&(c||Object(h.nb)(n))&&n.isNotJoined),j=i||d,g=i&&!r&&!m,p=!Object(o.S)(e),f=i&&!m;return{noMenu:!(O.g&&m||O.g&&j||g||p||f),isChannel:c,isRightColumnShown:b,canStartBot:u,canSubscribe:m,canSearch:j,canMute:g,canSelect:p,canLeave:f}},(e,t)=>Object(b.l)(t,["joinChannel","sendBotCommand","openLocalTextSearch"]))(({chatId:e,threadId:t,noMenu:a,isChannel:s,canStartBot:n,canSubscribe:r,canSearch:o,canMute:i,canSelect:l,canLeave:d,isRightColumnShown:b,joinChannel:u,sendBotCommand:m,openLocalTextSearch:h})=>{const j=Object(c.q)(null),[g,p]=Object(c.r)(!1),[f,I]=Object(c.r)(void 0),v=Object(c.m)(()=>{p(!0);const e=j.current.getBoundingClientRect();I({x:e.right,y:e.bottom})},[]),y=Object(c.m)(()=>{p(!1)},[]),C=Object(c.m)(()=>{I(void 0)},[]),E=Object(c.m)(()=>{u({chatId:e})},[u,e]),w=Object(c.m)(()=>{m({command:"/start"})},[m]),S=Object(c.m)(()=>{if(h(),O.g){document.querySelector("#MobileSearch input").focus()}else setTimeout(()=>{const e=document.querySelector(".RightHeader .SearchInput input");e&&e.focus()},400)},[h]),M=Object(oe.a)();return c.a.createElement("div",{className:"HeaderActions"},!O.g&&r&&c.a.createElement(de.a,{size:"tiny",ripple:!0,fluid:!0,onClick:E},M(s?"Subscribe":"Join Group")),!O.g&&n&&c.a.createElement(de.a,{size:"tiny",ripple:!0,fluid:!0,onClick:w},M("Start")),!O.g&&o&&c.a.createElement(de.a,{round:!0,ripple:b,color:"translucent",size:"smaller",onClick:S,ariaLabel:"Search in this chat"},c.a.createElement("i",{className:"icon-search"})),(O.g||!r)&&c.a.createElement(de.a,{ref:j,className:g?"active":"",round:!0,ripple:!O.g,size:"smaller",color:"translucent",disabled:a,ariaLabel:"More actions",onClick:v},c.a.createElement("i",{className:"icon-more"})),f&&c.a.createElement(tt,{chatId:e,threadId:t,isOpen:g,anchor:f,isChannel:s,canSubscribe:r,canSearch:o,canMute:i,canSelect:l,canLeave:d,onSubscribeChannel:E,onSearchClick:S,onClose:y,onCloseAnimationEnd:C}))})),st=a(116),nt=a(23),ct=a(109),rt=a(46);function ot(e){const t=e&&Object(h.E)(e),{sticker:a}=e&&e.content||{},s=t&&a&&!Object(O.p)()&&t.includes("image/webp"),[r,o]=Object(c.r)(rt.a),i=e&&e.id;return Object(c.o)(()=>{s&&Object(rt.c)("b64-"+i,t).then(o).catch(e=>{n.p&&console.error(e)})},[i,s,t]),s?r:t}var it=a(118),lt=a(45);function dt(e,t,a,s,n){return`M${e},${t+n}a${n},${n},0,0,1,\n  ${a},0v${s-2*n}a${n},${n},0,0,1,${-a},0Z`}var bt=Object(c.h)(({count:e,index:t})=>{const a=Object(c.q)(null),s=Object(c.p)(()=>function(e,t){const a=e-t-1,s=function(e){let t=8;1===e?t=36:2===e?t=17:3===e?t=11:(4===e||e>3)&&(t=7.5);return t}(e),n=function(e,t){let a=36;1===e?a=36:2===e?a=17:3===e?a=1===t?12:11:(4===e||e>3)&&(a=7.5);return a}(e,a),c=function(e,t){return e<=3?36:t*e+2*(e-1)}(e,s),r="clipPath"+e,o=function(e,t,a){let s="";if(3===a)s=dt(0,0,2,t,1)+dt(0,12,2,t+1,1)+dt(0,25,2,t,1);else for(let e=0;e<a;e++)s+=dt(0,(t+2)*e,2,t,1);return`<clipPath id="${e}">\n      <path d="${s}" />\n    </clipPath>`}(r,s,e),i=function(e,t,a){if(1===a)return 0;if(2===a)return 0===e?0:t+2;return 3===a?0===e?0:1===e?12:25:(t+2)*e}(a,s,e),l=function(e,t,a,s){if(t<=4)return 0;if(e<=1)return 0;if(e>=t-2)return s-36;return(a+4)/2+(e-2)*(a+2)}(a,e,s,c);return{markHeight:n,clipPath:o,markTranslateY:i,trackTranslateY:l,trackHeight:c,clipPathId:r}}(e,t),[e,t]);if(Object(c.n)(()=>{if(!a.current)return;const{trackHeight:e,trackTranslateY:t,markHeight:n,markTranslateY:c,clipPathId:r,clipPath:o}=s,i=a.current.firstElementChild;if(a&&a.current){const s=a.current,{style:l}=s;l.height=e+"px",l.transform=`translateY(-${t}px)`,l.clipPath=`url("#${r}")`;const d=s.querySelector("svg"),b=s.querySelector("div"),u=s.querySelector("defs");d||i&&(i.innerHTML=`<svg height="0" width="0"><defs> ${o} </defs></svg>`),u&&(u.innerHTML=o),b&&(b.style.height=n+"px",b.style.transform=`translateY(${c}px)`)}},[s]),1===e)return c.a.createElement("div",{className:"pinned-message-border"},c.a.createElement("div",{className:"pinned-message-border-wrapper-1",ref:a}));const{trackHeight:n,trackTranslateY:r,markHeight:o,markTranslateY:i,clipPathId:l}=s;return c.a.createElement("div",{className:Object(Z.a)("pinned-message-border",e>4&&"pinned-message-border-mask")},c.a.createElement("div",{className:"pinned-message-border-wrapper",ref:a,style:`clip-path: url("#${l}"); width: 2px;\n          height: ${n}px; transform: translateY(-${r}px);`},c.a.createElement("span",null),c.a.createElement("div",{className:"pinned-message-border-mark",style:`height: ${o}px; transform: translateY(${i}px);`})))});var ut=Object(c.h)(({message:e,count:t,index:a,customTitle:s,className:n,onUnpinMessage:r,onClick:o,onAllPinnedClick:i})=>{const l=Object(oe.a)(),d=ot(e),b=Object(ct.a)(Object(h.D)(e,"pictogram")),u=Object(h.N)(l,e,Boolean(d)),[m,O,j]=Object(se.a)(),g=Object(c.m)(()=>{j(),r&&r(e.id)},[j,r,e.id]);return c.a.createElement("div",{className:Object(Z.a)("HeaderPinnedMessage-wrapper",n)},t>1&&c.a.createElement(de.a,{round:!0,size:"smaller",color:"translucent",className:"pin-list-button",ariaLabel:l("EventLogFilterPinnedMessages"),onClick:i},c.a.createElement("i",{className:"icon-pin-list"})),r&&c.a.createElement(de.a,{round:!0,size:"smaller",color:"translucent",ariaLabel:l("UnpinMessageAlertTitle"),className:"unpin-button",onClick:O},c.a.createElement("i",{className:"icon-close"})),c.a.createElement(it.a,{isOpen:m,onClose:j,text:"Would you like to unpin this message?",confirmLabel:"Unpin",confirmHandler:g}),c.a.createElement("div",{className:"HeaderPinnedMessage",onClick:o,dir:l.isRtl?"rtl":void 0},c.a.createElement(bt,{count:t,index:a}),d&&function(e,t){const{width:a,height:s}=Object(st.k)();return c.a.createElement("img",{src:t||e,width:a,height:s,alt:""})}(d,b),c.a.createElement("div",{className:"message-text"},c.a.createElement("div",{className:"title",dir:"auto"},s||`${l("PinnedMessage")} ${a>0?"#"+(t-a):""}`),c.a.createElement("p",{dir:"auto"},Object(nt.a)(u))),c.a.createElement(lt.a,null)))}),mt=a(55),ht=a(178);a(217);var Ot=Object(s.h)((e,{message:t})=>({sender:Object(o.tb)(e,t)}),(e,t)=>Object(b.l)(t,["focusMessage","closeAudioPlayer"]))(({message:e,className:t,noUi:a,sender:s,focusMessage:n,closeAudioPlayer:r})=>{const o=Object(oe.a)(),i=s?Object(h.V)(o,s):void 0,l=mt.c(Object(h.D)(e,"inline")),{playPause:d,isPlaying:b}=Object(ht.a)(Object(h.A)(e),Object(h.r)(e),l,void 0,void 0,!0),u=Object(c.m)(()=>{n({chatId:e.chatId,messageId:e.id})},[n,e.chatId,e.id]),m=Object(c.m)(()=>{b&&d(),r()},[r,b,d]);if(a)return;const j=Object(h.u)(e);return c.a.createElement("div",{className:Object(Z.a)("AudioPlayer",t),dir:o.isRtl?"rtl":void 0},c.a.createElement(de.a,{round:!0,ripple:!O.g,color:"translucent",size:"smaller",className:Object(Z.a)("toggle-play",b?"pause":"play"),onClick:d,ariaLabel:b?"Pause audio":"Play audio"},c.a.createElement("i",{className:"icon-play"}),c.a.createElement("i",{className:"icon-pause"})),c.a.createElement("div",{className:"AudioPlayer-content",onClick:u},j?function(e){const{title:t,performer:a,fileName:s}=e;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"title",dir:"auto"},Object(nt.a)(t||s)),a&&c.a.createElement("div",{className:"subtitle",dir:"auto"},Object(nt.a)(a)))}(j):function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"title",dir:"auto"},t&&Object(nt.a)(t)),c.a.createElement("div",{className:"subtitle",dir:"auto"},e))}(o("AttachAudio"),i),c.a.createElement(lt.a,null)),c.a.createElement(de.a,{round:!0,className:"player-close",color:"translucent",size:"smaller",onClick:m,ariaLabel:"Close player"},c.a.createElement("i",{className:"icon-close"})))});a(218);var jt=Object(c.h)(Object(s.h)((e,{chatId:t,threadId:a,messageListType:s})=>{const{isLeftColumnShown:n,lastSyncTime:c}=e,{byId:r}=e.chats,i=Object(o.f)(e,t),{typingStatus:d}=i||{},{chatId:b,messageId:u}=e.audioPlayer,m=b&&u?Object(o.k)(e,b,u):void 0,h=Object(o.Db)(e,t,a);let O;if("pinned"===s){const a=Object(o.jb)(e,t);O=a&&a.length}else if("scheduled"===s){const a=Object(o.ob)(e,t);O=a&&a.length}else if("thread"===s&&a!==l.MAIN_THREAD_ID){const s=Object(o.Cb)(e,t,a);s&&(O=s.messagesCount)}const j={typingStatus:d,isLeftColumnShown:n,isRightColumnShown:Object(o.W)(e),isSelectModeActive:Object(o.S)(e),audioMessage:m,chat:i,chatsById:r,originChatId:h?h.id:t,messagesCount:O,isChatWithSelf:Object(o.P)(e,t),isChatWithBot:i&&Object(o.O)(e,i),lastSyncTime:c,notifySettings:Object(o.eb)(e),notifyExceptions:Object(o.db)(e)},g=Object(o.m)(e,t);if("thread"!==s||!g)return j;if(Object.assign(j,{messagesById:g}),a!==l.MAIN_THREAD_ID){const s=Object(o.Eb)(e,t,a),n=s?Object(o.k)(e,t,s):void 0,c=n?Object(o.K)(e,n):void 0;return{...j,pinnedMessageIds:s,canUnpin:!1,topMessageSender:c}}const p=Object(o.jb)(e,t);if(p&&p.length){const t=g[p[0]],{canUnpin:s}=t&&Object(o.b)(e,t,a)||{};return{...j,pinnedMessageIds:p,canUnpin:s}}return j},(e,t)=>Object(b.l)(t,["openChatWithInfo","pinMessage","focusMessage","openChat","loadPinnedMessages","toggleLeftColumn","exitMessageSelectMode"]))(({chatId:e,threadId:t,messageListType:a,pinnedMessageIds:s,messagesById:r,canUnpin:o,topMessageSender:i,typingStatus:d,isSelectModeActive:b,isLeftColumnShown:u,isRightColumnShown:m,audioMessage:j,chat:g,chatsById:p,originChatId:f,messagesCount:I,isChatWithSelf:v,isChatWithBot:y,lastSyncTime:C,notifySettings:E,notifyExceptions:w,openChatWithInfo:S,pinMessage:M,focusMessage:k,openChat:N,loadPinnedMessages:P,toggleLeftColumn:T,exitMessageSelectMode:A})=>{const x=Object(oe.a)(),[R,L]=Object(c.r)(0),F=Array.isArray(s)?s[R]:s,D=r&&F?r[F]:void 0,B=Array.isArray(s)?s.length:s?1:0,U=g&&Object(h.l)(x,g).length,H=i?Object(h.V)(x,i):void 0;Object(c.n)(()=>{t===l.MAIN_THREAD_ID&&C&&P({chatId:e})},[e,P,C,t]),Object(c.n)(()=>{L(0)},[s]),Object(Ye.a)(e,F,D);const{width:G}=ze(),q=G<=n.Z,_=G>=n.db&&u,V=Object(c.q)(null),$=Object(c.q)(!0),z=Object(c.m)(()=>{S({id:e})},[S,e]),W=Object(c.m)(t=>{M({chatId:e,messageId:t,isUnpin:!0})},[M,e]),K=Object(c.m)(()=>{if(D){k({chatId:D.chatId,threadId:t,messageId:D.id});const e=Object(Qe.a)(B,R+1);L(e)}},[D,k,t,B,R]),Q=Object(c.m)(()=>{N({id:e,threadId:l.MAIN_THREAD_ID,type:"pinned"})},[N,e]),Y=Object(c.m)(()=>{if(O.g){const e=document.getElementById(n.v);e&&e.blur()}t!==l.MAIN_THREAD_ID||"thread"!==a?("scheduled"===a&&b&&A(),N({id:f,threadId:l.MAIN_THREAD_ID})):O.g?N({id:void 0}):T()},[N,f,t,a,T,b,A]),X=Object(c.p)(()=>{if(!q||!p)return;let e=!1;const t=Object.values(p).reduce((t,a)=>{if(Object(h.hb)(a))return t;const s=a.unreadCount||0;return!s||Object(h.Cb)(a,E,w)&&!a.unreadMentionsCount||(e=!0),t+s},0);return t?{isActive:e,totalCount:t}:void 0},[q,p,E,w]),J=G>=n.Z&&G<n.jb||G>n.db&&G<n.Z&&(!U||U>30),te=J||G>n.ab&&G<n.kb,{shouldRender:ae,transitionClassNames:se}=Object(ee.a)(Boolean(j)),ne=Object(Xe.a)(j),{shouldRender:re,transitionClassNames:ie}=Object(ee.a)(D&&!ae),le=Object(Xe.a)(D),be=Object(Xe.a)(H),ue=re&&le||ae&&ne;function me(){return"thread"===a&&t===l.MAIN_THREAD_ID?c.a.createElement(c.a.Fragment,null,q&&he(_,X),c.a.createElement("div",{className:"chat-info-wrapper",onClick:z},Object(h.lb)(e)?c.a.createElement(Ze.a,{userId:e,typingStatus:d,withFullInfo:y,withMediaViewer:!0,withUpdatingStatus:!0,noRtl:!0}):c.a.createElement(et.a,{chatId:e,typingStatus:d,noRtl:!0,withMediaViewer:!0,withFullInfo:!0,withUpdatingStatus:!0}))):"thread"===a?c.a.createElement(c.a.Fragment,null,he(),c.a.createElement("h3",null,x("CommentsCount",I))):"pinned"===a?c.a.createElement(c.a.Fragment,null,he(),c.a.createElement("h3",null,x("PinnedMessagesCount",I))):"scheduled"===a?c.a.createElement(c.a.Fragment,null,he(),c.a.createElement("h3",null,v?x("Reminders"):x("messages",I))):void 0}function he(e=!1,t){return c.a.createElement("div",{className:"back-button"},c.a.createElement(de.a,{round:!0,size:"smaller",color:"translucent",onClick:Y,ariaLabel:e?"Close":"Back"},c.a.createElement("div",{className:Object(Z.a)("animated-close-icon",!e&&"state-back")})),t&&c.a.createElement("div",{className:"unread-count "+(t.isActive?"active":"")},Object(Je.b)(t.totalCount)))}return Object(c.n)(()=>{const e=V.current;if(e)return te&&ue?void(m||J?($.current&&(e.classList.add("tools-stacked","animated"),$.current=!1),setTimeout(()=>{e.classList.remove("animated")},350)):(e.classList.remove("tools-stacked"),$.current=!0)):(e.classList.remove("tools-stacked","animated"),void($.current=!0))},[te,ue,J,m]),c.a.createElement("div",{className:"MiddleHeader",ref:V},c.a.createElement(ce.b,{name:"slide-fade",activeKey:"thread"===a?t:1},me),c.a.createElement("div",{className:"header-tools"},re&&le&&!ae&&c.a.createElement(ut,{key:e,message:le,count:B,index:R,customTitle:be,className:ie,onUnpinMessage:o?W:void 0,onClick:K,onAllPinnedClick:Q}),ae&&ne&&c.a.createElement(Ot,{key:Object(h.A)(ne),message:ne,className:se}),c.a.createElement(at,{chatId:e,threadId:t,messageListType:a})))})),gt=a(161);function pt(e){return"albumId"in e}function ft(e,t){let a,s=[],n={originalDate:e[0].date,datetime:Number(Object(R.j)(1e3*e[0].date)),senderGroups:[s]};const c=[n];return e.forEach((r,o)=>{r.isInAlbum?a?(a.messages.push(r),r.content.text&&(a.mainMessage=r)):a={albumId:r.groupedId,messages:[r],mainMessage:r}:s.push(r);const i=e[o+1];if(!a||i&&i.groupedId&&i.groupedId===a.albumId||(s.push(a),a=void 0),i){const e=Number(Object(R.j)(1e3*i.date));n.datetime!==e?(n={originalDate:i.date,datetime:e,senderGroups:[]},c.push(n),s=[],n.senderGroups.push(s)):(i.id===t||r.senderId!==i.senderId||r.isOutgoing!==i.isOutgoing||Object(h.db)(r)||Object(h.db)(i)||r.forwardInfo&&i.forwardInfo&&(r.forwardInfo.senderUserId!==i.forwardInfo.senderUserId||r.forwardInfo.fromChatId!==i.forwardInfo.fromChatId||r.forwardInfo.hiddenUserName!==i.forwardInfo.hiddenUserName)||r.inlineButtons||i.inlineButtons)&&(s=[],n.senderGroups.push(s))}}),c}var It=a(108);function vt(){const[e,t]=Object(se.a)(!1),a=(s=1e3,n=!1,Object(c.p)(()=>Object(p.a)(e=>e(),s,n,r),[s,n,r]));var s,n,r;return{isScrolled:e,updateStickyDates:Object(c.m)((e,s)=>{t(),document.body.classList.contains("is-scrolling-messages")||Object(p.b)(()=>{document.body.classList.add("is-scrolling-messages")}),a(()=>{Object(p.b)(()=>{const t=document.querySelector(".stuck");t&&t.classList.remove("stuck");const a=function(e,t){const a=e.querySelectorAll(".sticky-date"),s=e.scrollTop;return Array.from(a).find(e=>{const{offsetTop:a,offsetHeight:n}=e,c=a-s;return-n<=c&&c<=(t?60:10)})}(e,s);a&&a.classList.add("stuck"),document.body.classList.remove("is-scrolling-messages")})})},[t,a])}}var yt=a(157),Ct=a(126);let Et=!1;var wt=({containerRef:e,className:t,messageIds:a,focusingId:s,loadMoreForwards:r,loadMoreBackwards:o,isViewportNewest:i,firstUnreadId:l,onFabToggle:d,onNotchToggle:b,children:u})=>{const m=Object(c.q)(null),h=Object(c.q)(null),O=Object(c.q)(null),j=Object(c.m)(()=>{if(Et)return;if(!a||!a.length)return d(!1),void b(!1);if(!i)return d(!0),void b(!0);const{offsetHeight:t,scrollHeight:s,scrollTop:n}=e.current,c=s-n-t,r=c<=0;d(l?!r:!(c<=50)),b(!r)},[a,i,e,d,l,b]),{observe:g,freeze:p,unfreeze:f}=Object(It.a)({rootRef:e,margin:n.U},t=>{if(!r||!o)return;const a=t.find(({isIntersecting:e})=>e);if(!a)return;const{target:s}=a;"backwards-trigger"===s.className?(Object(yt.a)(e.current),o()):"forwards-trigger"===s.className&&(Object(yt.a)(e.current),r())});Object(It.c)(m,g),Object(It.c)(h,g);const{observe:I,freeze:v,unfreeze:y}=Object(It.a)({rootRef:e,margin:50},j);Object(It.c)(O,I);const{observe:C}=Object(It.a)({rootRef:e},j);return Object(It.c)(O,C),Object(fe.a)(()=>{s?(p(),v()):(y(),f())},[s]),Object(fe.a)(()=>{Et=!0,setTimeout(()=>{Et=!1},100)},[a]),Object(c.n)(j,[l]),c.a.createElement("div",{className:t,teactFastList:!0},c.a.createElement("div",{ref:m,key:"backwards-trigger",className:"backwards-trigger"}),u,c.a.createElement("div",{ref:h,key:"forwards-trigger",className:"forwards-trigger"}),c.a.createElement("div",{ref:O,key:"fab-trigger",className:"fab-trigger"}))},St=a(147),Mt=a(148);function kt(e){return"number"==typeof e}function Nt(e,t){return e?t?238:175:100}function Pt(e){const t=Object(h.tb)(e),a=Object(h.qb)(e),s=Object(h.G)(e)||Object(h.R)(e),n=Object(h.P)(e),c=Boolean(Object(h.R)(e)),{width:r,height:o}=s?Object(st.f)(s,t,a,c):Object(st.h)(n,t,a),i=Nt(Boolean(Object(h.O)(e)));let l=1;r<i&&i-r<12&&(l=i/r),o*l<90&&90-o*l<12&&(l=90/o);const d=Math.round(r*l),b=Math.round(o*l);return{width:d,height:b,isSmall:d<i||b<90}}const Tt=0,At=1,xt=2,Rt=4,Lt=8;function Ft(e,t){return e.reduce((e,t)=>e+t,t)}function Dt(e,t,a){return e<t?t:e>a?a:e}function Bt(e){const t={width:0,height:0};return e.forEach(({dimensions:e,sides:a})=>{a&xt&&(t.width=e.width+e.x),a&Rt&&(t.height=e.height+e.y)}),t}function Ut(e,t,a,s){const c=a.messages.map(e=>{const t=Pt(e);return t.width/t.height});const r=function(e){return e.map(e=>e>1.2?"w":e<.8?"n":"q").join("")}(c),o=function(e){return e.reduce((e,t)=>t+e,1)/e.length}(c),i=c.length,l=c.some(e=>e>2),d=function(e,t,a){return a<=n.db?a/100*69-(t?1.625:0)*st.c:((e?30:29)-(t?1.625:0))*st.c}(e,t,s);let b;const u={ratios:c,proportions:r,averageRatio:o,maxWidth:d,minWidth:100,maxHeight:d,spacing:2};return b=i>=5||l?function({ratios:e,averageRatio:t,maxWidth:a,minWidth:s,spacing:n,maxHeight:c=4*a/3}){const r=function(e,t){return e.map(e=>t>1.1?Dt(e,1,2.75):Dt(e,.6667,1))}(e,t),o=e.length,i=new Array(o),l=[],d=e=>{const t=[];let s=0;e.forEach(e=>{t.push(((e,t)=>{const s=Ft(r.slice(e,e+t),0);return(a-(t-1)*n)/s})(s,e)),s+=e}),l.push({lineCounts:e,heights:t})};for(let e=1;e!==o;++e){const t=o-e;e<=3&&t<=3&&d([e,t])}for(let e=1;e!==o-1;++e)for(let a=1;a!==o-e;++a){const s=o-e-a;e<=3&&a<=(t<.85?4:3)&&s<=3&&d([e,a,s])}for(let e=1;e!==o-1;++e)for(let t=1;t!==o-e;++t)for(let a=1;a!==o-e-t;++a){const s=o-e-t-a;e<=3&&t<=3&&a<=3&&s<=4&&d([e,t,a,s])}let b,u=0;for(let e=0;e<l.length;e++){const{heights:t,lineCounts:a}=l[e],r=a.length,o=Ft(t,0)+n*(r-1),i=Math.min(...t)<s?1.5:1,d=(()=>{for(let e=1;e!==r;++e)if(a[e-1]>a[e])return 1.5;return 1})(),m=Math.abs(o-c)*i*d;(!b||m<u)&&(b=l[e],u=m)}const m=b.lineCounts,h=b.heights,O=m.length;let j=0,g=0;for(let e=0;e!==O;++e){const t=m[e],s=h[e],c=Math.round(s);let o=0;for(let l=0;l!==t;++l){const d=Tt|(0===e?At:Tt)|(e===O-1?Rt:Tt)|(0===l?Lt:Tt)|(l===t-1?xt:Tt),b=r[j],u=l===t-1?a-o:Math.round(b*s);i[j]={dimensions:{x:o,y:g,width:u,height:c},sides:d},o+=u+n,++j}g+=c+n}return i}(u):2===i?function(e){const{ratios:t,proportions:a,averageRatio:s}=e;return"ww"===a&&s>1.4&&t[1]-t[0]<.2?function(e){const{ratios:t,maxWidth:a,spacing:s,maxHeight:n}=e,c=Math.round(Math.min(a/t[0],Math.min(a/t[1],(n-s)/2)));return[{dimensions:{x:0,y:0,width:a,height:c},sides:Lt|At|xt},{dimensions:{x:0,y:c+s,width:a,height:c},sides:Lt|Rt|xt}]}(e):"ww"===a||"qq"===a?function(e){const{ratios:t,maxWidth:a,spacing:s,maxHeight:n}=e,c=(a-s)/2,r=Math.round(Math.min(c/t[0],Math.min(c/t[1],n)));return[{dimensions:{x:0,y:0,width:c,height:r},sides:At|Lt|Rt},{dimensions:{x:c+s,y:0,width:c,height:r},sides:At|xt|Rt}]}(e):function(e){const{ratios:t,minWidth:a,maxWidth:s,spacing:n,maxHeight:c}=e,r=Math.round(1.5*a),o=Math.min(Math.round(Math.max(.4*(s-n),(s-n)/t[0]/(1/t[0]+1/t[1]))),s-n-r),i=s-o-n,l=Math.min(c,Math.round(Math.min(i/t[0],o/t[1])));return[{dimensions:{x:0,y:0,width:i,height:l},sides:At|Lt|Rt},{dimensions:{x:i+n,y:0,width:o,height:l},sides:At|xt|Rt}]}(e)}(u):3===i?function(e){const{proportions:t}=e;return"n"===t[0]?function(e){const{maxHeight:t,spacing:a,ratios:s,maxWidth:n,minWidth:c}=e,r=t,o=Math.round(Math.min((t-a)/2,s[1]*(n-a)/(s[2]+s[1]))),i=r-o-a,l=Math.max(c,Math.round(Math.min((n-a)/2,Math.min(o*s[2],i*s[1])))),d=Math.min(Math.round(r*s[0]),n-a-l);return[{dimensions:{x:0,y:0,width:d,height:r},sides:At|Lt|Rt},{dimensions:{x:d+a,y:0,width:l,height:i},sides:At|xt},{dimensions:{x:d+a,y:i+a,width:l,height:o},sides:Rt|xt}]}(e):function(e){const{maxWidth:t,ratios:a,maxHeight:s,spacing:n}=e,c=t,r=Math.round(Math.min(c/a[0],.66*(s-n))),o=(t-n)/2,i=Math.min(s-r-n,Math.round(Math.min(o/a[1],o/a[2])));return[{dimensions:{x:0,y:0,width:c,height:r},sides:Lt|At|xt},{dimensions:{x:0,y:r+n,width:o,height:i},sides:Rt|Lt},{dimensions:{x:o+n,y:r+n,width:c-o-n,height:i},sides:Rt|xt}]}(e)}(u):function(e){const{proportions:t}=e;return"w"===t[0]?function({maxWidth:e,ratios:t,spacing:a,maxHeight:s,minWidth:n}){const c=e,r=Math.round(Math.min(c/t[0],.66*(s-a))),o=Math.round((e-2*a)/(t[1]+t[2]+t[3])),i=Math.max(n,Math.round(Math.min(.4*(e-2*a),o*t[1]))),l=Math.round(Math.max(Math.max(n,.33*(e-2*a)),o*t[3])),d=c-i-l-2*a,b=Math.min(s-r-a,o);return[{dimensions:{x:0,y:0,width:c,height:r},sides:Lt|At|xt},{dimensions:{x:0,y:r+a,width:i,height:b},sides:Rt|Lt},{dimensions:{x:i+a,y:r+a,width:d,height:b},sides:Rt},{dimensions:{x:i+a+d+a,y:r+a,width:l,height:b},sides:xt|Rt}]}(e):function({maxHeight:e,ratios:t,maxWidth:a,spacing:s,minWidth:n}){const c=e,r=Math.round(Math.min(c*t[0],.6*(a-s))),o=Math.round((e-2*s)/(1/t[1]+1/t[2]+1/t[3])),i=Math.round(o/t[1]),l=Math.round(o/t[2]),d=c-i-l-2*s,b=Math.max(n,Math.min(a-r-s,o));return[{dimensions:{x:0,y:0,width:r,height:c},sides:At|Lt|Rt},{dimensions:{x:r+s,y:0,width:b,height:i},sides:At|xt},{dimensions:{x:r+s,y:i+s,width:b,height:l},sides:xt},{dimensions:{x:r+s,y:i+l+2*s,width:b,height:d},sides:Rt|xt}]}(e)}(u),{layout:b,containerStyle:Bt(b)}}let Ht;function Gt(e){return Ht||(Ht=document.createElement("span"),Ht.style.font='400 12px Roboto, "Helvetica Neue", "Apple Color Emoji", sans-serif',Ht.style.whiteSpace="nowrap",Ht.style.position="absolute",Ht.style.left="-999px",Ht.style.opacity=".01",document.body.appendChild(Ht)),Ht.innerHTML=e,Ht.offsetWidth}function qt(e,t,a,s,n){Object(c.o)(()=>{if(a&&e.current){const t=e.current.closest(".MessageList");Object(Ct.a)(t,e.current,n?"end":"center",20,void 0===s?1500:1e3,s)}},[e,t,a,s,n])}var _t=a(113),Vt=a(68);var $t=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"ContextMenuContainer",!t);return a?c.a.createElement(a,e):void 0});var zt=Object(c.h)(Object(s.h)((e,{message:t})=>{const a=t.senderId,{targetUserId:s,targetChatId:n}=t.content.action||{},c=t.replyToMessageId,r=c?Object(o.k)(e,t.chatId,c):void 0,i=Object(o.U)(e,t),{direction:l,noHighlight:d}=i&&e.focusedMessage||{},b=Object(o.f)(e,t.chatId);return{sender:b&&(Object(h.jb)(b)||a===t.chatId)?b:a?Object(o.Gb)(e,a):void 0,...s&&{targetUser:Object(o.Gb)(e,s)},targetChatId:n,targetMessage:r,isFocused:i,...i&&{focusDirection:l,noFocusHighlight:d}}})(({message:e,observeIntersection:t,isEmbedded:a,appearanceOrder:s=0,isLastInList:n,sender:r,targetUser:o,targetMessage:i,targetChatId:l,isFocused:d,focusDirection:b,noFocusHighlight:u})=>{const m=Object(c.q)(null);Object(It.c)(m,t),Object(Ye.a)(e.chatId,e.replyToMessageId,i),qt(m,e.chatId,d,b,u);const h=Object(oe.a)(),O=s<=0,[j,g]=Object(se.a)(O);Object(c.n)(()=>{O||setTimeout(g,10*s)},[s,g,O]);const{transitionClassNames:p}=Object(ee.a)(j,void 0,O,!1),f=Object(Vt.a)(h,e,r,o,i,l,a?{isEmbedded:!0,asPlain:!0}:void 0),{isContextMenuOpen:I,contextMenuPosition:v,handleBeforeContextMenu:y,handleContextMenu:C,handleContextMenuClose:E,handleContextMenuHide:w}=Object(St.a)(m),S=void 0!==v;if(a)return c.a.createElement("span",{className:"embedded-action-message"},Object(nt.a)(f));const M=Object(Z.a)("ActionMessage message-list-item",d&&!u&&"focused",S&&"has-menu-open",n&&"last-in-list",p);return c.a.createElement("div",{ref:m,id:"message"+e.id,className:M,"data-message-id":e.id,onMouseDown:y,onContextMenu:C},c.a.createElement("span",null,f),v&&c.a.createElement($t,{isOpen:I,anchor:v,message:e,messageListType:"thread",onClose:E,onCloseAnimationEnd:w}))}));a(219);var Wt=({className:e,message:t,sender:a,title:s,customText:n,observeIntersection:r,onClick:o})=>{const i=Object(c.q)(null),l=Object(It.b)(i,r),d=Object(ct.a)(t&&Object(h.D)(t,"pictogram"),!l),b=t&&"sticker-reply-thumb"+t.id,u=ot(t),m=Boolean(t&&Object(h.I)(t)),O=Object(oe.a)(),j=a&&Object(h.V)(O,a);return c.a.createElement("div",{ref:i,className:Object(Z.a)("EmbeddedMessage",e),onClick:t?o:void 0},u&&function(e,t,a,s){const{width:n,height:r}=Object(st.k)();return c.a.createElement("img",{id:e,src:a||t,width:n,height:r,alt:"",className:s?"round":""})}(b,u,d,m),c.a.createElement("div",{className:"message-text"},c.a.createElement("p",{dir:"auto"},t?Object(h.db)(t)?c.a.createElement(zt,{message:t,isEmbedded:!0}):Object(nt.a)(Object(h.N)(O,t,Boolean(u))):n||" "),c.a.createElement("div",{className:"message-title",dir:"auto"},Object(nt.a)(j||s||" "))))},Kt=a(162),Qt=a(169),Yt=a(174);a(223);var Xt=Object(c.h)(({message:e,outgoingStatus:t,signature:a,onClick:s})=>{const n=Object(oe.a)();return c.a.createElement("span",{className:"MessageMeta",dir:n.isRtl?"rtl":"ltr",onClick:s},Boolean(e.views)&&c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"message-views"},Object(Je.b)(e.views)),c.a.createElement("i",{className:"icon-channelviews"})),a&&c.a.createElement("span",{className:"message-signature"},Object(nt.a)(a)),c.a.createElement("span",{className:"message-time"},e.isEdited&&n("EditedMessage")+" ",Object(R.h)(1e3*e.date)),t&&c.a.createElement(Yt.a,{status:t}))}),Jt=a(115),Zt=a(117),ea=a(163);a(224);var ta=({message:e,observeIntersection:t,observeIntersectionForPlaying:a,shouldLoop:s,lastSyncTime:r})=>{const o=Object(c.q)(null),[i,l,d]=Object(se.a)(),b=e.content.sticker,{isAnimated:u,stickerSetId:m}=b,O=m===n.S,j=Object(It.b)(o,t),g=Object(It.b)(o,a),p=b.isPreloadedGlobally?"sticker"+b.id:Object(h.D)(e,"inline"),f=ot(e),I=Object(ct.a)(p,!j,Object(h.C)(e,"inline",!0),r),v=Boolean(I),[y,C]=Object(se.a)(v),E=u?y:v,{shouldRenderFullMedia:w,transitionClassNames:S}=Object(Jt.a)(E,"slow"),{width:M,height:k}=Object(st.l)(b),N=Object(Z.a)("thumbnail",!f&&"empty"),P=Object(Z.a)("Sticker media-inner",O&&"inactive");return c.a.createElement("div",{ref:o,className:P,onClick:O?void 0:l},!E&&c.a.createElement("img",{id:"sticker-thumb-"+e.id,src:f,width:M,height:k,alt:"",className:N}),!u&&w&&c.a.createElement("img",{id:"sticker-"+e.id,src:I,width:M,height:k,alt:"",className:Object(Z.a)("full-media",S)}),u&&v&&c.a.createElement(Zt.a,{key:p,className:Object(Z.a)("full-media",S),id:p,animationData:I,size:M,play:g,noLoop:!s,onLoad:C}),c.a.createElement(ea.a,{isOpen:i,fromSticker:b,onClose:d}))},aa=a(130),sa=a(122),na=a(164);function ca(e,t){return Object(na.a)(Object(h.E)(e),Boolean(t),O.g&&!O.c)}var ra=a(38);var oa=async(e,t,a,s)=>s?"rgba(255,255,255,1)":async function(e,t){const a=new Image;a.src=e,a.width||await new Promise(e=>{a.onload=e});const s=document.createElement("canvas"),n=s.getContext("2d");s.width=a.width,s.height=a.height,n.drawImage(a,0,0,a.width,a.height);const c=t?a.width-1:0,r=a.height-1;return`rgba(${Array.from(n.getImageData(c,r,1,1).data).join(",")})`}(e,t);var ia=a(123);var la=({id:e,message:t,observeIntersection:a,shouldAutoLoad:s,isInSelectMode:n,isSelected:r,uploadProgress:o,size:i="inline",dimensions:l,nonInteractive:d,shouldAffectAppendix:b,onClick:u,onCancelUpload:m})=>{const O=Object(c.q)(null),j=(Object(h.G)(t)||Object(h.R)(t)).blobUrl,g=Object(It.b)(O,a),[p,f]=Object(c.r)(s),I=p&&g,{mediaData:v,downloadProgress:y}=Object(sa.a)(Object(h.D)(t,i),!I),C=j||v,E=ca(t,C),{isUploading:w,isTransferring:S,transferProgress:M}=Object(h.s)(t,o||y,I&&!C),k=!1===Object(ra.a)(p),{shouldRender:N,transitionClassNames:P}=Object(ee.a)(S,void 0,k,"slow"),{shouldRenderThumb:T,shouldRenderFullMedia:A,transitionClassNames:x}=Object(Jt.a)(C,"slow"),R=Object(c.m)(()=>{w?m&&m(t):C?u&&u(t.id):f(e=>!e)},[C,w,t,m,u]),L=Object(h.tb)(t);Object(c.o)(()=>{if(!b)return;const e=O.current.closest(".message-content");C?oa(C,L,0,r).then(t=>{e.style.setProperty("--appendix-bg",t),e.setAttribute("data-has-custom-appendix","")}):e.classList.add("has-appendix-thumb")},[C,L,b,n,r]);const{width:F,height:D,isSmall:B}=l||Pt(t),U=Object(Z.a)("media-inner",!w&&!d&&"interactive",B&&"small-image",F===D&&"square-image"),H=l?`width: ${F}px; height: ${D}px; left: ${l.x}px; top: ${l.y}px;`:"";return c.a.createElement("div",{id:e,ref:O,className:U,style:H,onClick:w?void 0:R},T&&c.a.createElement("canvas",{ref:E,className:"thumbnail",style:`width: ${F}px; height: ${D}px`}),A&&c.a.createElement("img",{src:C,className:"full-media "+x,width:F,height:D,alt:""}),N&&c.a.createElement("div",{className:"media-loading "+P},c.a.createElement(ia.a,{progress:M,onClick:w?R:void 0})),!C&&!p&&c.a.createElement("i",{className:"icon-download"}),S&&c.a.createElement("span",{className:"message-upload-progress"},Math.round(100*M),"%"))},da=a(139),ba=a(138);function ua(e,t){const a=Object(c.q)();a.current=t;const s=Object(c.m)(()=>{e.current&&e.current.pause()},[e]),n=Object(c.m)(()=>{e.current&&a.current&&Object(ba.a)(e.current)},[e]);Object(J.a)(s,n)}var ma=a(149),ha=(e,t=!1)=>{const a=Object(c.q)(!1),s=Object(c.q)(!1),n=Object(c.m)(()=>{s.current=!0,t&&e.current&&(a.current||(a.current=!e.current.paused),e.current.pause())},[t,e]),r=Object(c.m)(()=>{t&&e.current&&a.current&&document.body.contains(e.current)&&Object(ba.a)(e.current),a.current=!1,s.current=!1},[t,e]),o=Object(c.m)(()=>{Object(p.b)(r)},[r]);document.hasFocus()||n(),Object(te.a)(n,o)};function Oa(){return(Oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}var ja=({id:e,message:t,observeIntersection:a,shouldAutoLoad:s,shouldAutoPlay:n,uploadProgress:r,lastSyncTime:o,dimensions:i,onClick:l,onCancelUpload:d})=>{const b=Object(c.q)(null),u=Object(c.q)(null),m=t.content.video,O=m.blobUrl,j=Boolean(O)||Object(h.b)(m),g=Object(It.b)(b,a),[p,f]=Object(c.r)(s),I=Boolean(p&&g&&o),[v,y]=Object(c.r)(n),C=Object(ct.a)(Object(h.D)(t,"pictogram"),!(g&&o),Object(h.C)(t,"pictogram"),o),E=ca(t),{mediaData:w,downloadProgress:S}=Object(sa.a)(Object(h.D)(t,"inline"),!I,Object(h.C)(t,"inline"),o),M=O||w,k=Boolean(j&&g&&M),{isBuffered:N,bufferingHandlers:P}=Object(da.a)(!s),{isUploading:T,isTransferring:A,transferProgress:x}=Object(h.s)(t,r||S,I&&j&&!N),L=!1===Object(ra.a)(p),{shouldRender:F,transitionClassNames:D}=Object(ee.a)(A,void 0,L),{shouldRenderThumb:B,transitionClassNames:U}=Object(Jt.a)(M,"slow"),[H,G]=Object(c.r)(0),q=Object(c.m)(e=>{G(Math.max(0,e.currentTarget.currentTime-1))},[]),_=Object(h.tb)(t),V=Object(h.qb)(t),{width:$,height:z}=i||Object(st.h)(m,_,V);ua(u,Boolean(k&&n)),ha(u,v),Object(ma.a)(u,[k]);const W=Object(c.m)(()=>{T?d&&d(t):j&&!M?f(e=>!e):j&&M&&!v?(y(!0),u.current.play()):l&&l(t.id)},[T,j,M,v,l,d,t]),K=Object(Z.a)("media-inner dark",!T&&"interactive"),Q=Object(Z.a)("full-media",U),Y=i?`width: ${$}px; height: ${z}px; left: ${i.x}px; top: ${i.y}px;`:"",X=k,J=!j&&w,te=!j||p&&!v&&!F,ae=j&&!p;return c.a.createElement("div",{ref:b,id:e,className:K,style:Y,onClick:T?void 0:W},(!k||B)&&c.a.createElement("canvas",{ref:E,className:"thumbnail",style:`width: ${$}px; height: ${z}px;`}),C&&c.a.createElement("img",{src:C,className:"thumbnail",style:`width: ${$}px; height: ${z}px;`,alt:""}),X&&c.a.createElement("video",Oa({ref:u,className:Q,width:$,height:z,autoPlay:v,muted:!0,loop:!0,playsInline:!0},P,{onTimeUpdate:q}),c.a.createElement("source",{src:M})),J&&c.a.createElement("img",{src:w,className:"full-media "+U,width:$,height:z,alt:""}),te&&c.a.createElement("i",{className:"icon-large-play"}),F&&c.a.createElement("div",{className:"media-loading "+D},c.a.createElement(ia.a,{progress:x,onClick:T?W:void 0})),ae&&c.a.createElement("i",{className:"icon-download"}),A&&!j?c.a.createElement("span",{className:"message-upload-progress"},Math.round(100*x),"%"):A&&j?c.a.createElement("span",{className:"message-upload-progress"},"..."):c.a.createElement("div",{className:"message-media-duration"},m.isGif?"GIF":Object(R.e)(m.duration-H)))},ga=a(18);a(226);var pa=Object(s.h)((e,{contact:t})=>({user:Object(o.Gb)(e,t.userId)}),(e,t)=>Object(b.l)(t,["openUserInfo"]))(({contact:e,user:t,openUserInfo:a})=>{const{firstName:s,lastName:n,phoneNumber:r,userId:o}=e,i=Object(c.m)(()=>{a({id:o})},[a,o]);return c.a.createElement("div",{className:Object(Z.a)("Contact",Boolean(o)&&"interactive"),onClick:o?i:void 0},c.a.createElement(_t.a,{size:"large",user:t,text:s||n}),c.a.createElement("div",{className:"contact-info"},c.a.createElement("div",{className:"contact-name"},s," ",n),c.a.createElement("div",{className:"contact-phone"},Object(ga.c)(r))))}),fa=a(48);var Ia=Object(c.h)(({id:e,options:t,selected:a=[],disabled:s,round:n,loadingOptions:r,onChange:o})=>{const[i,l]=Object(c.r)([]),d=Object(c.m)(e=>{const{value:t,checked:a}=e.currentTarget;let s;s=a?[...i,t]:i.filter(e=>e!==t),l(s),o(s)},[o,i]);return c.a.createElement("div",{id:e,className:"radio-group"},t.map(e=>c.a.createElement(fa.a,{label:e.label,subLabel:e.subLabel,value:e.value,checked:-1!==a.indexOf(e.value),disabled:s,round:n,isLoading:r?-1!==r.indexOf(e.value):void 0,onChange:d})))}),va=a(128),ya=a(182);a(229);function Ca(e,t){return t>0?(e/t*100).toFixed():0}var Ea=({answer:e,voteResults:t,totalVoters:a,maxVotersCount:s,correctResults:n,shouldAnimate:r})=>{const o=t&&t.find(t=>t.option===e.option),i=0===n.length||-1!==n.indexOf(e.option),l=n.length>0&&i||o&&o.isChosen,d=o?Ca(o.votersCount,a||0):0,[b,u]=Object(c.r)(r?0:d),m=Object(c.q)(null),h=o?Ca(o.votersCount,s||0):0,O=b<d;if(Object(c.n)(()=>{r&&u(d)},[r,d]),Object(c.n)(()=>{const e=m.current;if(e&&r){const t=e.firstElementChild,a=O?"":"stroke-dasharray: 100% 200%; stroke-dashoffset: -44";t?t.setAttribute("style",a):e.innerHTML=`\n          <svg class="poll-line" xmlns="http://www.w3.org/2000/svg" style="${a}">\n            <path d="M4.47 5.33v13.6a9 9 0 009 9h13"/>\n          </svg>`}},[O,r]),!t||!o)return;const j=`width: ${h}%; transform:scaleX(${O?0:1})`;return c.a.createElement("div",{className:"PollOption",dir:"ltr"},c.a.createElement("div",{className:"poll-option-share "+("100"===d?"limit-width":"")},d,"%",l&&c.a.createElement("span",{className:Object(Z.a)("poll-option-chosen",!i&&"wrong",r&&"animate")},c.a.createElement("i",{className:i?"icon-check":"icon-close"}))),c.a.createElement("div",{className:"poll-option-right"},c.a.createElement("div",{className:"poll-option-text",dir:"auto"},Object(nt.a)(e.text)),c.a.createElement("div",{className:Object(Z.a)("poll-option-answer",l&&!i&&"wrong")},c.a.createElement("div",{className:"poll-option-corner",ref:m}),c.a.createElement("div",{className:"poll-option-line",style:j}))))};a(230);var wa=Object(c.h)(Object(s.h)((e,{poll:t})=>{const{recentVoterIds:a}=t.results,{byId:s}=e.users;return a&&0!==a.length?{recentVoterIds:a,usersById:s}:{}},(e,t)=>Object(b.l)(t,["loadMessage","openPollResults"]))(({message:e,poll:t,recentVoterIds:a,usersById:s,loadMessage:n,onSendVote:r,openPollResults:o})=>{const{id:i,chatId:l}=e,{summary:d,results:b}=t,[u,m]=Object(c.r)(!1),[h,O]=Object(c.r)([]),[j,g]=Object(c.r)(!1),[p,f]=Object(c.r)(!1),[I,v]=Object(c.r)(!d.closed&&d.closeDate&&d.closeDate>0?Math.min(d.closeDate-Math.floor(Date.now()/1e3),d.closePeriod):0),y=Object(c.q)(null),{results:C,totalVoters:E}=b,w=C&&C.some(e=>e.isChosen),S=!d.closed&&!w,M=!S&&d.isPublic&&Number(b.totalVoters)>0,k=S&&d.multipleChoice,N=C?Math.max(...C.map(e=>e.votersCount)):E,P=C?C.reduce((e,t)=>(t.isCorrect&&e.push(t.option),e),[]):[],T=d.answers.map(e=>({label:e.text,value:e.option,hidden:Boolean(d.quiz&&d.closePeriod&&I<=0)}));Object(c.n)(()=>{u&&t.results.results&&t.results.results.some(e=>e.isChosen)&&m(!1)},[u,t.results.results]),Object(c.n)(()=>{I>0&&setTimeout(()=>v(I-1),1e3);const e=y.current;if(e){const t=12*Math.PI,a=e.lastElementChild,s=e.firstElementChild;if(I<=5&&e.classList.add("hurry-up"),a&&s){const e=(d.closePeriod-I)/d.closePeriod*t;s.textContent=Object(R.e)(I),a.firstElementChild.setAttribute("stroke-dashoffset","-"+e)}else e.innerHTML=`\n        <span>${Object(R.e)(I)}</span>\n        <svg width="16px" height="16px">\n          <circle cx="8" cy="8" r="6" class="poll-countdown-progress" transform="rotate(-90, 8, 8)"\n            stroke-dasharray="${t} ${t}"\n            stroke-dashoffset="0"\n          />\n        </svg>`}},[I,d.closePeriod]),Object(c.n)(()=>{d.quiz&&(I<=0||w&&!d.closed)&&n({chatId:l,messageId:i})},[l,I,w,n,i,d.closed,d.quiz]),Object(c.n)(()=>{let e;return d.quiz&&!d.closed&&d.closePeriod&&d.closePeriod>0&&(e=window.setTimeout(()=>{n({chatId:l,messageId:i})},1e3*d.closePeriod)),()=>{e&&window.clearTimeout(e)}},[S,l,n,i,d.closePeriod,d.closed,d.quiz]);const A=Object(c.p)(()=>a?a.reduce((e,t)=>{const a=s[t];return a&&e.push(a),e},[]):[],[s,a]),x=Object(c.m)(e=>{O([e]),m(!0),f(!0),r([e])},[r]),L=Object(c.m)(e=>{O(e)},[]),F=Object(c.m)(()=>{m(!0),f(!0),r(h)},[r,h]),D=Object(c.m)(()=>{o({chatId:l,messageId:i})},[l,i,o]),B=Object(c.m)(()=>{g(!0)},[]),U=Object(c.m)(()=>{g(!1),f(!1)},[]);Object(c.n)(()=>{if(p&&w&&d.quiz&&b.results&&t.results.solution){b.results.find(e=>e.isChosen&&e.isCorrect)||g(!0)}},[w,p,b.results,d.quiz,t.results.solution]);const H=Object(oe.a)();return c.a.createElement("div",{className:"Poll",dir:H.isRtl?"auto":"ltr"},j&&t.results.solution&&c.a.createElement(ya.a,{message:Object(Mt.b)(t.results.solution,t.results.solutionEntities),duration:5e3,onDismiss:U,containerId:"#middle-column-portals"}),c.a.createElement("div",{className:"poll-question"},Object(nt.a)(d.question)),c.a.createElement("div",{className:"poll-type"},H(function(e){if(void 0===e.isPublic)return" ";if(e.quiz)return e.isPublic?"QuizPoll":"AnonymousQuizPoll";if(e.closed)return"FinalResults";return e.isPublic?"PublicPoll":"AnonymousPoll"}(d)),A.length>0&&c.a.createElement("div",{className:"poll-recent-voters"},A.map(e=>c.a.createElement(_t.a,{size:"micro",user:e}))),I>0&&S&&c.a.createElement("div",{ref:y,className:"poll-countdown"}),d.quiz&&t.results.solution&&!S&&c.a.createElement(de.a,{round:!0,size:"tiny",color:"translucent",className:"poll-quiz-help",disabled:j,onClick:B,ariaLabel:"Show Solution"},c.a.createElement("i",{className:"icon-lamp"}))),S&&c.a.createElement("div",{className:"poll-answers"},k?c.a.createElement(Ia,{options:T,onChange:L,disabled:e.isScheduled||u,loadingOptions:u?h:void 0,round:!0}):c.a.createElement(va.a,{name:"poll-"+i,options:T,onChange:x,disabled:e.isScheduled||u,loadingOption:u?h[0]:void 0})),!S&&c.a.createElement("div",{className:"poll-results"},d.answers.map((function(e){return c.a.createElement(Ea,{key:e.option,shouldAnimate:p,answer:e,voteResults:C,totalVoters:E,maxVotersCount:N,correctResults:P})}))),!M&&!k&&c.a.createElement("div",{className:"poll-voters-count"},function(e,t,a){if(!a)return e(t?"Chat.Quiz.TotalVotesEmpty":"Chat.Poll.TotalVotesResultEmpty");return e(t?"Answer":"Vote",a,"i")}(H,d.quiz,b.totalVoters)),k&&c.a.createElement(de.a,{isText:!0,disabled:0===h.length,size:"tiny",onClick:F},H("PollSubmitVotes")),M&&c.a.createElement(de.a,{isText:!0,size:"tiny",onClick:D},H("PollViewResults")))})),Sa=a(41),Ma=a(58);a(231);var ka=Object(c.h)(({message:e,observeIntersection:t,shouldAutoLoad:a,inPreview:s,onMediaClick:n,onCancelMediaTransfer:r})=>{const o=Object(h.Q)(e);let i=!1;if(o&&o.photo){const{width:t,height:a}=Pt(e);i=t===a}const l=Object(c.m)(()=>{n()},[n]);if(!o)return;const{siteName:d,url:b,displayUrl:u,title:m,description:O,photo:j}=o,g=j&&n&&!i&&!o.hasDocument,p=Object(Sa.a)(O,170),f=Object(Z.a)("WebPage",j?i&&"with-square-photo":!s&&"without-photo");return c.a.createElement("div",{className:f,"data-initial":(d||u)[0],dir:"auto"},j&&c.a.createElement(la,{message:e,observeIntersection:t,shouldAutoLoad:a,size:i?"pictogram":"inline",nonInteractive:!g,onClick:g?l:void 0,onCancelUpload:r}),c.a.createElement("div",{className:"WebPage-text"},c.a.createElement(Ma.a,{className:"site-name",url:b,text:d||u}),!s&&m&&c.a.createElement("p",{className:"site-title"},Object(nt.a)(m)),p&&c.a.createElement("p",{className:"site-description"},Object(nt.a)(p,["emoji","br"]))))});a(232);var Na=Object(c.h)(({message:e})=>{const t=Object(h.z)(e),{title:a,text:s,description:n,photoUrl:r}=t;return c.a.createElement("div",{className:"Invoice"},a&&c.a.createElement("p",{className:"title"},Object(nt.a)(a)),s&&c.a.createElement("p",null,Object(nt.a)(s,["emoji","br"])),c.a.createElement("div",{className:"description "+(r?"has-image":"")},r&&c.a.createElement("img",{className:"invoice-image",src:r,alt:""}),n&&c.a.createElement("p",{className:"description-text"},Object(nt.a)(n,["emoji","br"]))))});function Pa(e){return Object(c.h)(Object(s.h)((e,t)=>{const{message:a}=t;return{isInSelectMode:Object(o.S)(e),isSelected:Object(o.V)(e,a.id)}},(e,t)=>Object(b.l)(t,["toggleMessageSelection"]))(t=>{const{isInSelectMode:a,isSelected:s,message:n,toggleMessageSelection:r,dimensions:o}=t,i=Object(c.m)(e=>{e.stopPropagation(),r({messageId:n.id,withShift:e&&e.shiftKey})},[r,n]),l=Object(c.p)(()=>({...t,isInSelectMode:a,isSelected:s,dimensions:{...t.dimensions,x:0,y:0},onClick:a?void 0:t.onClick}),[t,a,s]);return c.a.createElement("div",{className:Object(Z.a)("album-item-select-wrapper",s&&"is-selected"),style:o?`left: ${o.x}px; top: ${o.y}px;`:"",onClick:a?i:void 0},a&&c.a.createElement("div",{className:"message-select-control"},s&&c.a.createElement("i",{className:"icon-select"})),c.a.createElement(e,l))}))}a(233);const Ta=Pa(la),Aa=Pa(ja);var xa=Object(s.h)(e=>({uploadsById:e.fileUploads.byMessageLocalId}),(e,t)=>Object(b.l)(t,["cancelSendingMessage"]))(({album:e,observeIntersection:t,shouldAutoLoad:a,shouldAutoPlay:s,hasCustomAppendix:n,lastSyncTime:r,isOwn:o,albumLayout:i,onMediaClick:l,uploadsById:d,cancelSendingMessage:b})=>{const u=e.messages.length,m=Object(c.m)(e=>{b({chatId:e.chatId,messageId:e.id})},[b]);const{width:O,height:j}=i.containerStyle;return c.a.createElement("div",{className:"Album",style:`width: ${O}px; height: ${j}px;`},e.messages.map((function(e,b){const{photo:O,video:j}=Object(h.v)(e),g=d[e.previousLocalId||e.id],p=g?g.progress:void 0,{dimensions:f,sides:I}=i.layout[b];if(O){const s=n&&(o?b===u-1:Boolean(I&Lt&&I&Rt));return c.a.createElement(Ta,{id:"album-media-"+e.id,message:e,observeIntersection:t,shouldAutoLoad:a,shouldAffectAppendix:s,uploadProgress:p,dimensions:f,onClick:l,onCancelUpload:m})}if(j)return c.a.createElement(Aa,{id:"album-media-"+e.id,message:e,observeIntersection:t,shouldAutoLoad:a,shouldAutoPlay:s,uploadProgress:p,lastSyncTime:r,dimensions:f,onClick:l,onCancelUpload:m})})))});a(234);function Ra(){return(Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}let La;var Fa=({message:e,observeIntersection:t,shouldAutoLoad:a,shouldAutoPlay:s,lastSyncTime:n})=>{const r=Object(c.q)(null),o=Object(c.q)(null),i=Object(c.q)(null),l=e.content.video,d=Object(It.b)(r,t),[b,u]=Object(c.r)(a&&s),m=Boolean(b&&d&&n),{mediaData:O,downloadProgress:j}=Object(sa.a)(Object(h.D)(e,"inline"),!m,Object(h.C)(e,"inline"),n),g=ca(e,O),{isBuffered:p,bufferingHandlers:f}=Object(da.a)(),I=b&&!p,v=!1===Object(ra.a)(b),{shouldRender:y,transitionClassNames:C}=Object(ee.a)(I||!p,void 0,v),{shouldRenderThumb:E,transitionClassNames:w}=Object(Jt.a)(O,"slow"),[S,M]=Object(c.r)(!1),[k,N]=Object(c.r)(0);Object(c.n)(()=>{if(!S)return;const e=188*Math.PI,t=e-k*e,a=i.current,s=o.current,n=s.firstElementChild;n?n.firstElementChild.setAttribute("stroke-dashoffset",t.toString()):s.innerHTML=`<svg width="200px" height="200px">\n          <circle cx="100" cy="100" r="94" class="progress-circle" transform="rotate(-90, 100, 100)"\n            stroke-dasharray="${e} ${e}"\n            stroke-dashoffset="${e}"\n          />\n        </svg>`,N(a.currentTime/a.duration)},[S,k]);const P=Boolean(O&&d),T=()=>{M(!1),N(0),Object(ba.a)(i.current),requestAnimationFrame(()=>{o.current.innerHTML=""})},A=(x=T,()=>{La&&La(),La=x});var x;Object(c.n)(()=>{i.current&&(P?Object(ba.a)(i.current):i.current.pause())},[P]),ua(i,P),ha(i,Boolean(O)),Object(ma.a)(i,[O]);const L=Object(c.m)(()=>{if(!O)return void u(e=>!e);const e=i.current;S?e.paused?Object(ba.a)(e):e.pause():(A(),e.currentTime=0,M(!0))},[A,S,O]),F=Object(c.m)(e=>{const t=e.currentTarget;N(t.currentTime/t.duration)},[]),D=Object(Z.a)("full-media",w);return c.a.createElement("div",{ref:r,className:"RoundVideo media-inner",onClick:L},E&&c.a.createElement("div",{className:"thumbnail-wrapper"},c.a.createElement("canvas",{ref:g,className:"thumbnail",style:`width: ${st.d}px; height: ${st.d}px`})),O&&c.a.createElement("div",{className:"video-wrapper"},c.a.createElement("video",Ra({ref:i,className:D,width:st.d,height:st.d,autoPlay:!0,muted:!S,loop:!S,playsInline:!0,onEnded:S?T:void 0},f,{onTimeUpdate:S?F:void 0}),c.a.createElement("source",{src:O}))),c.a.createElement("div",{className:"progress",ref:o}),y&&c.a.createElement("div",{className:"media-loading "+C},c.a.createElement(ia.a,{progress:j})),!O&&!b&&c.a.createElement("i",{className:"icon-large-play"}),c.a.createElement("div",{className:"message-media-duration"},S?Object(R.e)(i.current.currentTime):Object(R.e)(l.duration),(!S||i.current.paused)&&c.a.createElement("i",{className:"icon-muted-chat"})))};a(235);var Da=({message:e,onClick:t})=>c.a.createElement("div",{className:"InlineButtons"},e.inlineButtons.map(e=>c.a.createElement("div",{className:"row"},e.map(e=>c.a.createElement(de.a,{size:"tiny",ripple:!0,disabled:"NOT_SUPPORTED"===e.type,onClick:()=>t({button:e})},e.text,"url"===e.type&&c.a.createElement("i",{className:"icon-arrow-right"}))))));a(236);var Ba=Object(c.h)(Object(s.h)((e,{message:t})=>{const{threadId:a,chatId:s}=t.threadInfo,n=Object(o.Cb)(e,s,a)||t.threadInfo,{byId:c}=e.users,{byId:r}=e.chats;return{threadInfo:n,usersById:c,chatsById:r}},(e,t)=>Object(b.l)(t,["openChat"]))(({disabled:e,threadInfo:t,usersById:a,chatsById:s,openChat:n})=>{const r=Object(oe.a)(),{threadId:o,chatId:i,messagesCount:l,lastMessageId:d,lastReadInboxMessageId:b,recentReplierIds:u}=t,m=Object(c.m)(()=>{n({id:i,threadId:o})},[n,i,o]);if(void 0===l)return;const O=u&&u.map(e=>Object(h.lb)(e)?a[e]:s[e]).filter(Boolean);const j=Boolean(b&&d&&b<d);return c.a.createElement("div",{"data-cnt":Object(Je.b)(l),className:Object(Z.a)("CommentButton",j&&"has-unread",e&&"disabled"),dir:r.isRtl?"rtl":"ltr",onClick:m},c.a.createElement("i",{className:"icon-comments-sticker"}),(!O||0===O.length)&&c.a.createElement("i",{className:"icon-comments"}),O&&O.length>0&&c.a.createElement("div",{className:"recent-repliers",dir:r.isRtl?"rtl":"ltr"},O.map(e=>c.a.createElement(_t.a,{key:e.id,size:"small",user:Object(h.lb)(e.id)?e:void 0,chat:Object(h.lb)(e.id)?void 0:e}))),c.a.createElement("div",{className:"label",dir:"auto"},l?r("Comments",l,"i"):r("LeaveAComment")),c.a.createElement("i",{className:"icon-next"}))}));a(237);function Ua(e){const t=Ga(e.currentTarget);t&&t.setAttribute("data-is-document-group-hover","")}function Ha(e){const t=Ga(e.currentTarget);t&&t.removeAttribute("data-is-document-group-hover")}function Ga(e){let t=e;do{t=t.nextElementSibling}while(t&&!t.classList.contains("last-in-document-group"));return t}var qa=Object(c.h)(Object(s.h)((e,t)=>{const{focusedMessage:a,forwardMessages:s,lastSyncTime:n}=e,{message:c,album:r,withSenderName:i,withAvatar:l,threadId:d,messageListType:b}=t,{id:u,chatId:m,viaBotId:O,replyToMessageId:j,isOutgoing:g}=c,p=Object(o.f)(e,m),f=Object(o.P)(e,m),I=p&&Object(h.jb)(p),v=!f&&Object(h.eb)(c),y=i||l||v?Object(o.tb)(e,c):void 0,C=Object(o.K)(e,c),E=O?Object(o.Gb)(e,O):void 0,w=d?Object(o.Eb)(e,m,d):void 0,S=c.id===w,M=j===w,k=j&&!M?Object(o.k)(e,m,j):void 0,N=k&&Object(o.tb)(e,k),P=Object(o.Fb)(e,c),T="thread"===b&&(r?r.messages.some(t=>Object(o.U)(e,t)):Object(o.U)(e,c)),{direction:A,noHighlight:x}=T&&a||{},R=s.messageIds&&s.messageIds.includes(u),{query:L}=Object(o.A)(e)||{},F=Object(h.L)(c);let D;return D=r&&r.messages?r.messages.every(({id:t})=>Object(o.V)(e,t)):Object(o.V)(e,u),{forceSenderName:v,sender:y,originSender:C,botSender:E,shouldHideReply:M,isThreadTop:S,replyMessage:k,replyMessageSender:N,...g&&{outgoingStatus:Object(o.fb)(e,c,"scheduled"===b)},..."number"==typeof P&&{uploadProgress:P},isFocused:T,...T&&{focusDirection:A,noFocusHighlight:x},isForwarding:R,isChatWithSelf:f,isChannel:I,lastSyncTime:n,highlight:L,isSingleEmoji:Boolean(F),animatedEmoji:F?Object(o.c)(e,F):void 0,isInSelectMode:Object(o.S)(e),isSelected:D,isGroupSelected:!!c.groupedId&&!c.isInAlbum&&Object(o.Q)(e,m,c.groupedId),threadId:d,isPinnedList:"pinned"===b,shouldAutoLoadMedia:p?Object(o.ub)(e,c,p,y):void 0,shouldAutoPlayMedia:Object(o.vb)(e,c),shouldLoopStickers:Object(o.wb)(e)}},(e,t)=>Object(b.l)(t,["focusMessage","openMediaViewer","openAudioPlayer","cancelSendingMessage","openUserInfo","openChat","markMessagesRead","sendPollVote","toggleMessageSelection","setReplyingToId","openForwardMenu","clickInlineButton"]))(({message:e,observeIntersectionForBottom:t,observeIntersectionForMedia:a,observeIntersectionForAnimatedStickers:s,album:n,withAvatar:r,withSenderName:o,noComments:i,appearanceOrder:b,isFirstInGroup:u,isLastInGroup:m,isFirstInDocumentGroup:O,isLastInDocumentGroup:j,isLastInList:g,forceSenderName:p,sender:f,originSender:I,botSender:v,isThreadTop:y,shouldHideReply:C,replyMessage:E,replyMessageSender:w,outgoingStatus:S,uploadProgress:M,isFocused:k,focusDirection:N,noFocusHighlight:P,isForwarding:T,isChatWithSelf:A,isChannel:x,lastSyncTime:R,highlight:L,animatedEmoji:F,isInSelectMode:D,isSelected:B,isGroupSelected:U,threadId:H,messageListType:G,isPinnedList:q,shouldAutoLoadMedia:_,shouldAutoPlayMedia:V,shouldLoopStickers:$,focusMessage:z,openMediaViewer:W,openAudioPlayer:K,openUserInfo:Q,openChat:Y,cancelSendingMessage:X,markMessagesRead:J,sendPollVote:te,toggleMessageSelection:ae,setReplyingToId:ne,openForwardMenu:ce,clickInlineButton:re})=>{const ie=Object(c.q)(null),le=Object(c.q)(null),be=Object(c.q)(null);Object(It.c)(le,t);const{width:ue}=ze(),{isContextMenuOpen:me,contextMenuPosition:he,handleBeforeContextMenu:Oe,handleContextMenu:je,handleContextMenuClose:ge,handleContextMenuHide:pe}=Object(St.a)(ie,!1,!0),fe=b<=0,[Ie,ve]=Object(se.a)(fe);Object(c.n)(()=>{fe||setTimeout(ve,10*b)},[b,ve,fe]);const{transitionClassNames:ye}=Object(ee.a)(Ie,void 0,fe,!1),{chatId:Ce,id:Ee,threadInfo:we}=e,Se=Object(h.tb)(e),Me="scheduled"===G||e.isScheduled,ke=Object(h.ub)(e)&&!C,Ne=Boolean(we)&&"thread"===G,{forwardInfo:Pe,viaBotId:Te}=e,Ae=Pe&&!A&&!Pe.isLinkedChannelPost,xe=!!e.groupedId&&!e.isInAlbum,Re=Boolean(n)&&n.messages.length>1,{text:Le,photo:Fe,video:De,audio:Be,voice:Ue,document:He,sticker:Ge,contact:qe,poll:_e,webPage:Ve,invoice:$e}=Object(h.v)(e),We=Object(h.x)(e),Ke=Object(Mt.a)(e,L,kt(We)),Qe=void 0!==he,Xe=Object(Z.a)("Message message-list-item",u&&"first-in-group",m&&"last-in-group",O&&"first-in-document-group",j&&"last-in-document-group",g&&"last-in-list",Se&&"own",Boolean(e.views)&&"has-views",e.isEdited&&"was-edited",ke&&"has-reply",Qe&&"has-menu-open",k&&!P&&"focused",T&&"is-forwarding",e.isDeleting&&"is-deleting",xe&&"is-in-document-group",Re&&"is-album",e.hasUnreadMention&&"has-unread-mention",B&&"is-selected",D&&"is-in-selection-mode",y&&"is-thread-top",Boolean(e.inlineButtons)&&"has-inline-buttons",ye),Je=function(e,{hasReply:t,customShape:a,isLastInGroup:s,asForwarded:n,hasThread:c,forceSenderName:r,hasComments:o}={}){const{text:i,photo:l,video:d,audio:b,voice:u,document:m,poll:O,webPage:j,contact:g}=Object(h.v)(e),p=["message-content"],f=(l||d)&&!i,I=Boolean(e.viaBotId);return kt(a)?p.push("emoji-only emoji-only-"+a):i&&p.push("text"),a&&(p.push("custom-shape"),d&&d.isRound&&p.push("round"),o&&p.push("has-comments")),l||d?p.push("media"):b?p.push("audio"):u?p.push("voice"):m?p.push("document"):g?p.push("contact"):O?p.push("poll"):j&&(p.push("web-page"),j.photo&&p.push("media")),n&&!a&&p.push("is-forwarded"),t&&p.push("is-reply"),c&&p.push("has-replies"),I&&p.push("is-via-bot"),r&&p.push("force-sender-name"),a||(p.push("has-shadow"),(t||n||!f||I||r)&&p.push("has-solid-background"),!s||!l&&f||p.push("has-appendix")),p.join(" ")}(e,{hasReply:ke,customShape:We,isLastInGroup:m,asForwarded:Ae,hasThread:Ne,forceSenderName:p,hasComments:e.threadInfo&&e.threadInfo.messagesCount>0}),Ze=!Pe||!A&&f?f:I,et=Pe?I:f,tt=x&&e.adminTitle||Pe&&!Ae&&Pe.adminTitle||void 0,at=e.threadInfo&&(!xe||j)&&"thread"===G&&!i,ct=Je.includes("has-appendix");Object(Ye.a)(Ce,ke?e.replyToMessageId:void 0,E,e.id),qt(ie,Ce,k,N,P),Object(c.o)(()=>{be.current&&(be.current.innerHTML=Se?'<svg width="9" height="20" xmlns="http://www.w3.org/2000/svg"><defs><filter x="-50%" y="-14.7%" width="200%" height="141.2%" filterUnits="objectBoundingBox" id="a"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0.0621962482 0 0 0 0 0.138574144 0 0 0 0 0.185037364 0 0 0 0.15 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd"><path d="M6 17H0V0c.193 2.84.876 5.767 2.05 8.782.904 2.325 2.446 4.485 4.625 6.48A1 1 0 016 17z" fill="#000" filter="url(#a)"/><path d="M6 17H0V0c.193 2.84.876 5.767 2.05 8.782.904 2.325 2.446 4.485 4.625 6.48A1 1 0 016 17z" fill="#EEFFDE" class="corner"/></g></svg>':'<svg width="9" height="20" xmlns="http://www.w3.org/2000/svg"><defs><filter x="-50%" y="-14.7%" width="200%" height="141.2%" filterUnits="objectBoundingBox" id="a"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0.0621962482 0 0 0 0 0.138574144 0 0 0 0 0.185037364 0 0 0 0.15 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd"><path d="M3 17h6V0c-.193 2.84-.876 5.767-2.05 8.782-.904 2.325-2.446 4.485-4.625 6.48A1 1 0 003 17z" fill="#000" filter="url(#a)"/><path d="M3 17h6V0c-.193 2.84-.876 5.767-2.05 8.782-.904 2.325-2.446 4.485-4.625 6.48A1 1 0 003 17z" fill="#FFF" class="corner"/></g></svg>')},[Se,ct]);const rt=Object(c.m)(t=>{t.stopPropagation(),ae({messageId:Ee,groupedId:e.groupedId})},[Ee,e.groupedId,ae]),ot=Object(c.m)(e=>{const t=Re&&n&&n.messages?{messageId:Ee,childMessageIds:n.messages.map(({id:e})=>e),withShift:e&&e.shiftKey}:{messageId:Ee,withShift:e&&e.shiftKey};ae(t)},[ae,Ee,Re,n]),it=Object(c.m)(()=>{ne({messageId:Ee})},[ne,Ee]),lt=Object(c.m)(e=>{e.stopPropagation()},[]),dt=Object(c.m)(()=>{Ze&&(Object(h.lb)(Ze.id)?Q({id:Ze.id}):Y({id:Ze.id}))},[Ze,Q,Y]),bt=Object(c.m)(()=>{et&&(Object(h.lb)(et.id)?Q({id:et.id}):Y({id:et.id}))},[et,Q,Y]),ut=Object(c.m)(()=>{v&&Q({id:v.id})},[v,Q]),mt=Object(c.m)(()=>{z({chatId:Ce,threadId:H,messageId:e.replyToMessageId})},[z,Ce,H,e.replyToMessageId]),ht=Object(c.m)(()=>{W({chatId:Ce,threadId:H,messageId:Ee,origin:Me?d.h.ScheduledInline:d.h.Inline})},[Ce,H,Ee,W,Me]),Ot=Object(c.m)(()=>{K({chatId:Ce,messageId:Ee})},[Ce,Ee,K]),jt=Object(c.m)(e=>{W({chatId:Ce,threadId:H,messageId:e,origin:Me?d.h.ScheduledAlbum:d.h.Album})},[Ce,H,W,Me]),gt=Object(c.m)(()=>{J({messageIds:[Ee]})},[Ee,J]),pt=Object(c.m)(()=>{X({chatId:Ce,messageId:Ee})},[X,Ce,Ee]),ft=Object(c.m)(e=>{te({chatId:Ce,messageId:Ee,options:e})},[Ce,Ee,te]),vt=Object(c.m)(()=>{ce({fromChatId:Ce,groupedId:e.groupedId})},[ce,Ce,e.groupedId]),yt=Object(c.m)(()=>{if(n&&n.messages){const e=n.messages.map(({id:e})=>e);ce({fromChatId:Ce,messageIds:e})}else ce({fromChatId:Ce,messageIds:[Ee]})},[n,ce,Ce,Ee]),Ct=Object(c.m)(()=>{z({chatId:Ce,threadId:l.MAIN_THREAD_ID,messageId:Ee})},[z,Ce,Ee]),Et=Object(c.m)(()=>{z(xe?{chatId:Pe.fromChatId,groupedId:e.groupedId,groupedChatId:Ce}:{chatId:Pe.fromChatId,messageId:Pe.fromMessageId})},[z,Pe,e,Ce,xe]),wt=Object(oe.a)();let Tt,At="",xt=!1;const Rt=Object(c.p)(()=>Re?Ut(Se,Boolean(Ae),n,ue):void 0,[Re,ue,Se,Ae,n]),Lt=Ae?28:0;if(Re||!Fe&&!De)Rt&&(Tt=Math.max(Nt(Boolean(Le),at),Rt.containerStyle.width),Tt-Rt.containerStyle.width>18&&(xt=!0));else{let t;Fe?t=Pt(e).width:De&&(t=De.isRound?st.d:Pt(e).width),t&&(Tt=Math.max(Nt(Boolean(Le),at),t),Tt-t>18&&(xt=!0))}Tt&&(At=`width: ${Tt+Lt}px`);const Ft=Object(c.p)(()=>tt?Gt(tt):void 0,[tt]),Dt=!(Qe||D||T)&&(!xe||j),Bt=Dt&&x&&!Me,Ht=Dt&&(Pe&&(Pe.isChannelPost||A&&!Se)&&Pe.fromMessageId||q);return c.a.createElement("div",{ref:ie,id:"message"+Ee,className:Xe,style:Ft?`--meta-safe-author-width: ${Ft}px`:void 0,"data-message-id":Ee,onClick:D?ot:void 0,onDoubleClick:D?void 0:it,onMouseDown:D?void 0:Oe,onContextMenu:D?void 0:je,onMouseEnter:xe&&!j?Ua:void 0,onMouseLeave:xe&&!j?Ha:void 0},c.a.createElement("div",{ref:le,className:"bottom-marker","data-message-id":Ee,"data-last-message-id":n?n.messages[n.messages.length-1].id:void 0,"data-has-unread-mention":e.hasUnreadMention}),!xe&&c.a.createElement("div",{className:"message-select-control"},B&&c.a.createElement("i",{className:"icon-select"})),j&&c.a.createElement("div",{className:Object(Z.a)("message-select-control group-select",U&&"is-selected"),onClick:rt},U&&c.a.createElement("i",{className:"icon-select"})),r&&function(){const e=Ze&&Object(h.lb)(Ze.id),t=Ze&&e?Ze:void 0,a=Ze&&!e?Ze:void 0,s=!Ze&&Pe?Pe.hiddenUserName:void 0;return c.a.createElement(_t.a,{size:"small",user:t,chat:a,text:s,lastSyncTime:R,onClick:t||a?dt:void 0})}(),c.a.createElement("div",{className:"message-content-wrapper",onClick:D&&xe?ot:void 0},c.a.createElement("div",{className:Je,style:At,dir:"auto"},ct&&c.a.createElement("div",{className:"svg-appendix",ref:be}),Ae&&!We&&(!xe||O)&&c.a.createElement("div",{className:"message-title"},wt("ForwardedMessage")),function(){const t=Object(Z.a)("content-inner",Ae&&!We&&"forwarded-message",ke&&"reply-message",xt&&"no-media-corners"),r=m&&!Ke&&!Ae&&!Ne,i=!Ve&&!F&&Ke;return c.a.createElement("div",{className:t,onDoubleClick:lt,dir:"auto"},function(){if(We||!(o&&!Fe&&!De||Ae||Te||p)||xe&&!O)return;let t,a;et?(t=Object(h.V)(wt,et),Ae||(a="color-"+Object(h.X)(et))):Pe&&Pe.hiddenUserName&&(t=Pe.hiddenUserName);return c.a.createElement("div",{className:"message-title",dir:"ltr"},t?c.a.createElement("span",{className:Object(Z.a)(et&&"interactive",a),onClick:et?bt:void 0,dir:"auto"},Object(nt.a)(t)):v?void 0:" ",v&&c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"via"},wt("ViaBot")),c.a.createElement("span",{className:"interactive",onClick:ut},Object(nt.a)("@"+v.username))),Pe&&Pe.isLinkedChannelPost?c.a.createElement("span",{className:"admin-title",dir:"auto"},wt("DiscussChannel")):e.adminTitle&&!x?c.a.createElement("span",{className:"admin-title",dir:"auto"},e.adminTitle):void 0)}(),ke&&c.a.createElement(Wt,{message:E,sender:w,observeIntersection:a,onClick:mt}),Ge&&c.a.createElement(ta,{message:e,observeIntersection:a,observeIntersectionForPlaying:s,shouldLoop:$,lastSyncTime:R}),F&&c.a.createElement(aa.a,{isInline:!0,sticker:F,observeIntersection:a,lastSyncTime:R}),Re&&c.a.createElement(xa,{album:n,albumLayout:Rt,observeIntersection:a,shouldAutoLoad:_,shouldAutoPlay:V,isOwn:Se,hasCustomAppendix:r,lastSyncTime:R,onMediaClick:jt}),!Re&&Fe&&c.a.createElement(la,{message:e,observeIntersection:a,shouldAutoLoad:_,uploadProgress:M,shouldAffectAppendix:r,onClick:ht,onCancelUpload:pt}),!Re&&De&&De.isRound&&c.a.createElement(Fa,{message:e,observeIntersection:a,shouldAutoLoad:_,shouldAutoPlay:V,lastSyncTime:R}),!Re&&De&&!De.isRound&&c.a.createElement(ja,{message:e,observeIntersection:a,shouldAutoLoad:_,shouldAutoPlay:V,uploadProgress:M,lastSyncTime:R,onClick:ht,onCancelUpload:pt}),(Be||Ue)&&c.a.createElement(Qt.a,{message:e,uploadProgress:M,lastSyncTime:R,isSelectable:xe,isSelected:B,onPlay:Ot,onReadMedia:!Ue||Se&&!A?void 0:gt,onCancelUpload:pt}),He&&c.a.createElement(Kt.a,{message:e,observeIntersection:a,uploadProgress:M,isSelectable:xe,isSelected:B,onCancelUpload:pt}),qe&&c.a.createElement(pa,{contact:qe}),_e&&c.a.createElement(wa,{message:e,poll:_e,onSendVote:ft}),!F&&Ke&&c.a.createElement("p",{className:"text-content "+(i?"with-meta":""),dir:"auto"},Ke,i&&c.a.createElement(Xt,{message:e,outgoingStatus:S,signature:tt,onClick:ot})),Ve&&c.a.createElement(ka,{message:e,observeIntersection:a,shouldAutoLoad:_,onMediaClick:ht,onCancelMediaTransfer:pt}),$e&&c.a.createElement(Na,{message:e}))}(),(!xe||j)&&!(!Ve&&!F&&Ke)&&c.a.createElement(Xt,{message:e,outgoingStatus:S,signature:tt,onClick:ot}),Bt?c.a.createElement(de.a,{className:"message-action-button",color:"translucent-white",round:!0,size:"tiny",ariaLabel:wt("lng_context_forward_msg"),onClick:j?vt:yt},c.a.createElement("i",{className:"icon-share-filled"})):Ht?c.a.createElement(de.a,{className:"message-action-button",color:"translucent-white",round:!0,size:"tiny",ariaLabel:"Focus message",onClick:q?Ct:Et},c.a.createElement("i",{className:"icon-arrow-right"})):void 0,at&&c.a.createElement(Ba,{message:e,disabled:i}),Je.includes("has-appendix")&&c.a.createElement("div",{className:"svg-appendix",ref:be})),e.inlineButtons&&c.a.createElement(Da,{message:e,onClick:re})),he&&c.a.createElement($t,{isOpen:me,anchor:he,message:e,album:n,messageListType:G,onClose:ge,onCloseAnimationEnd:pe}))}));a(238);const _a=O.b?1e3:350,Va=O.g?300:500,$a=Object(p.a)(e=>e(),200,!1);var za=Object(c.h)(Object(s.h)((e,{chatId:t,threadId:a,type:s})=>{const n=Object(o.f)(e,t);if(!n)return{};const c=Object(o.x)(e,t,a,s),r="scheduled"===s?Object(o.qb)(e,t):Object(o.m)(e,t),i=Object(o.Eb)(e,t,a);if(a!==l.MAIN_THREAD_ID&&!(r&&i&&r[i]))return{};const{isRestricted:d,restrictionReason:b,lastMessage:u}=n,m=Object(o.I)(e,t),O=a===l.MAIN_THREAD_ID&&!c&&!n.unreadCount&&!m&&u&&!u.groupedId;let j;if(Object(o.L)(e,t)){const a=Object(o.g)(e,t);j=a.fullInfo?a.fullInfo.botDescription||"NoMessages":"Updating bot info..."}return{isChatLoaded:!0,isRestricted:d,restrictionReason:b,isChannelChat:Object(h.jb)(n),isChatWithSelf:Object(o.P)(e,t),messageIds:c,messagesById:r,firstUnreadId:Object(o.H)(e,t,a),isViewportNewest:"thread"!==s||Object(o.X)(e,t,a),threadFirstMessageId:Object(o.G)(e,t,a),focusingId:m,isSelectModeActive:Object(o.S)(e),animationLevel:e.settings.byKey.animationLevel,...O&&{lastMessage:u},botDescription:j,threadTopMessageId:i,hasLinkedChat:n.fullInfo&&"linkedChatId"in n.fullInfo?Boolean(n.fullInfo.linkedChatId):void 0}},(e,t)=>Object(b.l)(t,["loadViewportMessages","markMessageListRead","markMessagesRead","setScrollOffset"]))(({chatId:e,threadId:t,type:a,hasTools:r,onFabToggle:i,onNotchToggle:l,isChatLoaded:u,isChannelChat:m,canPost:O,isChatWithSelf:j,messageIds:g,messagesById:f,firstUnreadId:I,isViewportNewest:v,threadFirstMessageId:y,isRestricted:C,restrictionReason:E,focusingId:w,isSelectModeActive:S,animationLevel:M,loadViewportMessages:k,markMessageListRead:N,markMessagesRead:P,setScrollOffset:T,lastMessage:A,botDescription:x,threadTopMessageId:L,hasLinkedChat:F})=>{const D=Object(c.q)(null),B=Object(c.q)("thread"===a&&Object(o.rb)(Object(s.e)(),e,t)||0),U=Object(c.q)(),H=Object(c.q)(),G=Object(c.q)(),q=Object(c.q)(),_=Object(c.q)(),V=Object(c.q)(),$=Object(c.q)(!1),z=Object(c.q)(!g),[W,K]=Object(c.r)(),[Q,Y]=Object(c.r)(Boolean(w)),X=Boolean(g);Object(fe.a)(()=>{X&&Object(p.d)(()=>{z.current=!1})},[X]),Object(fe.a)(()=>{_.current=I,q.current||(q.current=I)},[I]);const{observe:ee,freeze:te,unfreeze:ae}=Object(It.a)({rootRef:D,throttleMs:_a,margin:Va}),{observe:se,freeze:ne,unfreeze:ce}=Object(It.a)({rootRef:D},e=>{if("thread"!==a)return;let t=0;const s=[];e.forEach(e=>{const{isIntersecting:a,target:n}=e;if(!a)return;const{dataset:c}=n,r=Number(c.lastMessageId||c.messageId);r>t&&(t=r),c.hasUnreadMention&&s.push(r)}),_.current&&t>=_.current&&N({maxId:t}),s.length&&P({messageIds:s})});Object(fe.a)(()=>{V.current=w,w?(te(),ne()):(ce(),ae())},[w]);const{observe:re}=Object(It.a)({rootRef:D,throttleMs:_a});Object(c.n)(()=>{w?Y(!0):setTimeout(()=>{Y(!1)},200)},[w]);const ie=Object(c.p)(()=>{if(!g||!f)return;const e=!L||g[0]&&y!==g[0]?g:[L,...g];if(!e.length)return;const t=e.map(e=>f[e]);return ft(Object(b.k)(t,["date","id"]),q.current)},[g,f,y,L]),[le,de,be]=Object(c.p)(()=>"thread"===a?[Object(p.a)(()=>k({direction:d.e.Backwards}),1e3,!0,!1),Object(p.a)(()=>k({direction:d.e.Forwards}),1e3,!0,!1),Object(p.a)(()=>k({direction:d.e.Around}),1e3,!0,!1)]:[],[k,g]),{isScrolled:ue,updateStickyDates:me}=vt(),he=Object(c.m)(()=>{if($.current)return void($.current=!1);const s=D.current;V.current||me(s,r),$a(()=>{Object(p.b)(()=>{s.parentElement&&(B.current=s.scrollHeight-s.scrollTop,"thread"===a&&T({chatId:e,threadId:t,scrollOffset:B.current}))})})},[me,r,a,T,e,t]);Object(c.n)(()=>{if(!("ResizeObserver"in window))return;const e=new ResizeObserver(([e])=>{e.target.offsetParent&&K(e.contentRect.height)});return e.observe(D.current),()=>{e.disconnect()}},[]);const{height:Oe}=ze();Object(c.n)(()=>{D.current.dataset.normalHeight=String(D.current.offsetHeight)},[Oe]),Object(c.n)(()=>{if(!be||!u||C||w)return;const e=D.current;(!g||g.length<n.V/2&&e.firstElementChild.clientHeight<=e.offsetHeight)&&be()},[u,g,be,w,C]),Object(fe.a)(()=>{if(!g||!G.current)return;const e=G.current.filter(e=>g.includes(Number(e.dataset.messageId))),t=e[1]||e[0];t&&(U.current=t.id,H.current=t.getBoundingClientRect().top)},[g,v,W,r]),Object(gt.a)(([e,t,a])=>{const s=D.current;if(G.current=Array.from(s.querySelectorAll(".message-list-item")),!s.offsetParent)return;const c=v&&g&&g.length<n.V/2&&!s.parentElement.classList.contains("force-messages-scroll")&&s.firstElementChild.clientHeight<=2*s.offsetHeight;c&&(s.parentElement.classList.add("force-messages-scroll"),setTimeout(()=>{s.parentElement&&s.parentElement.classList.remove("force-messages-scroll")},1e3));const{scrollTop:o,scrollHeight:i,offsetHeight:l}=s,d=B.current,b=G.current[G.current.length-1],u=b?b.offsetHeight:0,m=v&&t&&d-(a||l)-u<=100;let h;const O=g&&e&&g[0]!==e[0],j=g&&e&&g[g.length-1]!==e[e.length-1],f=g&&V.current===g[g.length-1];if(m&&j&&!O&&!f&&(b&&Object(p.b)(()=>{Object(Ct.a)(s,b,"end",20,void 0,void 0,void 0,!0)}),h=i-l,B.current=Math.max(i-h,l),!c))return;const I=void 0!==a&&a!==W,y=U.current&&s.querySelector("#"+U.current),C=!y&&q.current&&s.querySelector(".unread-divider");if(m&&I){if(Object(Ct.b)())return;h=i-l}else if(y){h=o+(y.getBoundingClientRect().top-(H.current||0))}else h=C?C.offsetTop-(r?60:10):i-d;Object(yt.a)(s,h),V.current||($.current=!0,Object(p.b)(()=>{$.current=!1})),B.current=Math.max(i-h,l)},[g,v,W,r]),Object(c.n)(()=>{(!M||M>0)&&Object(J.b)(200+n.c)},[M,S]);const je=Object(oe.a)(),ge=Boolean(e&&Object(h.lb)(e)),pe=Boolean(!ge&&!m||j),Ie=Object(Z.a)("MessageList custom-scroll",!pe&&"no-avatars",m&&"no-avatars",!O&&"no-composer","pinned"===a&&"type-pinned",S&&"select-mode-active",Q&&"has-focusing",ue&&"scrolled");return c.a.createElement("div",{ref:D,className:Ie,onScroll:he},C?c.a.createElement("div",{className:"empty"},c.a.createElement("span",null,E?E.text:"This is a private "+(m?"channel":"chat"))):x?c.a.createElement("div",{className:"empty rich"},c.a.createElement("span",null,Object(nt.a)(je(x),["br","emoji","links"]))):g&&!ie?c.a.createElement("div",{className:"empty"},c.a.createElement("span",null,je("NoMessages"))):g&&ie||A?c.a.createElement(wt,{containerRef:D,className:"messages-container",messageIds:g||[A.id],focusingId:w,loadMoreForwards:de,loadMoreBackwards:le,isViewportNewest:v,firstUnreadId:I,onFabToggle:i,onNotchToggle:l},function(e,t,a,s,r,o,i,l,d,u,m,O,j,g=!1,p=!1){const f=c.a.createElement("div",{className:Object(Z.a)("unread-divider","local-action-message"),key:"unread-messages"},c.a.createElement("span",null,e("UnreadMessages"))),I=p?0:t.reduce((e,t)=>e+Object(b.h)(t.senderGroups).length,0);let v=0;const y=t.map((t,O,p)=>{const y=t.senderGroups.map((t,n,g)=>{if(1===t.length&&!pt(t[0])&&Object(h.db)(t[0])){const e=t[0],s=n===g.length-1&&O===p.length-1;return Object(b.e)([e.id===l.current&&f,c.a.createElement(zt,{key:e.id,message:e,observeIntersection:a,appearanceOrder:I-++v,isLastInList:s})])}let y;return Object(b.h)(t.map((C,E)=>{const w=pt(C)?C.mainMessage:C,S=pt(C)?C:void 0,M=Object(h.tb)(w),k=pt(C),N=t[E+1];w.previousLocalId&&i.current==="message"+w.previousLocalId&&(i.current="message"+w.id);const P=!k&&w.groupedId?w.groupedId:void 0,T=N&&!pt(N)?N.groupedId:void 0,A={isFirstInGroup:0===E,isLastInGroup:E===t.length-1,isFirstInDocumentGroup:Boolean(P&&P!==y),isLastInDocumentGroup:Boolean(P&&P!==T),isLastInList:E===t.length-1&&n===g.length-1&&O===p.length-1};y=P;const x=Object(h.F)(w),R="scheduled"!==u?x:`${w.date}_${x}`;return Object(b.e)([w.id===l.current?f:void 0,c.a.createElement(qa,{key:R,message:w,observeIntersectionForBottom:a,observeIntersectionForMedia:s,observeIntersectionForAnimatedStickers:r,album:S,withAvatar:A.isLastInGroup&&o&&!M&&!(w.id===m),withSenderName:A.isFirstInGroup&&o&&!M,threadId:d,messageListType:u,noComments:!1===j,appearanceOrder:I-++v,isFirstInGroup:A.isFirstInGroup,isLastInGroup:A.isLastInGroup,isFirstInDocumentGroup:A.isFirstInDocumentGroup,isLastInDocumentGroup:A.isLastInDocumentGroup,isLastInList:A.isLastInList}),w.id===m&&c.a.createElement("div",{className:"local-action-message",key:"discussion-started"},c.a.createElement("span",null,e("DiscussionStarted")))])}))});return c.a.createElement("div",{className:"message-date-group",key:t.datetime,teactFastList:!0},c.a.createElement("div",{className:"sticky-date",key:"date-header"},c.a.createElement("span",{dir:"auto"},g&&t.originalDate===n.lb&&e("MessageScheduledUntilOnline"),g&&t.originalDate!==n.lb&&e("MessageScheduledOn",Object(R.c)(e,t.datetime,void 0,!0)),!g&&Object(R.c)(e,t.datetime))),Object(b.h)(y))});return Object(b.h)(y)}(je,ie||ft([A]),se,ee,re,pe,U,q,t,a,L,0,F,!!ie&&"scheduled"===a,!ie||!z.current)):c.a.createElement(Me.a,{color:"white"}))}));a(239);var Wa=Object(c.h)(Object(s.h)(e=>{const t=Object(o.y)(e);if(!t)return{};const{chatId:a,threadId:s,type:n}=t,c=Object(o.f)(e,a);return{messageListType:n,unreadCount:c&&s===l.MAIN_THREAD_ID&&"thread"===n?c.unreadCount:void 0}},(e,t)=>Object(b.l)(t,["focusLastMessage"]))(({isShown:e,canPost:t,messageListType:a,unreadCount:s,focusLastMessage:n})=>{const r=Object(oe.a)(),o=Object(c.q)(null),i=Object(c.m)(()=>{if(e)if("thread"===a)n();else{const e=o.current.parentElement.querySelector(".MessageList"),t=e.querySelectorAll(".message-list-item"),a=t[t.length-1];if(!a)return;Object(Ct.a)(e,a,"end",20)}},[e,a,n]),l=Object(Z.a)("ScrollDownButton",e&&"revealed",!t&&"no-composer");return c.a.createElement("div",{ref:o,className:l},c.a.createElement("div",{className:"ScrollDownButton-inner"},c.a.createElement(de.a,{color:"secondary",round:!0,onClick:i,ariaLabel:r("AccDescrPageDown")},c.a.createElement("i",{className:"icon-arrow-down"})),Boolean(s)&&c.a.createElement("div",{className:"unread-count"},Object(Je.b)(s))))})),Ka=a(131),Qa=a(140);async function Ya(e,t,a,s){const n=URL.createObjectURL(t),{type:c,size:r}=t;let o,i;if(c.startsWith("image/"))if(a){const a=await Object(Ve.g)(n),{width:r,height:i}=a;if(r>1280||i>1280||"image/jpeg"!==c){const c=await function(e){return new Promise(t=>{const a=document.createElement("canvas"),s=a.getContext("2d");let{width:n,height:c}=e;(n>1280||c>1280)&&(n>=c?(c*=1280/n,n=1280):(n*=1280/c,c=1280)),a.width=n,a.height=c,s.drawImage(e,0,0,e.width,e.height,0,0,n,c),a.toBlob(t,"image/jpeg",100)})}(a);return c?(URL.revokeObjectURL(n),Ya(e,c,!0,s)):Ya(e,t,!1,s)}o={width:r,height:i}}else i=n;else if(c.startsWith("video/")){if(r<10485760){const{videoWidth:e,videoHeight:t,duration:a}=await Object(Ve.h)(n);o={width:e,height:t,duration:a}}i=await Object(Ve.c)(n)}return{blobUrl:n,filename:e,mimeType:c,size:r,quick:o,previewBlobUrl:i,...s}}var Xa=a(183),Ja=a.p+"8ccc0b555efcec3616377aea078dda16.js";const Za={encoderPath:Ja,reuseWorker:!0},es={type:"audio/ogg"};let ts,as,ss;async function ns(){return ts||(ts=a.e(9).then(a.t.bind(null,318,7)),as=(await ts).default,ss=new as(Za)),ts}async function cs(e){await async function(){await ns(),await ss.start()}();const t=Date.now();let a;const s=[],n=[];ss.ondataavailable=e=>{s.push(e)};const c=function(e,t){const a=e.sourceNode,s=a.context.createAnalyser();s.fftSize=64,a.connect(s);const n=s.frequencyBinCount,c=new Uint8Array(n);let r=!1;return function e(){if(r)return;s.getByteFrequencyData(c);const a=c.reduce((e,t)=>e+t,0),o=a/n/255;t(o<.1?0:o),requestAnimationFrame(e)}(),()=>{r=!0}}(ss,t=>{n.push(255*t),e(t)});return{stop:()=>new Promise((e,r)=>{ss.onstop=()=>{e({blob:new Blob(s,es),duration:Math.round(((a||Date.now())-t)/1e3),waveform:n})},ss.onerror=r;const o=Math.max(0,t+1e3-Date.now());setTimeout(()=>{ss.stop(),c()},o)}),pause:()=>{const e=Math.max(0,t+1e3-Date.now());setTimeout(()=>{ss.pause(),a=Date.now(),c()},e)}}}const rs=["image/png","image/jpeg","image/gif"];function os(e){const{text:t,entities:a}=e||{};if(!t)return"";const s=Object(Mt.b)(t,a,void 0,void 0,!0);return Array.isArray(s)?s.join(""):s}let is,ls;var ds=a(65);var bs=a(184),us=a(192);var ms=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"DeleteMessageModal",!t);return a?c.a.createElement(a,e):void 0});function hs(){return(hs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}let Os,js=!0;var gs=Object(c.h)(({onActivate:e,...t})=>{const a=Object(c.q)(!1),s=Object(c.m)(()=>{if(a.current=!0,js)return js=!1,void e();Os&&(clearTimeout(Os),Os=void 0),Os=window.setTimeout(()=>{a.current&&e()},200)},[e]),n=Object(c.m)(()=>{a.current=!1},[]);return c.a.createElement(de.a,hs({},t,{onMouseEnter:O.l?void 0:s,onMouseLeave:O.l?void 0:n,onClick:O.l?e:void 0}))});var ps=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"AttachMenu",!t);return a?c.a.createElement(a,e):void 0});var fs=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"SymbolMenu",!t);return a?c.a.createElement(a,e):void 0});var Is=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"MentionTooltip",!t);return a?c.a.createElement(a,e):void 0});var vs=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"CustomSendMenu",!t);return a?c.a.createElement(a,e):void 0});var ys=e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"StickerTooltip",!t);return a?c.a.createElement(a,e):void 0},Cs=a(185);var Es=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"BotKeyboardMenu",!t);return a?c.a.createElement(a,e):void 0}),ws=a(186),Ss=a(121);a(241);var Ms=Object(c.h)(Object(s.h)(e=>{const{chatId:t,threadId:a,type:s}=Object(o.y)(e)||{};if(!t||!a||!s)return{};const{currentUserId:n,forwardMessages:{fromChatId:c,toChatId:r,messageIds:i}}=e,l=Object(o.mb)(e,t,a),d="scheduled"===s?Object(o.E)(e,t):Object(o.C)(e,t,a),b=e.settings.byKey.animationLevel>=1,u=r===t;let m,O;if(l?m=Object(o.k)(e,t,l):d?m=Object(o.D)(e,t,a,s):u&&1===i.length&&(m=Object(o.k)(e,c,i[0])),l&&m){const{forwardInfo:a}=m,s=t===n;a&&(a.isChannelPost||s)&&(O=Object(o.K)(e,m)),O||(O=Object(o.tb)(e,m))}else u&&(O=Object(h.lb)(c)?Object(o.Gb)(e,c):Object(o.f)(e,c));return{replyingToId:l,editingId:d,message:m,sender:O,shouldAnimate:b,forwardedMessagesCount:u?i.length:void 0}},(e,t)=>Object(b.l)(t,["setReplyingToId","setEditingId","focusMessage","exitForwardMode"]))(({replyingToId:e,editingId:t,message:a,sender:s,shouldAnimate:n,forwardedMessagesCount:r,setReplyingToId:o,setEditingId:i,focusMessage:l,exitForwardMode:d})=>{const b=Boolean((e||t)&&a||s&&r),u=Object(Ss.a)([r],r?300:void 0),{shouldRender:m,transitionClassNames:h}=Object(ee.a)(u&&b,void 0,!n,void 0,!n),O=Object(c.m)(()=>{e?o({messageId:void 0}):t?i({messageId:void 0}):r&&d()},[e,t,r,o,i,d]);Object(c.n)(()=>b?Object(ne.a)(O):void 0,[b,O]);const j=Object(c.m)(()=>{l({chatId:a.chatId,messageId:a.id})},[l,a]),g=Object(Z.a)("ComposerEmbeddedMessage",h),p=r&&r>1?r+" forwarded messages":void 0;if(m)return c.a.createElement("div",{className:g},c.a.createElement("div",null,c.a.createElement(de.a,{round:!0,color:"translucent",ariaLabel:"Cancel replying",onClick:O},c.a.createElement("i",{className:"icon-close"})),c.a.createElement(Wt,{className:"inside-input",message:a,sender:s,customText:p,title:t?"Edit Message":void 0,onClick:j})))}));var ks=Object(c.h)(e=>{const{attachments:t}=e,a=Object(Se.a)(we.a.Extra,"AttachmentModal",!t.length);return a?c.a.createElement(a,e):void 0});var Ns=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"PollModal",!t);return a?c.a.createElement(a,e):void 0});var Ps=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"DropArea",!t);return a?c.a.createElement(a,e):void 0});a(242);const Ts=new RegExp(n.gb,"i");var As=Object(c.h)(Object(s.h)((e,{chatId:t,threadId:a})=>{const s=Object(o.cb)(e,t,a);return{webPagePreview:e.webPagePreview,noWebPage:s}},(e,t)=>Object(b.l)(t,["loadWebPagePreview","clearWebPagePreview","toggleMessageWebPage"]))(({chatId:e,threadId:t,messageText:a,disabled:s,webPagePreview:n,noWebPage:r,loadWebPagePreview:o,clearWebPagePreview:i,toggleMessageWebPage:d})=>{const b=Object(c.p)(()=>{const{text:e,entities:t}=Object(Qa.a)(a),s=t&&t.find(({type:e})=>e===l.ApiMessageEntityTypes.TextUrl);if(s)return s.url;const n=e.match(Ts);return n?n[0]:void 0},[a]);Object(c.n)(()=>{b?o({text:b}):(i(),d({chatId:e,threadId:t}))},[e,d,i,b,o,t]),Object(fe.a)(()=>{i(),d({chatId:e,threadId:t})},[e]);const u=Boolean(n&&a.length&&!r&&!s),{shouldRender:m,transitionClassNames:h}=Object(ee.a)(u),O=Object(Xe.a)(n);if(!m||!O)return;const{photo:j,...g}=O,p={content:{webPage:g}};return c.a.createElement("div",{className:Object(Z.a)("WebPagePreview",h)},c.a.createElement("div",null,c.a.createElement(de.a,{round:!0,color:"translucent",ariaLabel:"Clear Webpage Preview",onClick:()=>{d({chatId:e,threadId:t,noWebPage:!0})}},c.a.createElement("i",{className:"icon-close"})),c.a.createElement(ka,{message:p,inPreview:!0})))})),xs=a(124);var Rs=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"CalendarModal",!t);return a?c.a.createElement(a,e):void 0});var Ls=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"PaymentModal",!t);return a?c.a.createElement(a,e):void 0});var Fs,Ds=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"ReceiptModal",!t);return a?c.a.createElement(a,e):void 0});a(243);!function(e){e.Send="send",e.Record="record",e.Edit="edit"}(Fs||(Fs={}));var Bs=Object(c.h)(Object(s.h)((e,{chatId:t,threadId:a,messageListType:s})=>{const n=Object(o.f)(e,t),c=n&&Object(o.o)(e,n),r=n?Object(o.O)(e,n):void 0,i=Object(o.P)(e,t),d=r&&Object(o.bb)(e,t),b=Object(o.ob)(e,t),{language:u}=e.settings.byKey,m=Object(o.F)(e,u);return{editingMessage:Object(o.D)(e,t,a,s),connectionState:e.connectionState,draft:Object(o.B)(e,t,a),chat:n,isChatWithBot:r,isChatWithSelf:i,canScheduleUntilOnline:!i&&!r&&n&&c&&Object(h.lb)(t)&&c.status&&Boolean(c.status.wasOnline),isRightColumnShown:Object(o.W)(e),isSelectModeActive:Object(o.S)(e),withScheduledButton:a===l.MAIN_THREAD_ID&&"thread"===s&&Boolean(b&&b.length),shouldSchedule:"scheduled"===s,botKeyboardMessageId:d?d.id:void 0,isForwarding:t===e.forwardMessages.toChatId,canSuggestMembers:n&&Object(h.kb)(n),isPollModalOpen:e.isPollModalOpen,stickersForEmoji:e.stickers.forEmoji.stickers,groupChatMembers:n&&n.fullInfo&&n.fullInfo.members,currentUserId:e.currentUserId,usersById:e.users.byId,lastSyncTime:e.lastSyncTime,contentToBeScheduled:e.messages.contentToBeScheduled,isPaymentModalOpen:e.payment.isPaymentModalOpen,isReceiptModalOpen:Boolean(e.payment.receipt),shouldSuggestStickers:e.settings.byKey.shouldSuggestStickers,recentEmojis:e.recentEmojis,language:u,emojiKeywords:m?m.keywords:void 0}},(e,t)=>Object(b.l)(t,["sendMessage","editMessage","saveDraft","clearDraft","showError","setStickerSearchQuery","setGifSearchQuery","forwardMessages","openPollModal","closePollModal","closePaymentModal","clearReceipt","loadScheduledHistory","openChat","addRecentEmoji","loadEmojiKeywords"]))(({dropAreaState:e,shouldSchedule:t,canScheduleUntilOnline:a,onDropHide:r,editingMessage:o,chatId:i,threadId:d,messageListType:b,draft:u,chat:m,connectionState:j,isChatWithBot:g,isChatWithSelf:f,isRightColumnShown:I,isSelectModeActive:v,isForwarding:y,canSuggestMembers:C,isPollModalOpen:E,isPaymentModalOpen:w,isReceiptModalOpen:S,botKeyboardMessageId:M,withScheduledButton:k,stickersForEmoji:N,groupChatMembers:P,currentUserId:T,usersById:A,lastSyncTime:x,contentToBeScheduled:L,shouldSuggestStickers:F,language:D,emojiKeywords:B,recentEmojis:U,sendMessage:H,editMessage:G,saveDraft:q,clearDraft:_,showError:V,setStickerSearchQuery:$,setGifSearchQuery:z,forwardMessages:W,openPollModal:K,closePollModal:Q,loadScheduledHistory:Y,closePaymentModal:X,openChat:J,clearReceipt:ee,addRecentEmoji:te,loadEmojiKeywords:ae})=>{const ce=Object(c.q)(null),[re,ie]=Object(c.r)(""),le=Object(c.q)(),be=Object(ra.a)(e),[ue,me,he]=Object(se.a)(),[Oe,ge]=Object(c.r)(),pe=Object(c.q)(re);Object(c.n)(()=>{pe.current=re},[re]),Object(c.n)(()=>{le.current=void 0},[i]),Object(c.n)(()=>{i&&x&&d===l.MAIN_THREAD_ID&&Y()},[i,Y,x,d]),Object(c.o)(()=>{ce.current&&(ce.current.innerHTML='<svg width="9" height="20" xmlns="http://www.w3.org/2000/svg"><defs><filter x="-50%" y="-14.7%" width="200%" height="141.2%" filterUnits="objectBoundingBox" id="a"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0.0621962482 0 0 0 0 0.138574144 0 0 0 0 0.185037364 0 0 0 0.15 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd"><path d="M6 17H0V0c.193 2.84.876 5.767 2.05 8.782.904 2.325 2.446 4.485 4.625 6.48A1 1 0 016 17z" fill="#000" filter="url(#a)"/><path d="M6 17H0V0c.193 2.84.876 5.767 2.05 8.782.904 2.325 2.446 4.485 4.625 6.48A1 1 0 016 17z" fill="#FFF" class="corner"/></g></svg>')},[]),Object(c.n)(()=>{L&&(ge(L),me())},[L,me]);const[fe,Ie]=Object(c.r)([]),[ve,ye,Ce]=Object(se.a)(),[Ee,we,Se]=Object(se.a)(),[Me,ke,Ne]=Object(se.a)(),[Pe,Te,Ae]=Object(se.a)(),[xe,Re]=Object(se.a)(),[Le,Fe,De]=Object(se.a)(),{startRecordingVoice:Be,stopRecordingVoice:Ue,pauseRecordingVoice:He,activeVoiceRecording:Ge,currentRecordTime:_e,recordButtonRef:Ve,startRecordTimeRef:$e}=(()=>{const e=Object(c.q)(null),[t,a]=Object(c.r)(),s=Object(c.q)(),[n,r]=Object(c.r)();Object(c.n)(()=>{O.e&&ns()},[]);const o=Object(c.m)(async()=>{try{const{stop:t,pause:n}=await cs(t=>{e.current&&(s.current&&Date.now()%4==0&&(e.current.style.boxShadow=`0 0 0 ${50*(t||0)}px rgba(0,0,0,.15)`),r(Date.now()))});s.current=Date.now(),r(Date.now()),a({stop:t,pause:n})}catch(e){console.error(e)}},[]),i=Object(c.m)(()=>{if(t){e.current&&(e.current.style.boxShadow="none");try{return t.pause()}catch(e){return void console.error(e)}}},[t]),l=Object(c.m)(()=>{if(t){a(void 0),s.current=void 0,r(void 0),e.current&&(e.current.style.boxShadow="none");try{return t.stop()}catch(e){return void console.error(e)}}},[t]);return Object(c.n)(()=>t?Object(ne.a)(l):void 0,[t,l]),{startRecordingVoice:o,pauseRecordingVoice:i,stopRecordingVoice:l,activeVoiceRecording:t,currentRecordTime:n,recordButtonRef:e,startRecordTimeRef:s}})(),ze=o?Fs.Edit:!O.m||Ge||re&&!fe.length||y?Fs.Send:Fs.Record,We=!t,{isMentionTooltipOpen:Ke,mentionFilter:Qe,closeMentionTooltip:Ye,insertMention:Xe,mentionFilteredMembers:Je}=Object(us.a)(C&&!fe.length,re,ie,void 0,P,T,A),{isContextMenuOpen:Ze,handleContextMenu:et,handleContextMenuClose:tt,handleContextMenuHide:at}=Object(St.a)(Ve,!(ze===Fs.Send&&We)),st=Object(c.p)(()=>Object(h.c)(m,g),[m,g]),ct=m&&Object(h.gb)(m),rt=Object(h.k)(m),{isStickerTooltipOpen:ot,closeStickerTooltip:it}=function(e,t,a){const{loadStickersForEmoji:n,clearStickersForEmoji:r}=Object(s.d)(),o=O.d&&1===Object(ds.a)(t)||!O.d&&Boolean(t.match(/^<img.[^>]*?>$/g)),i=Boolean(a)&&o;return Object(c.n)(()=>{e&&o?n({emoji:t}):!i&&o||r()},[t,o,r,n,e]),{isStickerTooltipOpen:i,closeStickerTooltip:r}}(Boolean(F&&st.canSendStickers&&!fe.length),re,N),{isEmojiTooltipOpen:lt,closeEmojiTooltip:dt,filteredEmojis:bt,insertEmoji:ut}=Object(bs.a)(Boolean(F&&st.canSendStickers&&!fe.length),re,U,void 0,ie,B),mt=Object(c.m)((e,t=n.v)=>{const a=window.getSelection(),s=document.getElementById(t),c=Object(nt.a)(e,["escape_html","emoji_html","br_html"]).join("").replace(/\u200b+/g,"​");if(a.rangeCount){const t=a.getRangeAt(0);if(Object(Xa.a)(t))return void(O.d?document.execCommand("insertText",!1,e):(!function(e){const t=window.getSelection();if(t&&t.getRangeAt&&t.rangeCount){const a=t.getRangeAt(0);a.deleteContents();const s=a.createContextualFragment(e),n=s.lastChild;a.insertNode(s),n&&(a.setStartAfter(n),a.setEndAfter(n),t.removeAllRanges(),t.addRange(a))}}(c),s.dispatchEvent(new Event("input",{bubbles:!0}))))}ie(`${pe.current}${c}`),O.g||requestAnimationFrame(()=>{Object(Ka.a)(s)})},[]),ht=Object(c.m)(()=>{const e=window.getSelection();if(e.rangeCount){const t=e.getRangeAt(0);if(Object(Xa.a)(t))return void document.execCommand("delete",!1)}ie(function(e){const t=document.createElement("div");t.contentEditable="true",t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.innerHTML=e,document.body.appendChild(t);let a=t.lastChild;if(a.lastChild)for(;a.lastChild;)a=a.lastChild;const s=a.textContent.length,n=document.createRange(),c=window.getSelection();n.setStart(a,s),n.setEnd(a,s),c.removeAllRanges(),c.addRange(n),document.execCommand("delete",!1);const r=t.innerHTML;return document.body.removeChild(t),r}(pe.current))},[]),Ot=Object(c.m)(()=>{ie(""),Ie([]),it(),he(),ge(void 0),Ye(),dt(),O.g?setTimeout(()=>Ne(),350):Ne()},[it,he,Ye,dt,Ne]),jt=Object(ra.a)(i);Object(c.n)(()=>{jt&&i!==jt&&(Ue(),Ot())},[i,jt,Ot,Ue]);const gt=((e,t,a,s,r,o)=>{Object(c.n)(()=>{a?(t(os(a.content.text)),requestAnimationFrame(()=>{const e=document.getElementById(n.v);Object(Ka.a)(e,!0)})):t("")},[a,t]);return Object(c.m)(()=>{const{text:t,entities:n}=Object(Qa.a)(e.current);a&&(t||Object(h.cb)(a)?(o({messageId:a.id,text:t,entities:n}),s()):r())},[o,a,e,r,s])})(pe,ie,o,Ot,Te,G);((e,t,a,s,r,o,i,l,d)=>{const b=Object(c.m)((e,t)=>{r.current.length&&!i?l({chatId:e,threadId:t,draft:Object(Qa.a)(r.current)}):d({chatId:e,threadId:t})},[d,i,r,l]),u=Object(c.p)(()=>Object(p.a)(e=>e(),n.u,!1),[t]),m=Object(ra.a)(t),h=Object(ra.a)(a);Object(c.n)(()=>(is=t,ls=a,()=>{is=void 0,ls=void 0,b(t,a)}),[t,a,b]),Object(c.n)(()=>{t===m&&a===h||e&&(o(os(e)),requestAnimationFrame(()=>{const e=document.getElementById(n.v);Object(Ka.a)(e,!0)}))},[t,a,e,o,b,m,h]);const O=Object(ra.a)(s);Object(c.n)(()=>{t&&a&&m===t&&h===a&&O!==s&&(s.length?u(()=>{is===t&&ls===a&&b(t,a)}):b(t,a))},[t,s,m,O,h,u,a,b]),Object(c.n)(()=>{function e(){t&&a&&b(t,a)}return window.addEventListener("blur",e),()=>{window.removeEventListener("blur",e)}},[t,a,b])})(u,i,d,re,pe,ie,o,q,_),((e,t,a)=>{Object(c.n)(()=>{async function s(s){if(!s.clipboardData)return;const c=document.activeElement;if(c&&"INPUT"===c.tagName&&![n.v,n.w].includes(c.id))return;const{items:r}=s.clipboardData,o=Array.from(r).find(e=>rs.includes(e.type)),i=o&&o.getAsFile(),l=s.clipboardData.getData("text").substring(0,4096);if(i||l){if(s.preventDefault(),i&&!a){const e=await Ya(i.name,i,!0);t(t=>[...t,e])}l&&e(l,c?c.id:void 0)}}return document.addEventListener("paste",s,!1),()=>{document.removeEventListener("paste",s,!1)}},[e,a,t])})(mt,Ie,o);const pt=Object(c.m)(async(e,t)=>{Ie(await Promise.all(e.map(e=>Ya(e.name,e,t))))},[]),ft=Object(c.m)(async(e,t)=>{Ie([...fe,...await Promise.all(e.map(e=>Ya(e.name,e,t)))])},[fe]),It=Object(c.m)(()=>{Ie([])},[]),vt=Object(c.m)(async(e=!1,t)=>{if("connectionStateReady"!==j)return;let a=fe;if(Ge){const e=await Ue();if(e){const{blob:t,duration:s,waveform:n}=e;a=[await Ya("wonderful-voice-message.ogg",t,!1,{voice:{duration:s,waveform:n}})]}}const{text:s,entities:c}=Object(Qa.a)(pe.current);if(a.length||s||y)if(a.length&&s&&s.length>1024){const e=s.length-1024;V({error:{message:"CAPTION_TOO_LONG_PLEASE_REMOVE_CHARACTERS",textParams:{"{EXTRA_CHARS_COUNT}":e,"{PLURAL_S}":e>1?"s":""}}})}else{if(a.length||s){if(rt&&!ct){const e=Math.floor(Date.now()/1e3),t=le.current&&Math.floor(e-le.current),a=rt.nextSendDate&&rt.nextSendDate>e;if(t&&t<rt.seconds||a){const s=a?rt.nextSendDate-e:rt.seconds-t;V({error:{message:`A wait of ${s} seconds is required before sending another message in this chat`,isSlowMode:!0}});return void document.getElementById(n.v).blur()}}H({text:s,entities:c,attachments:a,scheduledAt:t,isSilent:e})}y&&W(),le.current=Math.floor(Date.now()/1e3),_({chatId:i,localOnly:!0}),requestAnimationFrame(Ot)}},[Ge,fe,j,i,rt,y,ct,H,Ue,Ot,_,V,W]),yt=Object(c.m)(e=>{e={...e,isPreloadedGlobally:!0},t?(ge({sticker:e}),me()):(H({sticker:e}),requestAnimationFrame(Ot))},[t,me,H,Ot]),Ct=Object(c.m)(e=>{t?(ge({gif:e}),me()):(H({gif:e}),requestAnimationFrame(Ot))},[t,me,H,Ot]),Et=Object(c.m)(e=>{t?(ge({poll:e}),Q(),me()):(H({poll:e}),Q())},[Q,me,H,t]),wt=Object(c.m)(()=>{t?(ge({isSilent:!0}),me()):vt(!0)},[vt,me,t]),Mt=Object(c.m)(e=>{const{isSilent:t,...a}=Oe||{},s=Math.round(Math.max(e.getTime(),Date.now()+6e4)/1e3);Oe&&0!==Object.keys(a).length?(H({...Oe,scheduledAt:s}),requestAnimationFrame(Ot)):vt(!!t,s),he()},[he,vt,Ot,Oe,H]),kt=Object(c.m)(()=>{Mt(new Date(1e3*n.lb))},[Mt]),Nt=Object(c.m)(()=>{he(),ge(void 0)},[he]),Pt=Object(c.m)(e=>{"stickers"===e?($({query:""}),z({query:void 0})):(z({query:""}),$({query:void 0}))},[$,z]),Tt=Object(c.m)(()=>{const e=document.getElementById(n.v);O.g&&e===document.activeElement?(e.blur(),setTimeout(()=>{ke()},100)):ke()},[ke]),At=Object(c.m)(()=>{J({id:i,threadId:d,type:"scheduled"})},[J,i,d]);Object(c.n)(()=>{I&&O.g&&Ne()},[I,Ne]),Object(c.n)(()=>{v?Fe():setTimeout(()=>{De()},200)},[v,De,Fe]);const xt=Object(c.m)(()=>{switch(ze){case Fs.Send:t?(Ge&&He(),me()):(vt(),requestAnimationFrame(Ot));break;case Fs.Record:Be();break;case Fs.Edit:gt()}},[ze,Ot,t,Be,gt,Ge,me,He,vt]),Rt=Object(oe.a)(),Lt=ze===Fs.Record&&!st.canAttachMedia,Ft=Object(ra.a)(o,!0),Dt=o||Ft,Bt=new Date;Bt.setSeconds(0),Bt.setMilliseconds(0);const Ut=new Date;Ut.setFullYear(Ut.getFullYear()+1);let Ht="SendMessage";switch(ze){case Fs.Edit:Ht="Save edited message";break;case Fs.Record:Ht=Lt?"Conversation.DefaultRestrictedMedia":"AccDescrVoiceMessage"}const Gt=Object(Z.a)("Composer",!v&&"shown",Le&&"hover-disabled"),qt=Object(Z.a)("mobile-symbol-menu-button",xe?Me&&"menu-opened":Me&&"is-loading");return c.a.createElement("div",{className:Gt},st.canAttachMedia&&c.a.createElement(xs.a,{containerId:"#middle-column-portals"},c.a.createElement(Ps,{isOpen:e!==qe.a.None,withQuick:[e,be].includes(qe.a.QuickFile),onHide:r,onFileSelect:pt})),c.a.createElement(ks,{attachments:fe,caption:fe.length?re:"",canSuggestMembers:C,groupChatMembers:P,currentUserId:T,usersById:A,recentEmojis:U,onCaptionUpdate:ie,language:D,addRecentEmoji:te,loadEmojiKeywords:ae,onSend:t?me:vt,onFileAppend:ft,onClear:It}),c.a.createElement(Ns,{isOpen:Boolean(E),onClear:Q,onSend:Et}),c.a.createElement(Ls,{isOpen:Boolean(w),onClose:X}),c.a.createElement(Ds,{isOpen:Boolean(S),onClose:ee}),Dt&&c.a.createElement(ms,{isOpen:Pe,isSchedule:"scheduled"===b,onClose:Ae,message:Dt}),c.a.createElement(Is,{isOpen:Ke,filter:Qe,onClose:Ye,onInsertUserName:Xe,filteredChatMembers:Je,usersById:A}),c.a.createElement("div",{id:"message-compose"},c.a.createElement("div",{className:"svg-appendix",ref:ce}),c.a.createElement(Ms,null),c.a.createElement(As,{chatId:i,threadId:d,messageText:fe.length?"":re,disabled:!st.canAttachEmbedLinks}),c.a.createElement("div",{className:"message-input-wrapper"},O.g?c.a.createElement(de.a,{className:qt,round:!0,color:"translucent",onClick:Me?Ne:Tt,ariaLabel:"Choose emoji, sticker or GIF"},c.a.createElement("i",{className:"icon-smile"}),c.a.createElement("i",{className:"icon-keyboard"}),c.a.createElement(je.a,{color:"gray"})):c.a.createElement(gs,{className:""+(Me?"activated":""),round:!0,faded:!0,color:"translucent",onActivate:ke,ariaLabel:"Choose emoji, sticker or GIF"},c.a.createElement("i",{className:"icon-smile"})),c.a.createElement(ws.a,{id:"message-input-text",html:fe.length?"":re,placeholder:Ge&&window.innerWidth<=600?"":Rt("Message"),shouldSetFocus:Me,shouldSupressFocus:O.g&&Me,shouldSupressTextFormatter:lt||Ke,onUpdate:ie,onSend:ze===Fs.Edit?gt:t?me:vt,onSupressedFocus:Ne}),k&&c.a.createElement(de.a,{round:!0,faded:!0,className:"scheduled-button",color:"translucent",onClick:At,ariaLabel:"Open scheduled messages"},c.a.createElement("i",{className:"icon-schedule"})),M&&!Ge&&!o&&c.a.createElement(gs,{className:""+(ve?"activated":""),round:!0,faded:!0,color:"translucent",onActivate:ye,ariaLabel:"Open bot command keyboard"},c.a.createElement("i",{className:"icon-bot-command"})),!Ge&&!o&&c.a.createElement(gs,{className:""+(Ee?"activated":""),round:!0,faded:!0,color:"translucent",onActivate:we,ariaLabel:"Add an attachment"},c.a.createElement("i",{className:"icon-attach"})),Ge&&_e&&c.a.createElement("span",{className:"recording-state"},Object(R.i)(_e-$e.current)),c.a.createElement(ys,{isOpen:ot,onStickerSelect:yt}),c.a.createElement(Cs.a,{isOpen:lt,emojis:bt,onClose:dt,onEmojiSelect:ut,addRecentEmoji:te,loadEmojiKeywords:ae,language:D}),c.a.createElement(ps,{isOpen:Ee,allowedAttachmentOptions:st,onFileSelect:pt,onPollCreate:K,onClose:Se}),M&&c.a.createElement(Es,{messageId:M,isOpen:ve,onClose:Ce}),c.a.createElement(fs,{isOpen:Me,allowedAttachmentOptions:st,onLoad:Re,onClose:Ne,onEmojiSelect:mt,onStickerSelect:yt,onGifSelect:Ct,onRemoveSymbol:ht,onSearchOpen:Pt,addRecentEmoji:te}))),Ge&&c.a.createElement(de.a,{round:!0,color:"danger",className:"cancel",onClick:Ue,ariaLabel:"Cancel voice recording"},c.a.createElement("i",{className:"icon-delete"})),c.a.createElement(de.a,{ref:Ve,round:!0,color:"secondary",className:`${ze} ${Ge?"recording":""}`,disabled:Lt,ariaLabel:Rt(Ht),onClick:xt,onContextMenu:ze===Fs.Send&&We?et:void 0},c.a.createElement("i",{className:"icon-send"}),c.a.createElement("i",{className:"icon-microphone-alt"}),c.a.createElement("i",{className:"icon-check"})),We&&c.a.createElement(vs,{isOpen:Ze,onSilentSend:f?void 0:wt,onScheduleSend:t?void 0:me,onClose:tt,onCloseAnimationEnd:at}),c.a.createElement(Rs,{isOpen:ue,withTimePicker:!0,selectedAt:Bt.getTime(),maxAt:Object(R.k)(Ut),isFutureMode:!0,secondButtonLabel:a?"Send When Online":void 0,onClose:Nt,onSubmit:Mt,onSecondButtonClick:a?kt:void 0}))}));var Us=Object(c.h)(e=>{const{isActive:t}=e,a=Object(Se.a)(we.a.Extra,"MobileSearch",!t,!0);return a?c.a.createElement(a,e):void 0});var Hs=Object(c.h)(e=>{const{isActive:t}=e,a=Object(Se.a)(we.a.Extra,"MessageSelectToolbar",!t);return a?c.a.createElement(a,e):void 0});var Gs=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"UnpinAllMessagesModal",!t);return a?c.a.createElement(a,e):void 0});a(244);const qs=O.g?450+n.c:void 0;function _s(e){return"file"===e.kind&&e.type&&n.l.includes(e.type)}var Vs=Object(c.h)(Object(s.h)(e=>{const{theme:t}=e.settings.byKey,{isBlurred:a,background:s,backgroundColor:n,patternColor:c}=e.settings.themes[t]||{},r=Object(o.y)(e),{chats:{listIds:i}}=e,d={theme:t,customBackground:s,backgroundColor:n,patternColor:c,isRightColumnShown:Object(o.W)(e),isBackgroundBlurred:a,isMobileSearchActive:Boolean(O.g&&Object(o.A)(e)),isSelectModeActive:Object(o.S)(e),animationLevel:e.settings.byKey.animationLevel};if(!r||!i.active)return d;const{chatId:b,threadId:u,type:m}=r,j=Object(o.f)(e,b),g=Object(o.jb)(e,b),{chatId:p,messageId:f}=e.audioPlayer,I=j&&Object(h.e)(j,u),v=Object(o.L)(e,b),y="pinned"===m;return{...d,chatId:b,threadId:u,messageListType:m,isPrivate:Object(h.lb)(b),canPost:!y&&(!j||I)&&(!v||O.g),isPinnedMessageList:y,messageSendingRestrictionReason:j&&Object(h.K)(j),hasPinnedOrAudioMessage:u!==l.MAIN_THREAD_ID||Boolean(g&&g.length)||Boolean(p&&f),pinnedMessagesCount:g?g.length:0}},(e,t)=>Object(b.l)(t,["openChat","unpinAllMessages","loadUser"]))(({chatId:e,threadId:t,messageListType:a,isPrivate:s,isPinnedMessageList:r,canPost:o,messageSendingRestrictionReason:i,hasPinnedOrAudioMessage:d,pinnedMessagesCount:b,customBackground:u,theme:m,backgroundColor:h,patternColor:j,isRightColumnShown:g,isBackgroundBlurred:p,isMobileSearchActive:f,isSelectModeActive:I,animationLevel:v,openChat:y,unpinAllMessages:C,loadUser:E})=>{const{width:w}=ze(),[S,M]=Object(c.r)(qe.a.None),[k,N]=Object(c.r)(),[P,T]=Object(c.r)(),[A,x]=Object(c.r)(!1),R=d&&(w<n.db||g&&w>n.ab&&w<n.kb||w>=n.Z&&w<n.jb),L=Object(We.a)(e,qs),F=Object(We.a)(t,qs),D=Object(We.a)(a,qs),B=Object(We.a)(o,qs),U=Object(We.a)(R,qs),H=Object(We.a)(k,qs);Object(c.n)(()=>e?Object(ne.a)(()=>{y({id:void 0})}):void 0,[e,y]),Object(c.n)(()=>{M(qe.a.None),N(void 0),T(void 0)},[e]),Object(c.n)(()=>{s&&E({userId:e})},[e,s,E]);const G=Object(c.m)(e=>{if(O.l)return;const{items:t}=e.dataTransfer||{},a=t&&Array.from(t).every(_s);M(a?qe.a.QuickFile:qe.a.Document)},[]),q=Object(c.m)(()=>{M(qe.a.None)},[]),_=Object(c.m)(()=>{x(!0)},[]),V=Object(c.m)(()=>{x(!1)},[]),$=Object(c.m)(()=>{C({chatId:e}),V(),y({id:e})},[C,y,V,e]),z=((e,t)=>{const[a,s]=Object(c.r)(t);return Object(c.n)(()=>{t&&(t.startsWith("#")?s(t):_e.c(n.m,e,_e.a.Blob).then(e=>{const t=URL.createObjectURL(e);Object(Ve.g)(t).then(()=>{s(`url(${t})`)})}))},[t,e]),t?a:void 0})(m,u),W=Object(Z.a)(U&&"has-header-tools",u&&"custom-bg-image",h&&"custom-bg-color",u&&p&&"blurred",O.n?"mask-image-disabled":"mask-image-enabled"),K=Object(Z.a)("messaging-disabled",!I&&"shown"),{composerHiddenScale:Q,toolbarHiddenScale:Y,composerTranslateX:X,toolbarTranslateX:J,unpinHiddenScale:ee,toolbarForUnpinHiddenScale:te}=Object(c.p)(()=>Ke(w,B),[B,w]),ae=Object(oe.a)(),se=Object(Z.a)("middle-column-footer",!B&&"no-composer",B&&P&&!I&&"with-notch");return c.a.createElement("div",{id:"MiddleColumn",className:W,style:`\n        --composer-hidden-scale: ${Q};\n        --toolbar-hidden-scale: ${Y};\n        --unpin-hidden-scale: ${ee};\n        --toolbar-unpin-hidden-scale: ${te};\n        --composer-translate-x: ${X}px;\n        --toolbar-translate-x: ${J}px;\n        --pattern-color: ${j};\n        --theme-background-color:\n          ${h||("dark"===m?n.n:n.I)};\n      `},c.a.createElement("div",{id:"middle-column-bg",style:z?"--custom-background: "+z:void 0}),c.a.createElement("div",{id:"middle-column-portals"}),L&&F&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"messages-layout",onDragEnter:B?G:void 0},c.a.createElement(jt,{chatId:L,threadId:F,messageListType:D}),c.a.createElement(ce.b,{name:v===n.e?"slide":"fade",activeKey:"thread"===D&&F===l.MAIN_THREAD_ID?1:2,shouldCleanup:!0},()=>c.a.createElement(c.a.Fragment,null,c.a.createElement(za,{key:`${L}-${F}-${D}`,chatId:L,threadId:F,type:D,canPost:B,hasTools:U,onFabToggle:N,onNotchToggle:T}),c.a.createElement("div",{className:se},B&&c.a.createElement(Bs,{chatId:L,threadId:F,messageListType:D,dropAreaState:S,onDropHide:q}),r&&c.a.createElement("div",{className:"unpin-button-container",dir:ae.isRtl?"rtl":void 0},c.a.createElement(de.a,{size:"tiny",fluid:!0,color:"secondary",className:"unpin-all-button",onClick:_},c.a.createElement("i",{className:"icon-unpin"}),c.a.createElement("span",null,ae("Chat.Pinned.UnpinAll",b,"i")))),!r&&!B&&i&&c.a.createElement("div",{className:K},c.a.createElement("div",{className:"messaging-disabled-inner"},c.a.createElement("span",null,i))),c.a.createElement(Hs,{messageListType:D,isActive:I,canPost:B})))),c.a.createElement(Wa,{isShown:H,canPost:B})),O.g&&c.a.createElement(Us,{isActive:Boolean(f)})),e&&c.a.createElement(Gs,{isOpen:A,chatId:e,pinnedMessagesCount:b,onClose:V,onUnpin:$}))}));a(245);const $s=Object(p.a)(e=>e(),200,!1);var zs;!function(e){e[e.Profile=0]="Profile",e[e.MemberList=1]="MemberList",e[e.SharedMedia=2]="SharedMedia",e[e.Search=3]="Search",e[e.Management=4]="Management",e[e.ManageInitial=5]="ManageInitial",e[e.ManageChannelSubscribers=6]="ManageChannelSubscribers",e[e.ManageChatAdministrators=7]="ManageChatAdministrators",e[e.ManageChatPrivacyType=8]="ManageChatPrivacyType",e[e.ManageDiscussion=9]="ManageDiscussion",e[e.ManageGroupPermissions=10]="ManageGroupPermissions",e[e.ManageGroupRemovedUsers=11]="ManageGroupRemovedUsers",e[e.ManageGroupUserPermissionsCreate=12]="ManageGroupUserPermissionsCreate",e[e.ManageGroupUserPermissions=13]="ManageGroupUserPermissions",e[e.ManageGroupRecentActions=14]="ManageGroupRecentActions",e[e.ManageGroupAdminRights=15]="ManageGroupAdminRights",e[e.ManageGroupMembers=16]="ManageGroupMembers",e[e.StickerSearch=17]="StickerSearch",e[e.GifSearch=18]="GifSearch",e[e.PollResults=19]="PollResults"}(zs||(zs={}));var Ws=Object(c.h)(Object(s.h)((e,{chatId:t,isProfile:a,isManagement:s})=>{const{query:n}=Object(o.A)(e)||{},{query:c}=Object(o.z)(e)||{},{query:r}=Object(o.s)(e)||{},i=t?Object(o.f)(e,t):void 0,l=i&&Object(h.jb)(i);return{canManage:Boolean(!s&&a&&i&&!Object(o.P)(e,i.id)&&(Object(h.lb)(i.id)||(Object(h.gb)(i)||i.isCreator)&&!i.isNotJoined)),isChannel:l,messageSearchQuery:n,stickerSearchQuery:c,gifSearchQuery:r}},(e,t)=>Object(b.l)(t,["setLocalTextSearchQuery","setStickerSearchQuery","setGifSearchQuery","searchTextMessagesLocal","toggleManagement","searchMessagesByDate"]))(({isColumnOpen:e,isProfile:t,isSearch:a,isManagement:s,isStickerSearch:n,isGifSearch:r,isPollResults:o,profileState:i,managementScreen:l,canManage:b,isChannel:u,onClose:m,messageSearchQuery:h,stickerSearchQuery:j,gifSearchQuery:g,setLocalTextSearchQuery:p,setStickerSearchQuery:f,setGifSearchQuery:I,searchTextMessagesLocal:v,toggleManagement:y,searchMessagesByDate:C,shouldSkipAnimation:E})=>{var w;const S=Object(c.q)(null),[M,k,N]=Object(se.a)(),P=Object(c.m)(e=>{p({query:e}),e.length&&$s(v)},[v,p]),T=Object(c.m)(e=>{C({timestamp:e.valueOf()/1e3}),N()},[N,C]),A=Object(c.m)(e=>{f({query:e,noPushState:!0})},[f]),x=Object(c.m)(e=>{I({query:e,noPushState:!0})},[I]),[R,L]=Object(c.r)(!e);Object(c.n)(()=>{setTimeout(()=>{L(!e)},300)},[e]);const F=Object(oe.a)(),D=t?i===d.k.Profile?zs.Profile:i===d.k.SharedMedia?zs.SharedMedia:i===d.k.MemberList?zs.MemberList:-1:a?zs.Search:o?zs.PollResults:n?zs.StickerSearch:r?zs.GifSearch:s?l===d.g.Initial?zs.ManageInitial:l===d.g.ChatPrivacyType?zs.ManageChatPrivacyType:l===d.g.Discussion?zs.ManageDiscussion:l===d.g.ChannelSubscribers?zs.ManageChannelSubscribers:l===d.g.GroupPermissions?zs.ManageGroupPermissions:l===d.g.ChatAdministrators?zs.ManageChatAdministrators:l===d.g.GroupRemovedUsers?zs.ManageGroupRemovedUsers:l===d.g.GroupUserPermissionsCreate?zs.ManageGroupUserPermissionsCreate:l===d.g.GroupUserPermissions?zs.ManageGroupUserPermissions:l===d.g.GroupRecentActions?zs.ManageGroupRecentActions:l===d.g.ChatAdminRights?zs.ManageGroupAdminRights:l===d.g.GroupMembers?zs.ManageGroupMembers:void 0:void 0,B=null!==(w=Object(Xe.a)(D,!0))&&void 0!==w?w:-1;function U(){if(-1!==B)switch(B){case zs.PollResults:return c.a.createElement("h3",null,F("PollResults"));case zs.Search:return c.a.createElement(c.a.Fragment,null,c.a.createElement(be.a,{parentContainerClassName:"RightSearch",value:h,onChange:P}),c.a.createElement(de.a,{round:!0,size:"smaller",color:"translucent",onClick:k,ariaLabel:"Search messages by date"},c.a.createElement("i",{className:"icon-calendar"})));case zs.ManageInitial:return c.a.createElement("h3",null,F("Edit"));case zs.ManageChatPrivacyType:return c.a.createElement("h3",null,F(u?"ChannelTypeHeader":"GroupTypeHeader"));case zs.ManageDiscussion:return c.a.createElement("h3",null,F("Discussion"));case zs.ManageChatAdministrators:return c.a.createElement("h3",null,F("ChannelAdministrators"));case zs.ManageGroupRecentActions:return c.a.createElement("h3",null,F("Group.Info.AdminLog"));case zs.ManageGroupAdminRights:return c.a.createElement("h3",null,F("EditAdminRights"));case zs.ManageGroupPermissions:return c.a.createElement("h3",null,F("ChannelPermissions"));case zs.ManageGroupRemovedUsers:return c.a.createElement("h3",null,F("ChannelBlockedUsers"));case zs.ManageGroupUserPermissionsCreate:return c.a.createElement("h3",null,F("ChannelAddException"));case zs.ManageGroupUserPermissions:return c.a.createElement("h3",null,F("UserRestrictions"));case zs.StickerSearch:return c.a.createElement(be.a,{value:j,placeholder:F("SearchStickersHint"),onChange:A});case zs.GifSearch:return c.a.createElement(be.a,{value:g,placeholder:F("SearchGifsTitle"),onChange:x});case zs.SharedMedia:return c.a.createElement("h3",null,F("SharedMedia"));case zs.ManageChannelSubscribers:return c.a.createElement("h3",null,F("ChannelSubscribers"));case zs.MemberList:case zs.ManageGroupMembers:return c.a.createElement("h3",null,F("GroupMembers"));default:return c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",null,"Profile"),c.a.createElement("section",{className:"tools"},b&&c.a.createElement(de.a,{round:!0,color:"translucent",size:"smaller",ariaLabel:F("Edit"),onClick:y},c.a.createElement("i",{className:"icon-edit"}))))}}const H=O.g||D===zs.SharedMedia||D===zs.MemberList||s,G=Object(Z.a)("animated-close-icon",(R||E)&&"no-transition");return Object(c.n)(()=>{S.current.classList.toggle("state-back",H)},[H]),c.a.createElement("div",{className:"RightHeader"},c.a.createElement(de.a,{className:"close-button",round:!0,color:"translucent",size:"smaller",onClick:m,ariaLabel:F(H?"Common.Back":"Common.Close")},c.a.createElement("div",{ref:S,className:G})),c.a.createElement(ce.b,{name:R||E?"none":"slide-fade",activeKey:B},U),!O.g&&c.a.createElement(Rs,{isOpen:M,isPastMode:!0,submitButtonLabel:F("JumpToDate"),onClose:N,onSubmit:T}))})),Ks=a(129);function Qs(e,t,a,s,r,o,i,l,d,b,u){const m="members"!==s&&r?r:s,O=Object(c.p)(()=>{if(o&&i)return Object(h.Eb)(o.map(({userId:e})=>e),i)},[o,i]),[j,g,p]=function(e,t,a,s){const[c,r]=Object(Ks.a)(a?t:void 0,s,void 0,n.R),o=!c||!s||c[0]===s[0];return[c,r,!o]}(0,t,u,O),[f,I,v]=Ys("media",m,a,u,l,d),[y,C,E]=Ys("documents",m,a,u,l,d),[w,S,M]=Ys("links",m,a,u,l,d),[k,N,P]=Ys("audio",m,a,u,l,d);let T,A,x=!1;switch(m){case"members":T=j,A=g,x=p;break;case"media":T=f,A=I,x=v;break;case"documents":T=y,A=C,x=E;break;case"links":T=w,A=S,x=M;break;case"audio":T=k,A=N,x=P}return[m,T,A,x]}function Ys(e,t,a,s,r,o){const i=Object(c.q)();Object(fe.a)(()=>{t===e&&r&&o&&(i.current=Object(h.w)(r,o,e).reverse())},[r,o,t,e]);const[l,d]=Object(Ks.a)(s?a:void 0,i.current,void 0,"media"===e?n.ob:n.X);return[l,d,!(!l||!i.current||l[0]===i.current[0])]}var Xs=a(59);const Js=Object(p.g)(e=>e(),250,!1);let Zs=!1;var en=a(114),tn=a(107);var an=a(135),sn=a(193);a(246);var nn=Object(c.h)(({chat:e,user:t,photo:a,isFirstPhoto:s,isSavedMessages:n,lastSyncTime:r,onClick:o})=>{const i=Object(oe.a)(),d=t&&Object(h.pb)(t);function b(s="big",c){if(a&&!c)return`photo${a.id}?size=c`;let r;return n||d||(t?r=Object(h.f)(t,s):e&&(r=Object(h.f)(e,s))),r}const u=b(),m=Object(ct.a)(u,!1,l.ApiMediaFormat.BlobUrl,r),O=Object(ct.a)(!m&&s?b("normal",!0):void 0,!1,l.ApiMediaFormat.BlobUrl,r),j=Object(sn.a)(!m&&a&&a.thumbnail&&a.thumbnail.dataUri),g=m||O||j,p=Object(ra.a)(g);let f="";if(n)f=c.a.createElement("i",{className:"icon-avatar-saved-messages"});else if(d)f=c.a.createElement("i",{className:"icon-avatar-deleted-account"});else if(g)f=c.a.createElement("img",{src:g,className:"avatar-media",alt:"",decoding:"async"});else if(!g&&t){const e=Object(h.Z)(t);f=e?Object(Je.c)(e,2):void 0}else if(!g&&e){const t=Object(h.l)(i,e);f=t&&Object(Je.c)(t,Object(h.lb)(e.id)?2:1)}else f=c.a.createElement("div",{className:"spinner-wrapper"},c.a.createElement(je.a,{color:"white"}));const I=Object(Z.a)("ProfilePhoto","color-bg-"+Object(h.X)(t||e),n&&"saved-messages",d&&"deleted-account",!n&&!g&&"no-photo");return c.a.createElement("div",{className:I,onClick:g?o:void 0},p&&g&&p!==g&&c.a.createElement("img",{src:p,className:"prev-avatar-media",alt:"",decoding:"async"}),"string"==typeof f?Object(nt.a)(f,["hq_emoji"]):f)});a(247);var cn=Object(c.h)(Object(s.h)((e,{userId:t,forceShowSelf:a})=>{const{lastSyncTime:s}=e,n=Object(o.Gb)(e,t),c=Object(o.f)(e,t),r=!a&&n&&n.isSelf,{animationLevel:i}=e.settings.byKey;return{lastSyncTime:s,user:n,chat:c,isSavedMessages:r,animationLevel:i}},(e,t)=>Object(b.l)(t,["loadFullUser","openMediaViewer"]))(({user:e,chat:t,isSavedMessages:a,lastSyncTime:s,animationLevel:n,loadFullUser:r,openMediaViewer:o})=>{const{id:i}=e||{},{id:b}=t||{},u=e?Object(h.Z)(e):t?t.title:"",m=(e?e.photos:t?t.photos:void 0)||[],j=n>=1?"slide":"none",[g,p]=Object(c.r)(0),f=a||m.length<=1||0===g,I=a||m.length<=1||g===m.length-1;Object(c.n)(()=>{g>m.length&&p(Math.max(0,m.length-1))},[g,m.length]);const v=Object(oe.a)();Object(c.n)(()=>{s&&i&&r({userId:i})},[i,r,s]),function(e,t,a){Object(c.n)(()=>{t.slice(a,a+4).forEach(e=>{mt.c(`photo${e.id}?size=c`)||mt.b(`photo${e.id}?size=c`,l.ApiMediaFormat.BlobUrl)})},[a,t])}(0,m,g);const y=Object(c.m)(()=>{o({avatarOwnerId:i||b,profilePhotoIndex:g,origin:d.h.ProfileAvatar})},[o,i,b,g]),C=Object(c.m)(()=>{f||p(g-1)},[g,f]),E=Object(c.m)(()=>{I||p(g+1)},[g,I]);if(Object(c.n)(()=>{const e=document.querySelector(".profile-slide-container > .active, .profile-slide-container > .to");if(e)return Object(pe.b)(e,{excludedClosestSelector:".navigation",onSwipe:O.l?(e,t)=>{t===pe.a.Right?C():t===pe.a.Left&&E()}:void 0})},[E,C]),!e&&!t)return;function w(){const s=!a&&m&&m.length>0?m[g]:void 0;return c.a.createElement(nn,{key:g,user:e,chat:t,photo:s,isSavedMessages:a,isFirstPhoto:f,onClick:y})}const S=e&&e.isVerified||t&&t.isVerified;return c.a.createElement("div",{className:"ProfileInfo",dir:v.isRtl?"rtl":void 0},c.a.createElement("div",{className:"photo-wrapper"},function(){if(!(a||!m||m.length<=1))return c.a.createElement("div",{className:"photo-dashes"},m.map((e,t)=>c.a.createElement("span",{className:"photo-dash "+(t===g?"current":"")})))}(),c.a.createElement(ce.b,{activeKey:g,name:j,className:"profile-slide-container"},w),!f&&c.a.createElement("button",{type:"button",className:"navigation prev","aria-label":v("AccDescrPrevious"),onClick:C}),!I&&c.a.createElement("button",{type:"button",className:"navigation next","aria-label":v("Next"),onClick:E})),c.a.createElement("div",{className:"info",dir:v.isRtl?"rtl":"auto"},a?c.a.createElement("div",{className:"title"},c.a.createElement("h3",{dir:"auto"},v("SavedMessages"))):c.a.createElement("div",{className:"title"},c.a.createElement("h3",{dir:"auto"},u&&Object(nt.a)(u)),S&&c.a.createElement(an.a,null)),!a&&(e?c.a.createElement("div",{className:"status "+(Object(h.xb)(e)?"online":"")},c.a.createElement("span",{className:"user-status",dir:"auto"},Object(h.ab)(v,e))):c.a.createElement("span",{className:"status",dir:"auto"},Object(h.jb)(t)?v("Subscribers",t.membersCount,"i"):v("Members",t.membersCount,"i")))))}));var rn=Object(c.h)(Object(s.h)((e,{chatOrUserId:t})=>{const{lastSyncTime:a}=e,s=t?Object(o.f)(e,t):void 0;return{lastSyncTime:a,chat:s,user:Object(h.lb)(t)?Object(o.Gb)(e,t):void 0,canInviteUsers:s&&(!Object(h.jb)(s)&&!Object(h.yb)(s,"inviteUsers")||Object(h.q)(s,"inviteUsers"))}},(e,t)=>Object(b.l)(t,["loadFullUser","updateChatMutedState","showNotification"]))(({lastSyncTime:e,user:t,chat:a,forceShowSelf:s,canInviteUsers:n,loadFullUser:r,showNotification:o,updateChatMutedState:i})=>{const{id:l,fullInfo:d,username:b,phoneNumber:u,isSelf:m}=t||{},{id:O,isMuted:j,username:g}=a||{},p=Object(oe.a)();Object(c.n)(()=>{e&&l&&r({userId:l})},[r,l,e]);const f=Object(c.m)(()=>{i({chatId:O,isMuted:!j})},[O,j,i]);if(!a||a.isRestricted||m&&!s)return;function I(e,t){Object(w.c)(e),o({message:t+" was copied"})}const v=u&&Object(ga.c)(u),y=Object(h.h)(a),C=0===y.indexOf("http")?y:"http://"+y,E=b||g,S=d&&d.bio||Object(h.g)(a);return c.a.createElement("div",{className:"ChatExtra"},v&&!!v.length&&c.a.createElement(tn.a,{icon:"phone",multiline:!0,narrow:!0,ripple:!0,onClick:()=>I(v,p("Phone"))},c.a.createElement("span",{className:"title",dir:"auto"},v),c.a.createElement("span",{className:"subtitle"},p("Phone"))),E&&c.a.createElement(tn.a,{icon:"mention",multiline:!0,narrow:!0,ripple:!0,onClick:()=>I("@"+E,p("Username"))},c.a.createElement("span",{className:"title",dir:"auto"},Object(nt.a)(E)),c.a.createElement("span",{className:"subtitle"},p("Username"))),S&&!!S.length&&c.a.createElement(tn.a,{icon:"info",multiline:!0,narrow:!0,isStatic:!0},c.a.createElement("span",{className:"title",dir:"auto"},Object(nt.a)(S,["br","links","emoji"])),c.a.createElement("span",{className:"subtitle"},p(l?"UserBio":"Info"))),n&&!E&&!!y.length&&c.a.createElement(tn.a,{icon:"mention",multiline:!0,narrow:!0,ripple:!0,onClick:()=>I(y,p("SetUrlPlaceholder"))},c.a.createElement("div",{className:"title"},c.a.createElement(Ma.a,{url:C,className:"title",text:y})),c.a.createElement("span",{className:"subtitle"},p("SetUrlPlaceholder"))),c.a.createElement(tn.a,{icon:"unmute",ripple:!0,onClick:f},c.a.createElement("span",null,p("Notifications")),c.a.createElement(me,{id:"group-notifications",label:l?"Toggle User Notifications":"Toggle Chat Notifications",checked:!j,inactive:!0})))})),on=a(167),ln=a(187),dn=a(119);a(251);const bn=[{type:"media",title:"SharedMediaTab2"},{type:"documents",title:"SharedFilesTab2"},{type:"links",title:"SharedLinksTab2"},{type:"audio",title:"SharedMusicTab2"}];function un(e){return[`.shared-media-transition > div:only-child > .${e}-list > .scroll-item`,`.shared-media-transition > div.active > .${e}-list > .scroll-item`].join(", ")}var mn=Object(c.h)(Object(s.h)((e,{chatId:t,userId:a})=>{const s=Object(o.f)(e,t),n=Object(o.m)(e,a||t),{currentType:c,resultsByType:r}=Object(o.v)(e)||{},{foundIds:i}=r&&c&&r[c]||{},{byId:l}=e.users,d=s&&Object(h.kb)(s),b=s&&Object(h.jb)(s),u=d||b&&Object(h.gb)(s),m=s&&s.fullInfo&&s.fullInfo.members,O=u&&s&&s.fullInfo&&!s.fullInfo.canViewMembers;let j;return a?j=a:Object(h.lb)(t)&&(j=t),{isChannel:b,resolvedUserId:j,chatMessages:n,foundIds:i,mediaSearchType:c,hasMembersTab:u,areMembersHidden:O,...u&&m&&{members:m,usersById:l},isRightColumnShown:Object(o.W)(e),isRestricted:s&&s.isRestricted,lastSyncTime:e.lastSyncTime}},(e,t)=>Object(b.l)(t,["setLocalMediaSearchType","loadMoreMembers","searchMediaMessagesLocal","openMediaViewer","openAudioPlayer","openUserInfo","focusMessage","loadProfilePhotos"]))(({chatId:e,profileState:t,onProfileStateChange:a,isChannel:s,resolvedUserId:r,chatMessages:o,foundIds:i,mediaSearchType:b,hasMembersTab:u,areMembersHidden:m,members:h,usersById:j,isRightColumnShown:g,isRestricted:p,lastSyncTime:f,setLocalMediaSearchType:I,loadMoreMembers:v,searchMediaMessagesLocal:y,openMediaViewer:C,openAudioPlayer:E,openUserInfo:w,focusMessage:S,loadProfilePhotos:M})=>{const k=Object(c.q)(null),N=Object(c.q)(null),P=Object(oe.a)(),[T,A]=Object(c.r)(0),x=Object(c.p)(()=>[...u?[{type:"members",title:s?"ChannelSubscribers":"GroupMembers"}]:[],...bn],[u,s]),R=x[T].type,[L,F,D,B]=Qs(0,v,y,R,b,h,j,o,i,0,f),U=x.findIndex(({type:e})=>e===L),{handleScroll:H}=function(e,t,a,s){Object(Xs.a)(([a])=>{if(a&&a!==t){const a=e.current,n=a.querySelector(".TabList");a.scrollTop<n.offsetTop&&(s("members"===t?d.k.MemberList:d.k.SharedMedia),Zs=!0,Object(Ct.a)(a,n,"start",void 0,void 0,void 0,300),setTimeout(()=>{Zs=!1},350))}},[t,s]),Object(Xs.a)(([t])=>{if(a!==d.k.Profile||a===t)return;const n=e.current;if(!n)return;const c=n.querySelector(".TabList");!c||c.offsetTop>n.scrollTop||(Zs=!0,Object(Ct.a)(n,n.firstElementChild,"start",void 0,2*n.offsetHeight),setTimeout(()=>{Zs=!1},350),s(a))},[a]);const n=Object(c.m)(()=>{const a=e.current;if(!a)return;const n=a.querySelector(".TabList");if(!n)return;let c=d.k.Profile;a.scrollTop>=n.offsetTop&&(c="members"===t?d.k.MemberList:d.k.SharedMedia),s(c)},[e,s,t]);return Object(c.n)(()=>{Zs||n()},[n,t]),{handleScroll:Object(c.m)(()=>{Zs||Js(n)},[n])}}(k,R,t,a),{applyTransitionFix:G,releaseTransitionFix:q}=function(e,t=".Transition.shared-media-transition"){return Object(c.n)(()=>{function a(){const a=e.current,s=a.querySelector(t),n=a.querySelector(".TabList");s&&n&&(s.style.minHeight=a.offsetHeight-n.offsetHeight+"px")}return a(),window.addEventListener("resize",a,!1),()=>{window.removeEventListener("resize",a,!1)}},[e,t]),{applyTransitionFix:Object(c.m)(()=>{const t=e.current;if("hidden"!==t.style.overflowY){const e=t.offsetWidth-t.clientWidth;t.style.overflowY="hidden",t.style.marginRight=e+"px"}},[e]),releaseTransitionFix:Object(c.m)(()=>{const t=e.current;t.style.overflowY="scroll",t.style.marginRight="0"},[e])}}(k),[_,V]=(()=>{const[e,t]=Object(c.r)(!1);return[e,Object(c.m)(()=>{t(e=>!e)},[])]})(),$=Object(c.m)(()=>{q(),V()},[q,V]);Object(c.n)(()=>{I({mediaType:R})},[I,R]);const z=r||e;Object(c.n)(()=>{f&&M({profileId:z})},[M,z,f]);const W=Object(c.m)(e=>{C({chatId:z,threadId:l.MAIN_THREAD_ID,messageId:e,origin:d.h.SharedMedia})},[z,C]),K=Object(c.m)(e=>{E({chatId:z,messageId:e})},[z,E]),Q=Object(c.m)(e=>{w({id:e})},[w]),Y=Object(c.m)(e=>{S({chatId:z,messageId:e})},[z,S]);let X;Object(c.n)(()=>{if(N.current&&O.l)return Object(pe.b)(N.current,{onSwipe:(e,t)=>{t===pe.a.Left?A(Math.min(T+1,x.length-1)):t===pe.a.Right&&A(Math.max(0,T-1))}})},[T,x.length]);const J="members"===L||!u&&"media"===L;J?X=g?0:1e3:F||(X=n.pb);const Z=Object(Ss.a)([e,L],X);function ee(){if(!F||!Z||!o){const e=J&&F&&!Z;return c.a.createElement("div",{className:"content empty-list"},!e&&c.a.createElement(je.a,null))}if(!F.length){let e;switch(L){case"members":e=m?"You have no access to group members list.":"No members found";break;case"documents":e=P("lng_media_file_empty_search");break;case"links":e=P("lng_media_link_empty_search");break;case"audio":e=P("lng_media_song_empty_search");break;default:e=P("SharedMedia.EmptyTitle")}return c.a.createElement("div",{className:"content empty-list"},c.a.createElement(dn.a,{text:e}))}return c.a.createElement("div",{className:`content ${L}-list`,dir:P.isRtl&&"media"===L?"rtl":void 0,teactFastList:!0},"media"===L?F.map(e=>o[e]&&c.a.createElement(on.a,{key:e,message:o[e],onClick:W})):"documents"===L?F.map(e=>o[e]&&c.a.createElement(Kt.a,{key:e,message:o[e],withDate:!0,smaller:!0,className:"scroll-item",onDateClick:Y})):"links"===L?F.map(e=>o[e]&&c.a.createElement(ln.a,{key:e,message:o[e],onMessageClick:Y})):"audio"===L?F.map(e=>o[e]&&c.a.createElement(Qt.a,{key:e,renderingFor:"sharedMedia",message:o[e],date:o[e].date,lastSyncTime:f,className:"scroll-item",onPlay:K,onDateClick:Y})):"members"===L?F.map((e,t)=>c.a.createElement(tn.a,{key:e,teactOrderKey:t,className:"chat-item-clickable scroll-item",onClick:()=>Q(e)},c.a.createElement(Ze.a,{userId:e,forceShowSelf:!0}))):void 0)}return c.a.createElement(en.a,{ref:k,className:"Profile custom-scroll",itemSelector:un(L),items:Z?F:void 0,cacheBuster:_,sensitiveArea:n.fb,preloadBackwards:Z?"members"===L?n.R:n.ob:0,noScrollRestoreOnTop:!0,noFastList:!0,onLoadMore:D,onScroll:H},!B&&function(e,t){return c.a.createElement("div",{className:"profile-info"},c.a.createElement(cn,{userId:t||e,forceShowSelf:t!==e}),c.a.createElement(rn,{chatOrUserId:t||e,forceShowSelf:t!==e}))}(e,r),!p&&c.a.createElement("div",{className:"shared-media"},c.a.createElement(ce.b,{ref:N,name:P.isRtl?"slide-reversed":"slide",activeKey:U,renderCount:x.length,shouldRestoreHeight:!0,className:"shared-media-transition",onStart:G,onStop:$},ee),c.a.createElement(ye.a,{big:!0,activeTab:T,tabs:x,onSwitchTab:A})))}));var hn=Object(c.h)(e=>{const t=Object(Se.a)(we.a.Extra,"RightSearch");return t?c.a.createElement(t,e):c.a.createElement(Me.a,null)});var On=Object(c.h)(e=>{const t=Object(Se.a)(we.a.Extra,"Management");return t?c.a.createElement(t,e):c.a.createElement(Me.a,null)});var jn=Object(c.h)(()=>{const e=Object(Se.a)(we.a.Extra,"StickerSearch");return e?c.a.createElement(e,null):c.a.createElement(Me.a,null)});var gn=Object(c.h)(()=>{const e=Object(Se.a)(we.a.Extra,"GifSearch");return e?c.a.createElement(e,null):c.a.createElement(Me.a,null)});var pn=Object(c.h)(()=>{const e=Object(Se.a)(we.a.Extra,"PollResults");return e?c.a.createElement(e,null):c.a.createElement(Me.a,null)});a(252);const fn=Object.keys(d.l).length/2,In=Object.keys(d.g).length/2;function vn(){const e=document.querySelector(".RightHeader .SearchInput input");e&&e.blur()}var yn=Object(c.h)(Object(s.h)(e=>{const{chatId:t,threadId:a}=Object(o.y)(e)||{},s=Object(o.d)(e);return{contentKey:Object(o.nb)(e),chatId:t,threadId:a,currentProfileUserId:e.users.selectedId,isChatSelected:Boolean(t&&s)}},(e,t)=>Object(b.l)(t,["openUserInfo","toggleChatInfo","toggleManagement","closeLocalTextSearch","setStickerSearchQuery","setGifSearchQuery","closePollResults"]))(({contentKey:e,chatId:t,threadId:a,currentProfileUserId:s,isChatSelected:r,toggleChatInfo:o,toggleManagement:l,openUserInfo:b,closeLocalTextSearch:u,setStickerSearchQuery:m,setGifSearchQuery:h,closePollResults:O})=>{var j;const{width:g}=ze(),[p,f]=Object(c.r)(d.k.Profile),[I,v]=Object(c.r)(d.g.Initial),[y,C]=Object(c.r)(),[E,w]=Object(c.r)(),S=p!==d.k.Profile,M=void 0!==e,k=e===d.l.ChatInfo||e===d.l.UserInfo,N=e===d.l.Search,P=e===d.l.Management,T=e===d.l.StickerSearch,A=e===d.l.GifSearch,x=e===d.l.PollResults,R=g<=n.ab,[L,F]=Object(c.r)(!M),D=null!==(j=Object(Xe.a)(e,!0,!r))&&void 0!==j?j:-1,B=Object(c.m)((t=!1)=>{switch(e){case d.l.ChatInfo:if(S&&(f(d.k.Profile),!t))break;o({noPushState:t},!0);break;case d.l.UserInfo:if(S&&(f(d.k.Profile),!t))break;b({id:void 0});break;case d.l.Management:switch(I){case d.g.Initial:l({noPushState:t},!0);break;case d.g.ChatPrivacyType:case d.g.Discussion:case d.g.GroupPermissions:case d.g.GroupType:case d.g.ChatAdministrators:case d.g.ChannelSubscribers:case d.g.GroupMembers:t||i.a.back(),v(d.g.Initial);break;case d.g.GroupUserPermissionsCreate:case d.g.GroupRemovedUsers:case d.g.GroupUserPermissions:t||i.a.back(),v(d.g.GroupPermissions),C(void 0),w(void 0);break;case d.g.ChatAdminRights:case d.g.GroupRecentActions:t||i.a.back(),v(d.g.ChatAdministrators)}break;case d.l.Search:vn(),u({noPushState:t});break;case d.l.StickerSearch:vn(),m({query:void 0,noPushState:t});break;case d.l.GifSearch:vn(),h({query:void 0,noPushState:t});break;case d.l.PollResults:O({noPushState:t})}},[e,S,o,b,O,I,l,u,m,h]),U=Object(c.m)(()=>{B(!1)},[B]);Object(ae.a)((e,t,a)=>{a&&"right"===a.type&&(t&&(F(!0),setTimeout(()=>F(!1),300)),B(!0))});const H=Object(c.m)((e,t)=>{C(e),w(t)},[]),G=Object(c.m)(t=>{t!==I&&(i.a.pushState({type:"right",contentKey:e}),v(t))},[e,I]);function q(){if(-1!==D)switch(D){case d.l.ChatInfo:case d.l.UserInfo:return c.a.createElement(mn,{key:s||t,chatId:t,userId:s,profileState:p,onProfileStateChange:f});case d.l.Search:return c.a.createElement(hn,{chatId:t,threadId:a});case d.l.Management:return c.a.createElement(On,{chatId:t,currentScreen:I,isPromotedByCurrentUser:E,selectedChatMemberId:y,onScreenSelect:G,onChatMemberSelect:H});case d.l.StickerSearch:return c.a.createElement(jn,null);case d.l.GifSearch:return c.a.createElement(gn,null);case d.l.PollResults:return c.a.createElement(pn,null)}}return Object(c.n)(()=>M?Object(ne.a)(B):void 0,[M,B]),Object(c.n)(()=>{setTimeout(()=>{F(!M)},300)},[M]),Object(c.n)(()=>{M&&R&&B()},[R]),Object(gt.a)(([a,s])=>{(a===d.l.ChatInfo&&e===d.l.UserInfo||a===d.l.UserInfo&&e===d.l.ChatInfo||s!==t)&&(f(d.k.Profile),v(d.g.Initial))},[e,t]),c.a.createElement("div",{id:"RightColumn-wrapper",className:r?void 0:"is-hidden"},R&&c.a.createElement("div",{className:"overlay-backdrop",onClick:B}),c.a.createElement("div",{id:"RightColumn"},c.a.createElement(Ws,{chatId:t,isColumnOpen:M,isProfile:k,isSearch:N,isManagement:P,isStickerSearch:T,isGifSearch:A,isPollResults:x,profileState:p,managementScreen:I,onClose:U,shouldSkipAnimation:L}),c.a.createElement(ce.b,{name:L?"none":"zoom-fade",renderCount:fn+In,activeKey:P?fn+I:D},q)))}));var Cn=Object(c.h)(({isOpen:e})=>{const t=Object(Se.a)(we.a.Extra,"MediaViewer",!e);return t?c.a.createElement(t,null):void 0});var En=Object(c.h)(({isOpen:e})=>{const t=Object(Se.a)(we.a.Extra,"Notifications",!e);return t?c.a.createElement(t,null):void 0});var wn=Object(c.h)(({isOpen:e})=>{const t=Object(Se.a)(we.a.Extra,"Errors",!e);return t?c.a.createElement(t,null):void 0});var Sn=Object(c.h)(e=>{const{isOpen:t}=e,a=Object(Se.a)(we.a.Extra,"ForwardPicker",!t);return a?c.a.createElement(a,e):void 0});var Mn=Object(c.h)(e=>{const{url:t}=e,a=Object(Se.a)(we.a.Extra,"SafeLinkModal",!t);return a?c.a.createElement(a,e):void 0});a(253);let kn,Nn,Pn=!1;function Tn(e){document.querySelectorAll('link[rel="icon"]').forEach(t=>{e?t.href.includes("favicon-unread")||(t.href=t.href.replace("favicon","favicon-unread")):t.href=t.href.replace("favicon-unread","favicon")})}var An=Object(c.h)(Object(s.h)(e=>{const{chatId:t,messageId:a}=e.audioPlayer,s=t&&a?Object(o.k)(e,t,a):void 0;return{animationLevel:e.settings.byKey.animationLevel,lastSyncTime:e.lastSyncTime,isLeftColumnShown:e.isLeftColumnShown,isRightColumnShown:Object(o.W)(e),isMediaViewerOpen:Object(o.T)(e),isForwardModalOpen:Object(o.R)(e),hasNotifications:Boolean(e.notifications.length),hasErrors:Boolean(e.errors.length),audioMessage:s,safeLinkModalUrl:e.safeLinkModalUrl}},(e,t)=>Object(b.l)(t,["loadAnimatedEmojis","openChat"]))(({lastSyncTime:e,loadAnimatedEmojis:t,openChat:a,isLeftColumnShown:r,isRightColumnShown:i,isMediaViewerOpen:l,isForwardModalOpen:d,animationLevel:b,hasNotifications:u,hasErrors:m,audioMessage:h,safeLinkModalUrl:O})=>{n.p&&!Pn&&(Pn=!0,console.log(">>> RENDER MAIN")),Object(c.n)(()=>{e&&t()},[e,t]);const[j,g]=Object(c.r)(!1),{transitionClassNames:p}=Object(ee.a)(!r,void 0,!0,void 0,j),{transitionClassNames:f}=Object(ee.a)(i,void 0,!0,void 0,j),I=Object(Z.a)(p.replace(/([\w-]+)/g,"middle-column-$1"),f.replace(/([\w-]+)/g,"right-column-$1"),j&&"history-animation-disabled");function v(e){e.preventDefault(),e.stopPropagation()}return Object(c.n)(()=>{document.body.classList.toggle("is-middle-column-open",I.includes("middle-column-open")),document.body.classList.toggle("is-right-column-shown",I.includes("right-column-open"))},[I]),Object(c.n)(()=>{b>0&&(document.body.classList.add("animating-right-column"),Object(J.b)(350+n.c),kn&&(clearTimeout(kn),kn=void 0),kn=window.setTimeout(()=>{document.body.classList.remove("animating-right-column"),kn=void 0},350+n.c))},[b,i]),Object(te.a)(()=>{const e=Object(o.q)(Object(s.e)());let t=0;clearInterval(Nn),Nn=window.setInterval(()=>{if(document.title.includes(n.D))Tn(!1);else{if(t%2==0){const t=Object(o.q)(Object(s.e)())-e;t>0&&(document.title=`${t} notification${t>1?"s":""}`,Tn(!0))}else document.title=n.eb,Tn(!1);t++}},1e3)},()=>{clearInterval(Nn),Nn=void 0,document.title.includes(n.D)||(document.title=n.eb),Tn(!1)}),Object(ae.a)((e,t)=>{const{state:s}=e;if("right"!==s.type)if("chat"===s.type){const{chatId:e,threadId:t,messageListType:n}=s;a({id:e,threadId:t,type:n,noPushState:!0},!0)}else a({id:void 0,noPushState:!0},!0);t&&(g(!0),setTimeout(()=>{g(!1)},n.pb))}),c.a.createElement("div",{id:"Main",className:I,onDrop:v,onDragOver:v},c.a.createElement(Ge,null),c.a.createElement(Vs,null),c.a.createElement(yn,null),c.a.createElement(Cn,{isOpen:l}),c.a.createElement(Sn,{isOpen:d}),c.a.createElement(En,{isOpen:u}),c.a.createElement(wn,{isOpen:m}),h&&c.a.createElement(Ot,{key:h.id,message:h,noUi:!0}),c.a.createElement(Mn,{url:O}))}));n.p&&console.log(">>> FINISH LOAD MAIN BUNDLE"),Object(s.e)().connectionState||Object(s.d)().initApi()},199:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){},226:function(e,t,a){},229:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){}}]);
//# sourceMappingURL=4.88bd8d80f97a277c0966.js.map